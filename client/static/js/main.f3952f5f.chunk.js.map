{"version":3,"sources":["hoc/OutsideClicker.jsx","components/SideBar.jsx","redux/types.js","redux/actions/users.action.js","redux/actions/app.action.js","components/Header.jsx","hoc/authorization.js","api.js","components/Login.jsx","components/Registration.jsx","components/OrderPanel.jsx","components/Order.jsx","components/Tables.jsx","redux/actions/tables.action.js","components/UniversalTable.jsx","components/ManageUsers.jsx","components/Home.jsx","components/Invoice.jsx","components/InvoicesList.jsx","components/SystemSettings.jsx","routes.js","App.jsx","redux/reducers/user.reducer.js","redux/reducers/app.reducer.js","redux/reducers/tables.reducer.js","redux/reducers/index.js","redux/store.js","index.js"],"names":["useOutsideClick","ref","callback","handleClick","e","current","contains","target","useEffect","document","addEventListener","removeEventListener","connect","state","user","auth","app","authorization","props","useState","menuVisible","openMenuUser","dropdownRef","useRef","body","style","overflow","className","onClick","to","routes","map","route","isPrivate","role_user","role","active","Provider","value","color","path","icon","name","ERole","USER","APP","TABLES","addUser","login","type","payload","authUser","dispatch","logoutUser","deleteUser","Dropdown","Toggle","variant","id","Menu","marginRight","Athorization","WrappedComponent","this","React","Component","sendRequestGET","url","data","callbackSuccess","callbackError","download","axios","get","params","token","localStorage","getItem","responseType","then","res","catch","error","response","sendRequestPOST","post","getUsers","CONFIG","urlGetUsers","sendDataTablesForSave","sendDataUsersForSave","urlSaveUserTable","getInvoices","year","urlGetInvoices","getInvoiceDOCX","ids","urlGetInvoiceDOCX","sendInvoicesChanges","invoiceData","urlSendInvoiceChanges","deleteInvoice","hashes","urlDeleteIncoive","getColors","urlGetColors","saveColors","changes","urlSaveColors","getMaterials","urlGetMaterials","saveMaterials","urlSaveMaterials","Login","createRef","password","preventDefault","console","log","NotificationManager","warning","setItem","jwt","success","history","push","err","urlLogin","Form","display","flexDirection","width","FloatingLabel","controlId","label","Control","placeholder","autoFocus","onLogin","bind","contextTypes","router","Registration","validateLogin","validateName","validatePassword","repeatePassword","setState","length","urlRegistration","registration","_data","hasValidate","onBlur","onBlurInput","Select","registrationUser","OrderPanel","count","price","allPrice","colors","materials","refColor","refMaterial","toggler","reCalcAllPrice","addOrderToArray","material","deleteOrderFromArrayById","action","onChange","onChangeName","minLength","required","min","max","defaultValue","onChangeCount","onChangeMainPrice","disabled","applyOrder","Order","stateOrderPanel","size","additional_info_active","numberOrder","additional","delivery","assembly","entering","assemblyAndEntering","orders","validatation","client_name","client_phone","client_address","siteName","week","dateDelivery","delivery_price","assembly_price","entering_price","assemblyAndEntering_price","checked","currentStateOrders","reduce","prev","cur","window","confirm","splice","client","clientData","phone","address","additionalData","urlNewOrder","urlNumberOrder","key","handleGetNumberOrder","add","_e","remove","filter","item","toLowerCase","Number","FLabel","_props","mark","_key","hasValidation","isInvalid","includes","validate","title","Array","Date","getFullYear","keys","i","selected","onKeyDown","onPressWeekInput","order","onClickAddOrder","cursor","marginTop","onClickAdditionalInfo","Check","onChangeDelivery","onChangeAssembly","onChangeEntering","onChangeAssemblyAndEntering","onSendThisOrder","prices","Tables","priceFormatterColor","cell","row","status","tableName","exelTableData","checkNumber","num","isNaN","valid","message","prodColumns","text","dataField","sort","textFilter","validator","newValue","column","headerStyle","colum","colIndex","editable","selectFilter","options","curr","editor","Type","SELECT","formatter","controlColumns","defaultSorted","isSelect","rowIndex","rows","updateOrders","urlGetProdOrders","getProdOrders","reverse","urlGetControlOrders","getControlOrders","location","pathname","optionsPagination","sizePerPageList","sizePerPage","textAlign","fontFamily","fontSize","marginBottom","selectYearAndReloadData","striped","hover","condensed","bordered","bootstrap4","keyField","columns","cellEdit","cellEditFactory","mode","afterSaveCell","oldValue","editCellFromRedux","filterFactory","filterPosition","selectRow","clickToSelect","clickToEdit","onSelect","onSelectForExelTable","onSelectAll","onSelectAllForExelTable","pagination","paginationFactory","thData","col","save","table","filename","sheet","buttonText","editCell","method","saveDataFromTables","UniversalTable","selectedRows","newChange","containsIndex","change","index","selRow","info","saveDataToAPI","getDataFromAPI","undefined","selectAllRows","optPagination","deleteRows","enableNewRow","newRow","Users","Home","prototype","getWeek","day_miliseconds","onejan","onejan_day","getDay","days_for_next_monday","onejan_next_monday_time","getTime","first_monday_year_time","this_time","getMonth","getDate","days_from_first_monday","Math","round","ceil","getCurrentWeek","Invoice","prods","currentStateActiveAddInputs","validateNumber","footer","validateString","columnData","summ","acc","addInvoiceChange","id_fc","invoiceRef","mainData","FileDownload","id_iv","units","prod","saveInvoiceChanges","currProds","updateAllPriceCell","hash","selectOption","inputPrice","classInput","split","onKeyPress","changeInput","deliver_back","src","HOST","alt","switchImage","site_name","date_order","changeCell","deleteRow","applyAllPrices","handleDelete","saveInvoice","printInvoice","invoiceChanges","f","InvoicesList","invoices","activeInvoice","activeRow","selectedYear","match","selectedWeek","deliverVisible","selectInvoices","findedNumberOrder","countItemsInPage","currentPage","maxCountPages","currentMove","deliverNumberOrder","cb","slice","a","b","updateListInvoices","Boolean","__row","detail","tmpSelectedInvoices","invoice","urlPostInvoiceDeliverBack","startAt","page","weeks","_filter","_","countPages","selectWeekAndReloadData","handleOnFindNumberOrder","onEventHandlerForLabel","Fragment","createDeliverBack","previousLabel","nextLabel","breakLabel","breakClassName","pageCount","marginPagesDisplayed","pageRangeDisplayed","onPageChange","pickPage","containerClassName","activeClassName","handleDeleteInvoice","printSelected","SystemSetting","backups","columnColors","columnMaterials","fileName","urlMakeBackup","backupName","urlToBackup","urlGetBackups","handleMakeBackup","join","toBackup","isNavBar","component","isExact","SystemSettings","App","userActive","urlAuth","Authorization","exact","initialStateUser","initialStateApp","invoicesChanges","initTablesState","rootReducer","combineReducers","removeItem","tables","composeEnhancers","composeWithDevTools","trace","traceLimit","store","createStore","applyMiddleware","thunkMiddleware","next","syncActivityFinished","actionQueue","flushQueue","forEach","actionWithAsyncDispatch","Object","assign","asyncDispatch","asyncAction","concat","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.f3952f5f.chunk.js","sourcesContent":["import { useEffect } from \"react\";\r\n\r\nconst useOutsideClick = (ref, callback) => {\r\n  const handleClick = (e) => {\r\n    if (ref.current && !ref.current.contains(e.target)) {\r\n      callback();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"click\", handleClick);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"click\", handleClick);\r\n    };\r\n  });\r\n};\r\n\r\nexport default useOutsideClick;\r\n","import { useState, useEffect, useRef } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport \"../styles/SideBar.scss\"\r\nimport { IconContext } from \"react-icons\"\r\nimport { FaBars } from \"react-icons/fa\"\r\nimport { connect } from \"react-redux\";\r\nimport useOutsideClick from \"../hoc/OutsideClicker\"\r\n\r\nfunction SideBar(props) {\r\n\tconst [menuVisible, openMenuUser] = useState(false)\r\n\tconst dropdownRef = useRef(null)\r\n\t// disable scroll throgth css props\r\n\tuseEffect(() => {\r\n\t\tif(menuVisible)\r\n\t\t\tdocument.body.style.overflow = 'hidden'\r\n\t\telse\r\n\t\t\tdocument.body.style.overflow = 'unset'\r\n\t}, [menuVisible ])\r\n\r\n\tuseOutsideClick(dropdownRef, () => {\r\n\t\tif(menuVisible) openMenuUser(false)\r\n\t})\r\n\r\n\treturn (\r\n\t\t<div className=\"sidebar\">\r\n\t\t\t<div className=\"icon_bars\" onClick={e => openMenuUser(!menuVisible)}>\r\n\t\t\t\t<FaBars />\r\n\t\t\t</div>\r\n\t\t\t<div className={`sidebar_content responsive_${menuVisible ? \"active\": \"noactive\"}`}>\r\n\t\t\t\t<div className=\"logo_wrapper\">\r\n\t\t\t\t\t<Link ref={dropdownRef} onClick={e => openMenuUser(false)} to=\"/\"><span className=\"logo\">FornitureWorker</span></Link>\r\n\t\t\t\t</div>\r\n\t\t\t\t<ul className=\"sidebar_ul\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprops.routes.map(route => {\r\n\t\t\t\t\t\t\tif(route.isPrivate && (route.role_user >= props.user.role && !!props.user.active && !!props.auth))\r\n\t\t\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t\t\t\t<li key={route.path}>\r\n\t\t\t\t\t\t\t\t\t\t<IconContext.Provider value={{ color: \"white\", className: \"icon_header\" }}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Link ref={dropdownRef} onClick={e => openMenuUser(false)} to={route.path}>{route.icon}{route.name}</Link>\r\n\t\t\t\t\t\t\t\t\t\t</IconContext.Provider>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprops.routes.map(route => {\r\n\t\t\t\t\t\t\tif(!route.isPrivate && !props.auth)\r\n\t\t\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t\t\t\t<li key={route.path}>\r\n\t\t\t\t\t\t\t\t\t\t<IconContext.Provider value={{ color: \"white\", className: \"icon_header\" }}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Link onClick={e => openMenuUser(false)} to={route.path}>{route.icon}{route.name}</Link>\r\n\t\t\t\t\t\t\t\t\t\t</IconContext.Provider>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n\tuser: state.user,\r\n\tauth: state.app.authorization\r\n})\r\n\r\nexport default connect(mapStateToProps, null)(SideBar)","export const ERole = {\r\n\tADMIN: 0,\r\n\tEDITOR: 1,\r\n\tMODERATOR: 2,\r\n\tUSER: 3,\r\n\r\n\t// for non-authorization users\r\n\tNON: 999\r\n}\r\n\r\n// -----------------------------------------------------------------------------\r\n// -------------------------------- CONSTS -------------------------------------\r\n// -----------------------------------------------------------------------------\r\n\r\n\r\n// ACTIONS FOR USER\r\nexport const USER = {\r\n\tADD_USER: \"USER/ADD\",\r\n\tDELETE_USER: \"USER/DELETE\",\r\n\r\n\r\n\tADD_CHANGE: \"USERS/ADD_CHANGE\",\r\n\tSAVE_CHANGES: \"USERS/SAVE_CHANGES\"\r\n}\r\n\r\n// ACTIONS FOR APP\r\nexport const APP = {\r\n\tAUTH: \"APP/AUTH\",\r\n\tLOGOUT: \"APP/LOGOUT\",\r\n\r\n\tINVOICE_ADD_CHANGE: \"APP/INVOICE_ADD_CHANGE\",\r\n\tINVOICE_SAVE_CHANGES: \"APP/INVOICE_SAVE_CHANGES\"\r\n}\r\n\r\n// ACTIONS FOR TABLES\r\nexport const TABLES = {\r\n\tEDIT_CELL: \"TABLES/EDIT_CELL\",\r\n\tSAVE_DATA: \"TABLES/SAVE_DATA\"\r\n}","import { USER } from \"../types\"\r\n\r\nexport const addUser = (login,  name, role, active) => ({\r\n\ttype: USER.ADD_USER,\r\n\tpayload: {\r\n\t\tlogin,\r\n\t\tname,\r\n\t\trole,\r\n\t\tactive\r\n\t}\r\n})\r\nexport const deleteUser = () => ({\r\n\ttype: USER.DELETE_USER\r\n})\r\n\r\nexport const addChange = (id, col, value) => ({\r\n\ttype: USER.ADD_CHANGE,\r\n\tpayload: {id, col, value}\r\n})\r\n\r\nexport const save = () => ({\r\n\ttype: USER.SAVE_CHANGES\r\n})\r\n\r\n\r\n","import { APP } from \"../types\"\r\n\r\nexport const authUser = (auth) => ({\r\n\ttype: APP.AUTH,\r\n\tpayload: auth\r\n})\r\n\r\nexport const logoutUser = () => ({\r\n\ttype: APP.LOGOUT,\r\n\tpayload: false\r\n})\r\n\r\n\r\nexport const addInvoiceChange = change => ({\r\n\ttype: APP.INVOICE_ADD_CHANGE,\r\n\tpayload: change\r\n})\r\n\r\nexport const saveInvoiceChanges = (invoiceData) => ({\r\n\ttype: APP.INVOICE_SAVE_CHANGES,\r\n\tpayload: invoiceData\r\n})","import { Link } from \"react-router-dom\"\r\nimport { Dropdown } from \"react-bootstrap\"\r\nimport { FaCog, FaSignOutAlt } from 'react-icons/fa'\r\n\r\nimport { connect } from 'react-redux'\r\nimport { deleteUser } from '../redux/actions/users.action'\r\nimport { logoutUser } from '../redux/actions/app.action'\r\n\r\nimport \"../styles/Header.scss\"\r\n\r\n\r\nfunction Header(props) {\r\n\r\n\tconst logout = (e) => {\r\n\t\tprops.logoutUser()\r\n\t\tprops.deleteUser()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<header className=\"main_header\">\r\n\t\t\t{\r\n\t\t\t\tprops.auth && \r\n\t\t\t\t\t<Dropdown>\r\n\t\t\t\t\t\t<Dropdown.Toggle variant=\"success\" id=\"dropdown-basic\">\r\n\t\t\t\t\t\t\t{props.user.login}\r\n\t\t\t\t\t\t</Dropdown.Toggle>\r\n\r\n\t\t\t\t\t\t<Dropdown.Menu>\r\n\t\t\t\t\t\t\t{/* <Link className=\"dropdown-item\" to=\"/my_settings\"><FaCog style={{marginRight: \"5px\"}}/>Настройки</Link> */}\r\n\t\t\t\t\t\t\t<Link className=\"dropdown-item\" to=\"/\" onClick={logout}><FaSignOutAlt  style={{marginRight: \"5px\"}}/>Выйти</Link>\r\n\t\t\t\t\t\t</Dropdown.Menu>\r\n\t\t\t\t\t</Dropdown>\r\n\t\t\t}\r\n\t\t</header>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n\tuser: state.user,\r\n\tauth: state.app.authorization\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n\tlogoutUser: () => dispatch(logoutUser()),\r\n\tdeleteUser: () => dispatch(deleteUser())\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Header)","import React from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\n\r\nconst Athorization = (WrappedComponent, auth) => {\r\n  class WithAuthorization extends React.Component {\r\n    render() {\r\n\r\n      if (!auth) {\r\n        return <Redirect to=\"/login\" />\r\n      }\r\n\r\n      return <WrappedComponent {...this.props}/>\r\n    }\r\n  }\r\n  return WithAuthorization\r\n};\r\n\r\nexport default Athorization\r\n","// данный модуль предполагает наличие всех необходимых функций для вд с api\r\n\r\nimport axios from 'axios'\r\nimport * as CONFIG from \"./config.json\"\r\n\r\n// -----------------------------------------------------------------------------\r\n// ---------------------------- Basic Functions --------------------------------\r\n// -----------------------------------------------------------------------------\r\n\r\nconst sendRequestGET = (url, data, callbackSuccess, callbackError, download=false) => {\r\n\taxios.get(url, { params: {...data, token: localStorage.getItem(\"token\")}, responseType: download? 'blob': \"json\" })\r\n\t\t.then(res => callbackSuccess(res.data))\r\n\t\t.catch(error => callbackError(error.response))\r\n};\r\n\r\nconst sendRequestPOST = (url, data, callbackSuccess, callbackError, download=false) => {\r\n\taxios.post(url, {...data, token: localStorage.getItem(\"token\")}, { responseType: download? 'blob': \"json\" })\r\n\t\t.then(res => {\r\n\t\t\tcallbackSuccess(res.data)\r\n\t\t})\r\n\t\t.catch(error => {\r\n\t\t\tcallbackError(error.response)\r\n\t\t});\r\n};\r\n\r\n// -----------------------------------------------------------------------------\r\n// --------------------------------- Orders ------------------------------------\r\n// -----------------------------------------------------------------------------\r\n\r\n\r\nexport const sendOrder = (client, additional, orders, callbackSuccess, callbackError) => {\r\n\tsendRequestPOST(CONFIG.HOST + CONFIG.URLS_API.urlNewOrder, {\r\n\t\tclient,\r\n\t\tadditional,\r\n\t\torders\r\n\t}, callbackSuccess, callbackError)\r\n}\r\n\r\nexport const getProdOrders = (year, callbackSuccess, callbackError) => {\r\n\tsendRequestGET(CONFIG.HOST + CONFIG.URLS_API.urlGetProdOrders, {\r\n\t\ttype: \"prod\",\r\n\t\tyear\r\n\t}, callbackSuccess, callbackError)\r\n}\r\n\r\nexport const getControlOrders = (year, callbackSuccess, callbackError) => {\r\n\tsendRequestGET(CONFIG.HOST + CONFIG.URLS_API.urlGetControlOrders, {\r\n\t\ttype: \"control\",\r\n\t\tyear\r\n\t}, callbackSuccess, callbackError)\r\n}\r\n\r\n// -----------------------------------------------------------------------------\r\n// --------------------------------- Users -------------------------------------\r\n// -----------------------------------------------------------------------------\r\n\r\nexport const getUsers = (callbackSuccess, callbackError) => {\r\n\tsendRequestGET(CONFIG.HOST + CONFIG.URLS_API.urlGetUsers, {}, callbackSuccess, callbackError)\r\n}\r\n\r\nexport const getNumberOrder = (week, year, callbackSuccess, callbackError) => {\r\n\tsendRequestGET(CONFIG.HOST + CONFIG.URLS_API.urlNumberOrder, { week, year }, callbackSuccess, callbackError)\r\n}\r\n\r\n//------------------------------------------------------------------------------\r\n// ----------------- Registration, authorization, authitication-----------------\r\n//------------------------------------------------------------------------------\r\n\r\nexport const registration = (data, callbackSuccess, callbackError) => {\r\n\tsendRequestPOST(CONFIG.HOST + CONFIG.URLS_API.urlRegistration, data, callbackSuccess, callbackError)\r\n}\r\n\r\nexport const login = (data, callbackSuccess, callbackError) => {\r\n\tsendRequestPOST(CONFIG.HOST + CONFIG.URLS_API.urlLogin, data, callbackSuccess, callbackError)\r\n}\r\nexport const auth = (jwt, callbackSuccess, callbackError) => {\r\n\tsendRequestPOST(CONFIG.HOST + CONFIG.URLS_API.urlAuth, { jwt }, callbackSuccess, callbackError)\r\n}\r\n\r\n//------------------------------------------------------------------------------\r\n// ------------------------- API for working with TABLES -----------------------\r\n//------------------------------------------------------------------------------\r\n\r\nexport const sendDataTablesForSave = (url, data, callbackSuccess, callbackError) => {\r\n\tsendRequestPOST(CONFIG.HOST + url, { data }, callbackSuccess, callbackError)\r\n}\r\n\r\n//------------------------------------------------------------------------------\r\n// -------------------------------- API  -  USERS ------------------------------\r\n//------------------------------------------------------------------------------\r\n\r\nexport const sendDataUsersForSave = (data, callbackSuccess, callbackError) => {\r\n\tsendRequestPOST(CONFIG.HOST + CONFIG.URLS_API.urlSaveUserTable, { data }, callbackSuccess, callbackError)\r\n}\r\n\r\n//------------------------------------------------------------------------------\r\n// ------------------------------ API  -  INVOICES -----------------------------\r\n//------------------------------------------------------------------------------\r\n\r\nexport const getInvoices = (year, callbackSuccess, callbackError) => {\r\n\tsendRequestGET(CONFIG.HOST + CONFIG.URLS_API.urlGetInvoices, {\r\n\t\ttype: \"main\",\r\n\t\tyear\r\n\t}, callbackSuccess, callbackError)\r\n}\r\n\r\nexport const getInvoiceOrders = (callbackSuccess, callbackError) => {\r\n\tsendRequestGET(CONFIG.HOST + CONFIG.URLS_API.urlGetInvoices, {\r\n\t\ttype: \"prods\"\r\n\t}, callbackSuccess, callbackError)\r\n}\r\n\r\nexport const getInvoiceDOCX = (ids, callbackSuccess, callbackError) => {\r\n\tsendRequestGET(CONFIG.HOST + CONFIG.URLS_API.urlGetInvoiceDOCX, {\r\n\t\tids\r\n\t}, callbackSuccess, callbackError, true)\r\n}\r\n\r\nexport const postNewInvoiceDeliverBack = (id_fc, callbackSuccess, callbackError) => {\r\n\tsendRequestPOST(CONFIG.HOST + CONFIG.URLS_API.urlPostInvoiceDeliverBack, {\r\n\t\tid_fc\r\n\t}, callbackSuccess, callbackError)\r\n}\r\n\r\nexport const sendInvoicesChanges = (invoiceData, data, callbackSuccess, callbackError) => {\r\n\tsendRequestPOST(CONFIG.HOST + CONFIG.URLS_API.urlSendInvoiceChanges, {\r\n\t\tdata,\r\n\t\t...invoiceData\r\n\t}, callbackSuccess, callbackError)\r\n}\r\n\r\nexport const deleteInvoice = (hashes, callbackSuccess, callbackError) => {\r\n\tsendRequestPOST(CONFIG.HOST + CONFIG.URLS_API.urlDeleteIncoive, {\r\n\t\thashes\r\n\t}, callbackSuccess, callbackError)\r\n}\r\n\r\n// -----------------------------------------------------------------------------\r\n// ----------------------------- Sys Setting -----------------------------------\r\n// -----------------------------------------------------------------------------\r\n\r\nexport const getColors = (callbackSuccess, callbackError) => {\r\n\tsendRequestGET(CONFIG.HOST + CONFIG.URLS_API.urlGetColors, {}, callbackSuccess, callbackError)\r\n}\r\n\r\nexport const saveColors = (changes, callbackSuccess, callbackError) => {\r\n\tsendRequestPOST(CONFIG.HOST + CONFIG.URLS_API.urlSaveColors, {\r\n\t\tchanges\r\n\t}, callbackSuccess, callbackError)\r\n}\r\n\r\nexport const getMaterials = (callbackSuccess, callbackError) => {\r\n\tsendRequestGET(CONFIG.HOST + CONFIG.URLS_API.urlGetMaterials, {}, callbackSuccess, callbackError)\r\n}\r\n\r\nexport const saveMaterials = (changes, callbackSuccess, callbackError) => {\r\n\tsendRequestPOST(CONFIG.HOST + CONFIG.URLS_API.urlSaveMaterials, {\r\n\t\tchanges\r\n\t}, callbackSuccess, callbackError)\r\n}\r\n\r\nexport const makeBackup = (callbackSuccess, callbackError) => {\r\n\tsendRequestPOST(CONFIG.HOST + CONFIG.URLS_API.urlMakeBackup, {}, callbackSuccess, callbackError)\r\n}\r\n\r\nexport const getBackups = (callbackSuccess, callbackError) => {\r\n\tsendRequestGET(CONFIG.HOST + CONFIG.URLS_API.urlGetBackups, {}, callbackSuccess, callbackError)\r\n}\r\nexport const toBackup = (fileName, callbackSuccess, callbackError) => {\r\n\tsendRequestPOST(CONFIG.HOST + CONFIG.URLS_API.urlToBackup, { fileName }, callbackSuccess, callbackError)\r\n}","import React from \"react\"\r\nimport { NotificationManager } from \"react-notifications\"\r\nimport { Form, FloatingLabel } from \"react-bootstrap\"\r\nimport { login } from \"../api\"\r\nimport { addUser } from \"../redux/actions/users.action\"\r\nimport { connect } from \"react-redux\"\r\nimport { authUser } from \"../redux/actions/app.action\"\r\n\r\nimport \"../styles/Forms.scss\"\r\n// import { BrowserHistory } from \"react-router\"\r\n\r\nclass Login extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\r\n\t\tthis.login = React.createRef()\r\n\t\tthis.password = React.createRef()\r\n\t}\r\n\tstatic contextTypes = {\r\n\t\trouter: () => true, // replace with PropTypes.object if you use them\r\n\t }\r\n\r\n\tonLogin(e){\r\n\t\te.preventDefault()\r\n\t\tlogin({\r\n\t\t\tlogin: this.login.current.value, \r\n\t\t\tpassword: this.password.current.value\r\n\t\t}, data => {\r\n\t\t\tconsole.log(data)\r\n\t\t\tif(!data.error){\r\n\t\t\t\tlocalStorage.setItem(\"token\", data.jwt)\r\n\t\t\t\tNotificationManager.success(\"Вы авторизованы!\", \"OK\", 3000)\r\n\t\t\t\tthis.props.addUser(data.login, data.name, data.role, data.active)\r\n\t\t\t\tthis.props.authUser(true)\r\n\t\t\t\tthis.props.history.push(\"/\")\r\n\t\t\t}\r\n\t\t\telse NotificationManager.warning(\"Неверный логин или пароль\", \"Ошибка\", 3000)\r\n\t\t}, err => {\r\n\t\t\tNotificationManager.warning(\"Ошибка на сервере(\", \"Ошибка\", 3000)\r\n\t\t})\r\n\t}\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<div className=\"main\">\r\n\t\t\t\t<Form className=\"login-form\" style={{display: \"flex\", flexDirection: \"column\", width: \"400px\"}}>\r\n\t\t\t\t\t<h2>Авторизация</h2>\r\n\t\t\t\t\t<FloatingLabel controlId=\"floatingInput\" label=\"Логин\" className=\"mb-12\">\r\n\t\t\t\t\t\t<Form.Control ref={this.login} type=\"text\" placeholder=\"Иванов Иван Иванович\" name=\"login\" autoFocus/>\r\n\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t<FloatingLabel controlId=\"floatingInput\" label=\"Пароль\" className=\"mb-12\">\r\n\t\t\t\t\t\t<Form.Control ref={this.password} type=\"password\" placeholder=\"Login\" name=\"password\"/>\r\n\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t<button className=\"btn btn-primary\" onClick={this.onLogin.bind(this)}>Войти</button>\r\n\t\t\t\t</Form>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\nconst mapStateToProps = state => ({\r\n\tauth: state.app.authorization\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n\taddUser: (login,  name, role, active) => dispatch(addUser(login,  name, role, active)),\r\n\tauthUser: (auth) => dispatch(authUser(auth))\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login)","import React from \"react\"\r\nimport { NotificationManager } from \"react-notifications\"\r\nimport { Form, FloatingLabel } from \"react-bootstrap\"\r\nimport { registration } from \"../api\"\r\n\r\nimport \"../styles/Forms.scss\"\r\n\r\nclass Registration extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tvalidateLogin: null,\r\n\t\t\tvalidateName: null,\r\n\t\t\tvalidatePassword: null\r\n\t\t}\r\n\r\n\t\tthis.name = React.createRef()\r\n\t\tthis.login = React.createRef()\r\n\t\tthis.role = React.createRef()\r\n\t\tthis.password = React.createRef()\r\n\t\tthis.repeatePassword = React.createRef()\r\n\r\n\t}\r\n\r\n\tonBlurInput(e){\r\n\t\tswitch(e.target.name){\r\n\t\t\tcase \"name\": return this.setState({ validateName: !(e.target.value.length >= 3) })\r\n\t\t\tcase \"login\": return this.setState({ validateLogin: !(e.target.value.length >= 4) })\r\n\t\t\tcase \"password\": return this.setState({ validatePassword: !(e.target.value.length >= 8) })\r\n\t\t\tdefault: return;\r\n\t\t}\r\n\t}\r\n\r\n\tregistrationUser(e){\r\n\t\te.preventDefault()\r\n\t\t\r\n\t\tif(this.repeatePassword.current.value === this.password.current.value){\r\n\t\t\tconst data = {\r\n\t\t\t\tname: this.name.current.value,\r\n\t\t\t\tlogin: this.login.current.value,\r\n\t\t\t\trole: this.role.current.value,\r\n\t\t\t\tpassword: this.password.current.value,\r\n\t\t\t}\r\n\t\t\tregistration(data, _data => {\r\n\t\t\t\tif(!_data.error){\r\n\t\t\t\t\tlocalStorage.setItem(\"token\", _data.jwt)\r\n\t\t\t\t\tthis.props.history.push(\"/\")\r\n\t\t\t\t\tNotificationManager.success('Ваш аккаунт в БД! Теперь дождитесь, чтобы ваш аккаунт активировали', 'Ок!', 3000);\r\n\t\t\t\t}\r\n\t\t\t\telse NotificationManager.error('Такой логин уже существует', 'Ошибка', 3000)\r\n\t\t\t}, (err) => NotificationManager.error('Ошибка на стороне сервера!', 'Ошибка', 3000))\r\n\t\t}\r\n\t\telse\r\n\t\t\tNotificationManager.warning('Пароли не совпадают!', 'Ошибка', 3000);\r\n\t}\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<div className=\"main\">\r\n\t\t\t\t<Form className=\"registration-form\" style={{display: \"flex\", flexDirection: \"column\", width: \"400px\"}}>\r\n\r\n\t\t\t\t\t<h2>Регистрация</h2>\r\n\t\t\t\t\t<FloatingLabel hasValidate controlId=\"floatingInput\" label=\"ФИО\" className=\"mb-12\">\r\n\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\tclassName={this.state.validateName !== null? (this.state.validateName? \"is-invalid\": \"is-valid\"): \"\"} \r\n\t\t\t\t\t\t\tname=\"name\" \r\n\t\t\t\t\t\t\tref={this.name} \r\n\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\tplaceholder=\"Иванов Иван Иванович\" \r\n\t\t\t\t\t\t\tonBlur={e => this.onBlurInput(e)} \r\n\t\t\t\t\t\t\tautoFocus/>\r\n\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t<FloatingLabel controlId=\"floatingInput\" label=\"Логин\" className=\"mb-12\">\r\n\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\tclassName={this.state.validateLogin !== null? (this.state.validateLogin? \"is-invalid\": \"is-valid\"): \"\"} \r\n\t\t\t\t\t\t\tref={this.login} \r\n\t\t\t\t\t\t\tname=\"login\"\r\n\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\tplaceholder=\"Login\" \r\n\t\t\t\t\t\t\tonBlur={e => this.onBlurInput(e)}/>\r\n\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Form.Select name=\"\" id=\"\" ref={this.role}>\r\n\t\t\t\t\t\t<option value=\"3\">Пользователь</option>\r\n\t\t\t\t\t\t<option value=\"2\">Модератор</option>\r\n\t\t\t\t\t\t<option value=\"1\">Редактор</option>\r\n\t\t\t\t\t\t<option value=\"0\">Администратор</option>\r\n\t\t\t\t\t</Form.Select>\r\n\r\n\t\t\t\t\t<FloatingLabel controlId=\"floatingInput\" label=\"Пароль\" className=\"mb-12\">\r\n\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\tclassName={this.state.validatePassword !== null? (this.state.validatePassword? \"is-invalid\": \"is-valid\"): \"\"} \r\n\t\t\t\t\t\t\tref={this.password} \r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\ttype=\"password\" \r\n\t\t\t\t\t\t\tplaceholder=\"Login\" \r\n\t\t\t\t\t\t\tonBlur={e => this.onBlurInput(e)}/>\r\n\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t<FloatingLabel controlId=\"floatingInput\" label=\"Повторение пароля\" className=\"mb-12\">\r\n\t\t\t\t\t\t<Form.Control ref={this.repeatePassword} type=\"password\" placeholder=\"Иванов Иван Иванович\" />\r\n\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t<button className=\"btn btn-primary\" onClick={this.registrationUser.bind(this)}>Зарегистрироваться</button>\r\n\t\t\t\t</Form>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Registration","import React from 'react';\r\nimport { FloatingLabel, Form } from \"react-bootstrap\"\r\nimport { FaTimes } from \"react-icons/fa\"\r\n\r\nimport { getColors, getMaterials } from \"../api\"\r\n\r\nimport \"../styles/Order.scss\"\r\n\r\nclass OrderPanel extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\t// Order\r\n\t\t\tid: -1,\r\n\t\t\tname: \"\",\r\n\t\t\tcount: 1,\r\n\t\t\tprice: 0,\r\n\t\t\tallPrice: 0,\r\n\t\t\tcolors: [],\r\n\t\t\tmaterials: [],\r\n\t\t\tactive: false\r\n\t\t}\r\n\r\n\t\t// Refs for input components\r\n\t\tthis.refColor = React.createRef()\r\n\t\tthis.refMaterial = React.createRef()\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.setState({ id: this.props.id })\r\n\r\n\t\tgetMaterials(materials => {\r\n\t\t\tthis.setState({ materials: materials.data })\r\n\t\t}, (err) => {})\r\n\r\n\t\tgetColors(colors => {\r\n\t\t\tthis.setState({ colors: colors.data })\r\n\t\t}, (err) => {})\r\n\t}\r\n\r\n\t// For changing fields and recalc prices\r\n\treCalcAllPrice(current, toggler){\r\n\t\tswitch(toggler){\r\n\t\t\tcase 0:\r\n\t\t\t\treturn this.state.price * current\r\n\t\t\tcase 1:\r\n\t\t\t\treturn current * this.state.count\r\n\t\t\tdefault:\r\n\t\t\t\treturn 0\r\n\t\t}\r\n\t}\r\n\r\n\tonChangeName(e){ this.setState({ name: e.target.value, active: false }) }\r\n\tonChangeCount(e){ this.setState({ count: +e.target.value, allPrice: this.reCalcAllPrice(+e.target.value, 0), active: false }) }\r\n\tonChangeMainPrice(e){ this.setState({ price: +e.target.value, allPrice: this.reCalcAllPrice(+e.target.value, 1), active: false }) }\r\n\t\r\n\r\n\tapplyOrder(e){\r\n\t\tthis.setState({ active: true })\r\n\t\tthis.props.addOrderToArray(e, \r\n\t\t\t{\r\n\t\t\t\tid: this.state.id,\r\n\t\t\t\tname: this.state.name,\r\n\t\t\t\tcount: this.state.count,\r\n\t\t\t\tprice: this.state.price,\r\n\t\t\t\tallPrice: this.state.allPrice, \r\n\t\t\t\tcolor: this.refColor.current.value, \r\n\t\t\t\tmaterial: this.refMaterial.current.value\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<div className={`order_panel ${this.state.active? \"active\": \"noactive\"}`}>\r\n\r\n\t\t\t\t<div className=\"order_panel_close\" onClick={e => this.props.deleteOrderFromArrayById(this.state.id)}>\r\n\t\t\t\t\t<FaTimes />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<form className=\"oreder_panel_main_info\" action=\"javascript:0\">\r\n\t\t\t\t\t<span className=\"order_panel_id\">#{this.props.id + 1}</span>\r\n\t\t\t\t\t<FloatingLabel style={{width: \"40%\"}} controlId=\"floatingInput\" label=\"Наименование\" className=\"mb-12\">\r\n\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\tref={this.name} \r\n\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\tplaceholder=\"Стул\" \r\n\t\t\t\t\t\t\tonChange={this.onChangeName.bind(this)}\r\n\t\t\t\t\t\t\t// isInvalid={this.state.validatation.includes(\"name\")} \r\n\t\t\t\t\t\t\t// onBlur={e => this.validate(e)} \r\n\t\t\t\t\t\t\tminLength={3}\r\n\t\t\t\t\t\t\trequired/>\r\n\t\t\t\t\t</FloatingLabel>\r\n\r\n\t\t\t\t\t<Form.Select style={{width: \"12%\"}} ref={this.refMaterial} aria-label=\"Default select example\" className=\"order_panel_select select_material\">\r\n\t\t\t\t\t\t<option value=\"-\">Матер.</option>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.materials.map(material => {return <option value={material.material}>{material.material}</option>})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Form.Select>\r\n\r\n\t\t\t\t\t<Form.Select style={{width: \"10%\"}} ref={this.refColor} aria-label=\"Default select example\" className=\"order_panel_select select_color\">\r\n\t\t\t\t\t\t<option value=\"-\">Цвет</option>\r\n\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.colors.map(color => {return <option value={color.color}>{color.color}</option>})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Form.Select>\r\n\r\n\r\n\r\n\t\t\t\t\t<FloatingLabel style={{width: \"8%\"}} controlId=\"floatingInput\" label=\"Кол\" className=\"mb-12\">\r\n\t\t\t\t\t\t<Form.Control min={1} max={10000000} ref={this.count} type=\"number\" placeholder=\"4\" defaultValue={1} onChange={this.onChangeCount.bind(this)} required/>\r\n\t\t\t\t\t</FloatingLabel>\r\n\r\n\t\t\t\t\t<FloatingLabel style={{width: \"14%\"}} controlId=\"floatingInput\" label=\"Цена\" className=\"mb-12\">\r\n\t\t\t\t\t\t<Form.Control min={0} max={10000000} ref={this.price} type=\"number\" placeholder=\"540\" defaultValue={0} onChange={this.onChangeMainPrice.bind(this)} required/>\r\n\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t<FloatingLabel style={{width: \"14%\"}} controlId=\"floatingInput\" label=\"Сумма\" className=\"mb-12\">\r\n\t\t\t\t\t\t<Form.Control disabled ref={this.price} type=\"number\" placeholder=\"540\" value={this.state.price * this.state.count} onChange={this.onChangeMainPrice.bind(this)} required/>\r\n\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclassName=\"btn btn-primary apply_order\" \r\n\t\t\t\t\t\tonClick={this.applyOrder.bind(this)}\r\n\t\t\t\t\t>Применить\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t\t\t\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\t\r\n}\r\n\r\nexport default OrderPanel","import React from 'react';\r\nimport { FloatingLabel, Form } from \"react-bootstrap\"\r\nimport { NotificationManager } from 'react-notifications'\r\nimport { FaSortDown } from \"react-icons/fa\"\r\nimport { connect } from 'react-redux'\r\n\r\nimport OrderPanel from \"./OrderPanel\"\r\nimport { getNumberOrder, sendOrder } from \"../api\"\r\n\r\nimport \"../styles/Order.scss\"\r\n\r\nclass Order extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\r\n\t\tthis.stateOrderPanel = {\r\n\t\t\tid: 0,\r\n\t\t\tname: \"\",\r\n\t\t\tsize: \"\",\r\n\t\t\tcount: 0,\r\n\t\t\tprice: 0,\r\n\t\t\tallPrice: 0\r\n\t\t}\r\n\r\n\t\tthis.state = {\r\n\t\t\t// Components state\r\n\t\t\tadditional_info_active: false,\r\n\r\n\t\t\tnumberOrder: 0,\r\n\t\t\tadditional: {\r\n\t\t\t\tdelivery: false,\r\n\t\t\t\tassembly: false,\r\n\t\t\t\tentering: false,\r\n\t\t\t\tassemblyAndEntering: false\r\n\t\t\t},\r\n\t\t\torders: [this.stateOrderPanel],\r\n\t\t\tallPrice: 0, \r\n\t\t\tvalidatation: [\"site\"]\r\n\t\t}\r\n\r\n\t\t// for Client\r\n\t\tthis.client_name = React.createRef()\r\n\t\tthis.client_phone = React.createRef()\r\n\t\tthis.client_address = React.createRef()\r\n\r\n\t\t// for order\r\n\t\tthis.siteName = React.createRef()\r\n\t\tthis.week = React.createRef()\r\n\t\tthis.dateDelivery = React.createRef()\r\n\t\tthis.year = React.createRef()\r\n\r\n\t\t// additional info for prices \r\n\t\tthis.delivery_price = React.createRef()\r\n\t\tthis.assembly_price = React.createRef()\r\n\t\tthis.entering_price = React.createRef()\r\n\t\tthis.assemblyAndEntering_price = React.createRef()\r\n\t}\r\n\r\n\tonClickAddOrder(e){\r\n\t\tthis.setState({ orders: [...this.state.orders, this.stateOrderPanel] })\r\n\t}\r\n\r\n\t// events for components\r\n\tonClickAdditionalInfo(){\r\n\t\tthis.setState({ additional_info_active: !this.state.additional_info_active })\r\n\t}\r\n\r\n\tonChangeDelivery(e){ this.setState({ additional: {...this.state.additional, delivery: e.target.checked } }) }\r\n\tonChangeAssembly(e){ this.setState({ additional: {...this.state.additional, assembly: e.target.checked } }) }\r\n\tonChangeEntering(e){ this.setState({ additional: {...this.state.additional, entering: e.target.checked } }) }\r\n\tonChangeAssemblyAndEntering(e){ this.setState({ additional: {...this.state.additional, assemblyAndEntering: e.target.checked } }) }\r\n\r\n\t//---------------------------------------------------------------------------\r\n\t//------------------------------ORDER EVENTS--------------------------------\r\n\t//---------------------------------------------------------------------------\r\n\r\n\taddOrderToArray(e, data){\r\n\t\te.preventDefault()\r\n\t\tconsole.log(data)\r\n\t\tlet currentStateOrders = this.state.orders\r\n\t\tcurrentStateOrders[data.id] = data\r\n\t\tthis.setState({ orders: currentStateOrders, allPrice: currentStateOrders.reduce((prev, cur) => {return prev + cur.allPrice}, 0) })\r\n\t}\r\n\r\n\tdeleteOrderFromArrayById(id){\r\n\t\tif(window.confirm(\"Вы уверены? Данные для этого заказа не сохранятся.\")){\r\n\t\t\tlet currentStateOrders = this.state.orders\r\n\t\t\tcurrentStateOrders.splice(id, 1)\r\n\t\t\tthis.setState({ orders: currentStateOrders })\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\t// main method for sending order to server\r\n\tonSendThisOrder(e){\r\n\t\te.preventDefault()\r\n\t\tif(this.state.validatation.length === 0){\r\n\t\t\tconst clientData = {\r\n\t\t\t\tname: this.client_name.current.value,\r\n\t\t\t\tphone: this.client_phone.current.value,\r\n\t\t\t\taddress: this.client_address.current.value,\r\n\t\t\t}\r\n\t\t\tconst additionalData = {\r\n\t\t\t\tsiteName: this.siteName.current.value,\r\n\t\t\t\tweek: +this.week.current.value,\r\n\t\t\t\tdateDelivery: this.dateDelivery.current.value,\r\n\t\t\t\tid: this.state.numberOrder,\r\n\t\t\t\tyear: +this.year.current.value,\r\n\t\r\n\t\t\t\tdelivery: this.state.additional.delivery,\r\n\t\t\t\tassembly: this.state.additional.assembly,\r\n\t\t\t\tentering: this.state.additional.entering,\r\n\t\t\t\tassemblyAndEntering: this.state.additional.assemblyAndEntering,\r\n\t\r\n\t\t\t\tdelivery_price: this.delivery_price.current.value,\r\n\t\t\t\tassembly_price: this.assembly_price.current.value,\r\n\t\t\t\tentering_price: this.entering_price.current.value,\r\n\t\t\t\tassemblyAndEntering_price: this.assemblyAndEntering_price.current.value,\r\n\t\t\t}\r\n\t\r\n\t\t\tsendOrder(clientData, additionalData, this.state.orders, (res) => {\r\n\t\t\t\tNotificationManager.success('Данные успешно отправлены', 'OK', 3000);\r\n\t\t\t\tthis.props.history.push(\"/invoices\")\r\n\t\t\t}, (err) => NotificationManager.warning('Данные не отправились.', 'Ошибка', 3000))\r\n\t\t}\r\n\t\telse NotificationManager.error('Данные не корректны', 'Ошибка', 3000)\r\n\t}\r\n\thandleGetNumberOrder(){\r\n\t\tgetNumberOrder(this.week.current.value, this.year.current.value, (data) => {\r\n\t\t\tthis.setState({ numberOrder: data.id })\r\n\t\t}, err => {console.log(err)})\r\n\t}\r\n\tonPressWeekInput(e){\r\n\t\tif(e.key === \"Enter\"){\r\n\t\t\te.preventDefault()\r\n\t\t\tthis.handleGetNumberOrder()\r\n\t\t}\r\n\t}\r\n\r\n\tvalidate(e){\r\n\t\tconst add = (_e) => this.setState({ validatation: [...this.state.validatation, _e.target.name] })\r\n\t\tconst remove = (_e) => this.setState({ validatation: this.state.validatation.filter(item => _e.target.name !== item) })\r\n\r\n\t\tswitch(e.target.name){\r\n\t\t\tcase \"name\":\r\n\t\t\t\t!(\te.target.value.length > 3 || \r\n\t\t\t\t\te.target.value == \"-\" || \r\n\t\t\t\t\te.target.value.toLowerCase() == \"нет\"\r\n\t\t\t\t)? add(e): remove(e); return\r\n\t\t\tcase \"phone\":\r\n\t\t\t\t!(e.target.value.length > 6)? add(e): remove(e); return\r\n\t\t\tcase \"site\":\r\n\t\t\t\t!(e.target.value !== \"-\")? add(e): remove(e); return\r\n\t\t\tcase \"address\":\r\n\t\t\t\t!(\te.target.value.length > 3 || \r\n\t\t\t\t\te.target.value == \"-\" || \r\n\t\t\t\t\te.target.value.toLowerCase() == \"нет\"\r\n\t\t\t\t)? add(e): remove(e); return\r\n\t\t\tcase \"week\":\r\n\t\t\t\t!(\t+e.target.value >= 1 && +e.target.value <= 54 && !!Number(e.target.value))?\r\n\t\t\t\tadd(e): remove(e); return\r\n\t\t\t\r\n\t\t\tcase \"date_deliver\":\r\n\t\t\t\t!(\te.target.value.length > 3 || \r\n\t\t\t\t\te.target.value == \"-\" || \r\n\t\t\t\t\te.target.value.toLowerCase() == \"нет\"\r\n\t\t\t\t)? add(e): remove(e); return\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.log(\"Case don't registration\")\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tconst FLabel = _props => {\r\n\t\t\treturn (\r\n\t\t\t\t<p className={\"FLabel_line\" + (_props.mark? \" mark_bold\" : \"\")}>\r\n\t\t\t\t\t<span className=\"line_key_span\">{_props._key}</span>\r\n\t\t\t\t\t<span className=\"line_value_span\">{_props.value}</span>\r\n\t\t\t\t</p>\r\n\t\t\t)\t\r\n\t\t}\r\n\t\treturn(\r\n\t\t\t<Form className=\"Order_wrapper\" action=\"javascript:0\">\r\n\t\t\t\t<div className=\"Order\">\r\n\t\t\t\t\t<h1>Формирование нового заказа</h1>\r\n\t\t\t\t\t<h2>Информация о клиенте</h2>\r\n\t\t\t\t\t<div className=\"top_panel\">\r\n\t\t\t\t\t\t<div className=\"order_form_user\">\r\n\t\t\t\t\t\t\t<FloatingLabel hasValidation controlId=\"floatingInput\" label=\"ФИО клиента\" className=\"mb-12\">\r\n\t\t\t\t\t\t\t\t\t<Form.Control isInvalid={this.state.validatation.includes(\"name\")} autoFocus\r\n\t\t\t\t\t\t\t\t\t\tref={this.client_name} \r\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Иванов Иван Иванович\"\r\n\t\t\t\t\t\t\t\t\t\tonBlur={e => this.validate(e)}\r\n\t\t\t\t\t\t\t\t\t\ttitle=\"Впишите '-' или 'нет', чтобы не вписывать информацию\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FloatingLabel>\r\n\r\n\t\t\t\t\t\t\t<FloatingLabel hasValidation controlId=\"floatingInput\" label=\"Телефон\" className=\"mb-12\">\r\n\t\t\t\t\t\t\t\t<Form.Control required isInvalid={this.state.validatation.includes(\"phone\")}\r\n\t\t\t\t\t\t\t\t\t\tref={this.client_phone} \r\n\t\t\t\t\t\t\t\t\t\tname=\"phone\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"tel\" \r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"8 123 456 78 90\"\r\n\t\t\t\t\t\t\t\t\t\tonBlur={e => this.validate(e)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FloatingLabel>\r\n\r\n\t\t\t\t\t\t\t<FloatingLabel hasValidation controlId=\"floatingInput\" label=\"Адрес\" className=\"mb-12\">\r\n\t\t\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\t\t\tisInvalid={this.state.validatation.includes(\"address\")} \r\n\t\t\t\t\t\t\t\t\tonBlur={e => this.validate(e)} \r\n\t\t\t\t\t\t\t\t\tref={this.client_address} \r\n\t\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\t\tname=\"address\"\r\n\t\t\t\t\t\t\t\t\ttitle=\"Впишите '-' или 'нет', чтобы не вписывать информацию\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"г. Муром, ул. Ленина, 19, кв. 9\"/>\r\n\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"order_form_additional\">\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<Form.Select name=\"site\" isInvalid={this.state.validatation.includes(\"site\")} onBlur={e => this.validate(e)} ref={this.siteName} aria-label=\"Default select example\" className=\"select_site\">\r\n\t\t\t\t\t\t\t\t<option value=\"-\">Выберете сайт</option>\r\n\t\t\t\t\t\t\t\t<option value=\"Krovati-spalni.ru\">Krovati-spalni.ru</option>\r\n\t\t\t\t\t\t\t\t<option value=\"мебельизсосны.рф\">мебельизсосны.рф</option>\r\n\t\t\t\t\t\t\t\t<option value=\"Liman-murom.ru\">Liman-murom.ru</option>\r\n\t\t\t\t\t\t\t</Form.Select>\r\n\t\t\t\t\t\t\t<div className=\"within\">\r\n\t\t\t\t\t\t\t\t<Form.Select ref={this.year} aria-label=\"year\" className=\"select_year\">\r\n\t\t\t\t\t\t\t\t\t<option>Год</option>\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t[...Array(new Date().getFullYear() - 2021 + 2).keys()].map(i => i + 2021).map(year => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn <option value={year} selected={year == new Date().getFullYear()}>{year}</option>\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</Form.Select>\r\n\t\t\t\t\t\t\t\t<FloatingLabel controlId=\"floatingInput\" label=\"№ недели\" className=\"mb-12\">\r\n\t\t\t\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\t\t\t\tisInvalid={this.state.validatation.includes(\"week\")} \r\n\t\t\t\t\t\t\t\t\t\tonBlur={e => this.validate(e)}\r\n\t\t\t\t\t\t\t\t\t\tname=\"week\"\r\n\t\t\t\t\t\t\t\t\t\tref={this.week} \r\n\t\t\t\t\t\t\t\t\t\tclassName=\"within_input\" \r\n\t\t\t\t\t\t\t\t\t\ttype=\"number\" \r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"33\" \r\n\t\t\t\t\t\t\t\t\t\tonKeyDown={this.onPressWeekInput.bind(this)} required/>\r\n\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t<button onClick={this.handleGetNumberOrder.bind(this)} className=\"apply_order_number active btn btn-primary\"> {'>'} №</button>\r\n\t\t\t\t\t\t\t\t<FloatingLabel controlId=\"floatingInput\" label=\"№ заказа\" className=\"mb-12\">\r\n\t\t\t\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.numberOrder} \r\n\t\t\t\t\t\t\t\t\t\tclassName=\"within_input\" \r\n\t\t\t\t\t\t\t\t\t\tdisabled \r\n\t\t\t\t\t\t\t\t\t\ttype=\"number\" \r\n\t\t\t\t\t\t\t\t\t\ttitle=\"Впишите № недели и нажмите на Enter\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"34\"/>\r\n\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<FloatingLabel hasValidation controlId=\"floatingInput\" label=\"Дата доставки\" className=\"mb-12\">\r\n\t\t\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\t\t\tisInvalid={this.state.validatation.includes(\"date_deliver\")} \r\n\t\t\t\t\t\t\t\t\tonBlur={e => this.validate(e)} \r\n\t\t\t\t\t\t\t\t\tref={this.dateDelivery} \r\n\t\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\t\tname=\"date_deliver\"\r\n\t\t\t\t\t\t\t\t\ttitle=\"Впишите '-' или 'нет', чтобы не вписывать информацию\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"34.4.2032\"/>\r\n\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<h2>Заказы</h2>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.orders.map((order, i) => {\r\n\t\t\t\t\t\t\treturn <OrderPanel id={i} deleteOrderFromArrayById={this.deleteOrderFromArrayById.bind(this)} addOrderToArray={this.addOrderToArray.bind(this)}/>\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t<button onClick={this.onClickAddOrder.bind(this)} className=\"btn btn-primary button_add_order\">Добавить заказ</button>\r\n\t\t\t\t\t<p className=\"dfrowaic\" style={{cursor: \"pointer\", marginTop: \"10px\"}} onClick={this.onClickAdditionalInfo.bind(this)}>\r\n\t\t\t\t\t\tДополнительно {!this.state.additional_info_active? <FaSortDown />: <>:</>}\r\n\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t<div className=\"additional_info\" style={{display: this.state.additional_info_active? \"block\": \"none\"}}>\r\n\t\t\t\t\t\t<Form.Check type=\"checkbox\" id={`delivery`}\r\n\t\t\t\t\t\t\t// label={<span>Доставка<span className=\"price_grey\"><input ref={this.delivery_price} type=\"number\" pattern=\"[0-9]{5}\"/> руб</span></span>}\r\n\t\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<span>Доставка</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"price_grey\">\r\n\t\t\t\t\t\t\t\t\t\t<input className=\"form-control\" min={0} max={1000000} ref={this.delivery_price} type=\"number\"/> \r\n\t\t\t\t\t\t\t\t\tруб</span>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonChange={this.onChangeDelivery.bind(this)}/>\r\n\r\n\t\t\t\t\t\t<Form.Check type=\"checkbox\" id={`assembly`} \r\n\t\t\t\t\t\t\t// label={<span>Сборка<span className=\"price_grey\"> <input ref={this.assembly_price} type=\"number\"/> руб</span></span>}\r\n\t\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<span>Сборка</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"price_grey\">\r\n\t\t\t\t\t\t\t\t\t\t<input className=\"form-control\" min={0} max={1000000} ref={this.assembly_price} type=\"number\"/> \r\n\t\t\t\t\t\t\t\t\tруб</span>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonChange={this.onChangeAssembly.bind(this)}/>\r\n\r\n\t\t\t\t\t\t<Form.Check type=\"checkbox\" id={`entering`}\r\n\t\t\t\t\t\t\t// label={<span>Занос<span className=\"price_grey\"><input ref={this.entering_price} type=\"number\"/> руб</span></span>}\r\n\t\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<span>Занос</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"price_grey\">\r\n\t\t\t\t\t\t\t\t\t\t<input className=\"form-control\" min={0} max={1000000} ref={this.entering_price} type=\"number\"/> \r\n\t\t\t\t\t\t\t\t\tруб</span>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonChange={this.onChangeEntering.bind(this)}/>\r\n\r\n\t\t\t\t\t\t<Form.Check type=\"checkbox\" id={`assemblyAndEntering`}\r\n\t\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<span>Сбор/Занос</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"price_grey\">\r\n\t\t\t\t\t\t\t\t\t\t<input className=\"form-control\" min={0} max={1000000} ref={this.assemblyAndEntering_price} type=\"number\"/> \r\n\t\t\t\t\t\t\t\t\tруб</span>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonChange={this.onChangeAssemblyAndEntering.bind(this)}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<hr />\r\n\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.orders.map(order => {\r\n\t\t\t\t\t\t\treturn <FLabel _key={`Заказ #${order.id + 1}`} value={`${order.allPrice} руб`} />\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t<FLabel mark={true} _key=\"Итог\" value={`${this.state.allPrice} руб`} />\r\n\t\t\t\t\t<button className=\"btn btn-success button_send_order\" onClick={this.onSendThisOrder.bind(this)}>Отправить заказ</button>\r\n\t\t\t\t</div>\r\n\t\t\t</Form>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tprices: state.prices\r\n})\r\n\r\nexport default connect(mapStateToProps, null)(Order)","import React from \"react\"\r\nimport { connect } from \"react-redux\"\r\nimport { Form } from \"react-bootstrap\"\r\nimport BootstrapTable from 'react-bootstrap-table-next';\r\nimport filterFactory, { textFilter, selectFilter } from 'react-bootstrap-table2-filter';\r\nimport cellEditFactory, { Type }  from 'react-bootstrap-table2-editor'\r\nimport paginationFactory from 'react-bootstrap-table2-paginator'\r\nimport ReactHTMLTableToExcel from 'react-html-table-to-excel'\r\n\r\nimport { getControlOrders, getProdOrders, getColors, getMaterials } from \"../api\"\r\nimport { saveDataFromTables, editCell } from \"../redux/actions/tables.action\";\r\n// import \"bootstrap/dist/css/bootstrap.min.css\";\r\n// import \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\"\r\n\r\n\r\nimport \"../styles/Tables.scss\"\r\n\r\n\r\nclass Tables extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tdata: [],\r\n\t\t\ttitle: \"Таблица для производства\",\r\n\t\t\ttableName: \"prod\",\r\n\t\t\texelTableData: [],\r\n\t\t\tyear: new Date().getFullYear(),\r\n\t\t\tcolors: [],\r\n\t\t\tmaterials: []\r\n\t\t}\r\n\t\tfunction priceFormatterColor(cell, row) {\r\n\t\t\tswitch(row.status){\r\n\t\t\t\tcase \"В работе\":\r\n\t\t\t\t\treturn <span>\r\n\t\t\t\t\t\t\t<strong style={ { color: 'blue' } }>{ cell }</strong>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\tcase \"Отказ\":\r\n\t\t\t\t\treturn <span>\r\n\t\t\t\t\t\t\t<strong style={ { color: 'red' } }>{ cell }</strong>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\tcase \"Оплачен\":\r\n\t\t\t\t\treturn <span>\r\n\t\t\t\t\t\t\t<strong style={ { color: 'green' } }>{ cell }</strong>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn cell\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst checkNumber = (num) => {\r\n\t\t\tconsole.log(num)\r\n\t\t\tif(!Number(num) || isNaN(num))\r\n\t\t\t\treturn {\r\n\t\t\t\t\tvalid: false,\r\n\t\t\t\t\tmessage: \"Введите число\"\r\n\t\t\t\t}\r\n\t\t\telse if(+num > 1000000)\r\n\t\t\t\treturn {\r\n\t\t\t\t\tvalid: false,\r\n\t\t\t\t\tmessage: \"Вы ввели слишком большое число\"\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\treturn true\r\n\r\n\t\t}\r\n\r\n\t\tthis.prodColumns = (materials, colors) => [\r\n\t\t\t{\r\n\t\t\t\ttext: '№ недели',\r\n\t\t\t\tdataField: 'week',\r\n\t\t\t\tsort: true,\r\n\t\t\t\tfilter: textFilter(),\r\n\t\t\t\tvalidator: (newValue, row, column) => { return checkNumber(newValue) },\r\n\t\t\t\theaderStyle: (colum, colIndex) => { return { width: '7%'} }\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: '№ заказа',\r\n\t\t\t\tdataField: 'id_fc',\r\n\t\t\t\teditable: false, // If my client will want this\r\n\t\t\t\tsort: true,\r\n\t\t\t\tfilter: textFilter(),\r\n\t\t\t\tvalidator: (newValue, row, column) => { return checkNumber(newValue) },\r\n\t\t\t\theaderStyle: (colum, colIndex) => { return { width: '8%'} }\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Название',\r\n\t\t\t\tdataField: 'name',\r\n\t\t\t\tfilter: textFilter(),\r\n\t\t\t\theaderStyle: (colum, colIndex) => { return { width: '35%'} }\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Материал',\r\n\t\t\t\tdataField: 'material',\r\n\t\t\t\t// sort: true,\r\n\t\t\t\tfilter: selectFilter({ options: materials.reduce((prev, curr) => { return {...prev, [curr.material]: curr.material} }, {}) }),\r\n\t\t\t\teditor: {\r\n\t\t\t\t\ttype: Type.SELECT,\r\n\t\t\t\t\toptions: [{\r\n\t\t\t\t\t\tvalue: '-',\r\n\t\t\t\t\t\tlabel: 'НЕТ'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t...materials.reduce((prev, curr) => { return [...prev, { label: curr.material, value: curr.material }] }, [])\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\theaderStyle: (colum, colIndex) => { return { width: '10%'} }\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Цвет',\r\n\t\t\t\tdataField: 'color',\r\n\t\t\t\tfilter: textFilter(),\r\n\t\t\t\teditor: {\r\n\t\t\t\t\ttype: Type.SELECT,\r\n\t\t\t\t\toptions: [{\r\n\t\t\t\t\t\tvalue: '-',\r\n\t\t\t\t\t\tlabel: 'НЕТ'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t...colors.reduce((prev, curr) => { return [...prev, { label: curr.color, value: curr.color }] }, [])\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\theaderStyle: (colum, colIndex) => { return { width: '12%'} }\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Кол-во',\r\n\t\t\t\tdataField: 'count',\r\n\t\t\t\tvalidator: (newValue, row, column) => {checkNumber(newValue)},\r\n\t\t\t\theaderStyle: (colum, colIndex) => { return { width: '9%'} }\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Статус',\r\n\t\t\t\tdataField: 'status',\r\n\t\t\t\tformatter: priceFormatterColor,\r\n\t\t\t\tfilter: selectFilter({ options: {\"В работе\": \"В работе\", \"Отказ\": \"Отказ\", \"Оплачен\": \"Оплачен\"} }),\r\n\t\t\t\teditor: {\r\n\t\t\t\t\ttype: Type.SELECT,\r\n\t\t\t\t\toptions: [{\r\n\t\t\t\t\t  value: 'В работе',\r\n\t\t\t\t\t  label: 'В работе'\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t  value: 'Оплачен',\r\n\t\t\t\t\t  label: 'Оплачен'\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t  value: 'Отказ',\r\n\t\t\t\t\t  label: 'Отказ'\r\n\t\t\t\t\t}]\r\n\t\t\t\t }\r\n\t\t\t},\r\n\t\t]\r\n\r\n\t\tthis.controlColumns = [\r\n\t\t\t{\r\n\t\t\t\ttext: '№ нед.',\r\n\t\t\t\tdataField: 'week',\r\n\t\t\t\tsort: true,\r\n\t\t\t\tfilter: textFilter(),\r\n\t\t\t\tvalidator: (newValue, row, column) => { return checkNumber(newValue) },\r\n\t\t\t\theaderStyle: (colum, colIndex) => { return { width: '8%'} }\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: '№ зак.',\r\n\t\t\t\tdataField: 'id_fc',\r\n\t\t\t\teditable: false,\r\n\t\t\t\tsort: true,\r\n\t\t\t\tfilter: textFilter(),\r\n\t\t\t\tvalidator: (newValue, row, column) => {checkNumber(newValue)},\r\n\t\t\t\theaderStyle: (colum, colIndex) => { return { width: '8%'} }\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Сайт',\r\n\t\t\t\tdataField: 'site_name',\r\n\t\t\t\tfilter: selectFilter({ options: {\"Krovati-spalni.ru\": \"Krovati-spalni.ru\", \"мебельизсосны.рф\": \"мебельизсосны.рф\", \"Liman-murom.ru\": \"Liman-murom.ru\"} }),\r\n\t\t\t\theaderStyle: (colum, colIndex) => { return { width: '15%'} },\r\n\t\t\t\teditor: {\r\n\t\t\t\t\ttype: Type.SELECT,\r\n\t\t\t\t\toptions: [{\r\n\t\t\t\t\t  value: '-',\r\n\t\t\t\t\t  label: 'НЕТ'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalue: 'Krovati-spalni.ru',\r\n\t\t\t\t\t\tlabel: 'Krovati-spalni.ru'\r\n\t\t\t\t\t }, {\r\n\t\t\t\t\t  value: 'мебельизсосны.рф',\r\n\t\t\t\t\t  label: 'мебельизсосны.рф'\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t  value: 'Liman-murom.ru',\r\n\t\t\t\t\t  label: 'Liman-murom.ru'\r\n\t\t\t\t\t}]\r\n\t\t\t\t }\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'ФИО',\r\n\t\t\t\tdataField: 'client_name',\r\n\t\t\t\tfilter: textFilter(),\r\n\t\t\t\theaderStyle: (colum, colIndex) => { return { width: '15%'} }\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Телефон',\r\n\t\t\t\tfilter: textFilter(),\r\n\t\t\t\tdataField: 'client_phone',\r\n\t\t\t\theaderStyle: (colum, colIndex) => { return { width: '15%'} }\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Адрес',\r\n\t\t\t\tfilter: textFilter(),\r\n\t\t\t\tdataField: 'client_address',\r\n\t\t\t\theaderStyle: (colum, colIndex) => { return { width: '15%'} }\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Сто-ть',\r\n\t\t\t\tdataField: 'price',\r\n\t\t\t\tformatter: (cell, row) => `${cell}₽`,\r\n\t\t\t\theaderStyle: (colum, colIndex) => { return { width: '8%'} },\r\n\t\t\t\tvalidator: (newValue, row, column) => { return checkNumber(newValue) }\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Статус',\r\n\t\t\t\tdataField: 'status',\r\n\t\t\t\tformatter: priceFormatterColor,\r\n\t\t\t\tfilter: selectFilter({ options: {\"В работе\": \"В работе\", \"Отказ\": \"Отказ\", \"Оплачен\": \"Оплачен\"} }),\r\n\t\t\t\teditor: {\r\n\t\t\t\t\ttype: Type.SELECT,\r\n\t\t\t\t\toptions: [{\r\n\t\t\t\t\t  value: 'В работе',\r\n\t\t\t\t\t  label: 'В работе'\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t  value: 'Оплачен',\r\n\t\t\t\t\t  label: 'Оплачен'\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t  value: 'Отказ',\r\n\t\t\t\t\t  label: 'Отказ'\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\theaderStyle: (colum, colIndex) => { return { width: '8%'} }\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Отдали',\r\n\t\t\t\tdataField: 'paid',\r\n\t\t\t\tformatter: (cell, row) => `${cell}₽`,\r\n\t\t\t\theaderStyle: (colum, colIndex) => { return { width: '8%'} },\r\n\t\t\t\tvalidator: (newValue, row, column) => { return checkNumber(newValue) }\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Долг',\r\n\t\t\t\tdataField: 'debt',\r\n\t\t\t\t// validator: (newValue, row, column) => { return checkNumber(newValue) },\r\n\t\t\t\theaderStyle: (colum, colIndex) => { return { width: '6%'} }\r\n\t\t\t},\r\n\t\t]\r\n\r\n\t\tthis.defaultSorted = [\r\n\t\t\t{\r\n\t\t\t  dataField: \"id_fc\",\r\n\t\t\t  order: \"desc\"\r\n\t\t\t}\r\n\t\t ];\r\n\t}\r\n\tonSelectForExelTable(row, isSelect, rowIndex){\r\n\t\tif(isSelect)\r\n\t\t\tthis.setState({ exelTableData: [...this.state.exelTableData, row] })\r\n\t\telse\r\n\t\t\tthis.setState({ exelTableData: [...this.state.exelTableData.filter(item => item.id !== row.id)] })\r\n\t}\r\n\r\n\tonSelectAllForExelTable(isSelect, rows){\r\n\t\tif(isSelect)\r\n\t\t\trows.map(row => this.setState({ exelTableData: [...rows] }))\r\n\t\telse\r\n\t\tthis.setState({ exelTableData: [] })\r\n\t}\r\n\r\n\tselectYearAndReloadData(e){\r\n\t\tthis.setState({ year: +e.target.value })\r\n\t\tthis.updateOrders(this.state.tableName, +e.target.value)\r\n\t}\r\n\r\n\tupdateOrders(tableName, year){\r\n\t\tswitch(tableName){\r\n\t\t\tcase \"prod\":\r\n\t\t\t\tgetProdOrders(year, (res) => {\r\n\t\t\t\t\tthis.setState({ data: res.data.reverse() })\r\n\t\t\t\t}, (err) => console.error(err))\r\n\t\t\t\tbreak\r\n\t\t\tcase \"control\":\r\n\t\t\t\tgetControlOrders(year, (res) => {\r\n\t\t\t\t\tthis.setState({ data: res.data.reverse(), title: \"Таблица для отслеживания заказов\" })\r\n\t\t\t\t}, (err) => console.error(err))\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.log(\"error\")\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tconst tableName = this.props.location.pathname === \"/tables/prod\"? \"prod\": \"control\"\r\n\t\tthis.updateOrders(tableName, this.state.year)\r\n\t\tthis.setState({ tableName, title: tableName === \"control\"? \"Таблица для отслеживания заказов\": this.state.title })\r\n\t\tgetMaterials(materials => {\r\n\t\t\tthis.setState({ materials: materials.data })\r\n\t\t}, (err) => {})\r\n\t\tgetColors(colors => {\r\n\t\t\tthis.setState({ colors: colors.data })\r\n\t\t}, (err) => {})\r\n\t}\r\n\r\n\trender(){\r\n\t\tconst optionsPagination = {\r\n\t\t\tsizePerPageList: [\r\n\t\t\t\t{ text: '10', value: 10 },\r\n\t\t\t\t{ text: '20', value: 20 },\r\n\t\t\t\t{ text: '30', value: 30 },\r\n\t\t\t\t{ text: '40', value: 40 },\r\n\t\t\t\t{ text: '50', value: 50, selected: true },\r\n\t\t\t\t{ text: 'Все', value: this.state.data.length }\r\n\t\t\t], // A numeric array is also available. the purpose of above example is custom the text\r\n\t\t\tsizePerPage: 50\r\n\t\t}\r\n\t\treturn(\r\n\t\t\t<div className=\"table-wrapper\">\r\n\t\t\t\t<h1 style={{textAlign: \"center\", fontFamily: \"RobotoBold\", fontSize: \"1.5em\", marginBottom: \"20px\"}}>{this.state.title}</h1>\r\n\r\n\t\t\t\t{/* Select for year */}\r\n\t\t\t\t<Form.Select className=\"header-selects header-selects-year\" aria-label=\"Выберете год\" onChange={e => this.selectYearAndReloadData(e)}>\r\n\t\t\t\t\t<option>Год</option>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t[...Array(new Date().getFullYear() - 2021 + 2).keys()].map(i => i + 2021).map(year => {\r\n\t\t\t\t\t\t\treturn <option value={year} selected={year == new Date().getFullYear()}>{year}</option>\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</Form.Select>\r\n\r\n\t\t\t\t<BootstrapTable striped hover condensed bordered\r\n\t\t\t\t\tbootstrap4\r\n\t\t\t\t\tkeyField='id'\r\n\t\t\t\t\tdata={ this.state.data } \r\n\t\t\t\t\tcolumns={ this.props.location.pathname === \"/tables/prod\"? this.prodColumns(this.state.materials, this.state.colors): this.controlColumns } \r\n\t\t\t\t\tcellEdit={\r\n\t\t\t\t\t\tcellEditFactory({\r\n\t\t\t\t\t\t\tmode: 'dbclick',\r\n\t\t\t\t\t\t\tafterSaveCell: (oldValue, newValue, row, column) => { this.props.editCellFromRedux(row.id, column.dataField, newValue) }\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfilter={ filterFactory({}) }\r\n\t\t\t\t\tfilterPosition=\"top\"\r\n\t\t\t\t\tselectRow={{\r\n\t\t\t\t\t\tmode: 'checkbox',\r\n\t\t\t\t\t\tclickToSelect: true,\r\n\t\t\t\t\t\tclickToEdit: true,  // Click to edit cell also\r\n\t\t\t\t\t\tonSelect: (row, isSelect, rowIndex, e) => { this.onSelectForExelTable(row, isSelect, rowIndex) },\r\n\t\t\t\t\t\tonSelectAll: (isSelect, rows) => { this.onSelectAllForExelTable(isSelect, rows) }\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tdefaultSorted={this.defaultSorted}\r\n\t\t\t\t\tpagination={ paginationFactory(optionsPagination) } // Footer for pages and view count item in pages\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t{/* for normal export to exel file */}\r\n\t\t\t\t\t<table style={{display: \"none\"}} id=\"table-to-xls\">\r\n\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.state.tableName == \"prod\" && this.prodColumns(this.state.materials, this.state.colors).map(thData => {\r\n\t\t\t\t\t\t\t\t\t\treturn <th>{thData.text}</th>\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.state.tableName == \"control\" && this.controlColumns.map(thData => {\r\n\t\t\t\t\t\t\t\t\t\treturn <th>{thData.text}</th>\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.exelTableData.map(row => {\r\n\t\t\t\t\t\t\t\t\treturn <tr key={row.id}>\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tthis.state.tableName === \"prod\" && this.prodColumns(this.state.materials, this.state.colors).map(col => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn <th>{row[col.dataField]}</th>\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tthis.state.tableName === \"control\" && this.controlColumns.map(col => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn <th>{row[col.dataField]}</th>\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table>\r\n\t\r\n\t\t\t\t\t{/* ---------------------- Control Panel -------------------- */}\r\n\t\t\t\t\t<p className=\"footer-table\">\r\n\t\t\t\t\t\t<button className=\"btn btn-success\" onClick={e => this.props.location.pathname === \"/tables/prod\"? this.props.save(\"/save_data/prod\", \"POST\"): this.props.save(\"/save_data/control\", \"POST\")}>Сохранить</button>\r\n\t\t\t\t\t\t<ReactHTMLTableToExcel\r\n\t\t\t\t\t\t\tid=\"test-table-xls-button\"\r\n\t\t\t\t\t\t\tclassName={`btn btn-primary ${this.state.exelTableData.length === 0? \"disabled\": \"\"} download-table-xls-button`}\r\n\t\t\t\t\t\t\ttable=\"table-to-xls\"\r\n\t\t\t\t\t\t\tfilename={\"table_\" + this.state.tableName}\r\n\t\t\t\t\t\t\tsheet=\"tablexls\"\r\n\t\t\t\t\t\t\tbuttonText=\"Сохранить в XLS\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n\teditCellFromRedux: (row, col, value) => dispatch(editCell(row, col, value)),\r\n\tsave: (method, url) => dispatch(saveDataFromTables(method, url))\r\n })\r\n \r\nexport default connect(null, mapDispatchToProps)(Tables)","import { TABLES } from \"../types\"\r\n\r\nexport const editCell = (id, col, value) => ({\r\n\ttype: TABLES.EDIT_CELL,\r\n\tpayload: {\r\n\t\ttype: \"CHANGE\",\r\n\t\tpayload: {\r\n\t\t\tid,\r\n\t\t\tcol,\r\n\t\t\tvalue\r\n\t\t}\r\n\t\t\r\n\t}\r\n})\r\n\r\nexport const saveDataFromTables = (url, method) => ({\r\n\ttype: TABLES.SAVE_DATA,\r\n\tpayload: {url, method}\r\n})","import React from \"react\"\r\nimport { NotificationManager } from \"react-notifications\"\r\nimport BootstrapTable from 'react-bootstrap-table-next';\r\nimport cellEditFactory from 'react-bootstrap-table2-editor'\r\nimport paginationFactory from 'react-bootstrap-table2-paginator'\r\n\r\n\r\n\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\"\r\n\r\n\r\nexport default class UniversalTable extends React.Component{\r\n\tconstructor(props){\r\n\t\t// Props:\r\n\t\t// \t_______________________________Data_________________________________\r\n\t\t// \t+ columns (array of objects)\t\t\t\t\t\t\t| columns\r\n\t\t// \t+ title in head table\t\t\t\t\t\t\t\t\t| title?\r\n\t\t// \t______________________________Methods_______________________________\r\n\t\t// \t+ method for getting data from API (API-func)\t| getDataFromAPI\r\n\t\t// \t+ save method (API-func)\t\t\t\t\t\t\t\t| saveDataToAPI\r\n\t\t// \t______________________________Options_______________________________\r\n\t\t// \t+ pagination\t\t\t\t\t\t\t\t\t\t\t\t| optPagination\r\n\t\t// \t+ enableNewRow\t\t\t\t\t\t\t\t\t\t\t\t| enableNewRow?\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tdata: [], // data must correspond with column\r\n\t\t\tchanges: [], // change { type: \"CHANGE\" | \"DELETE\" | \"NEW_ROW\", payload: { id, col?, value?, typeValue } }\r\n\t\t\tselectedRows: [], // this state for delete function\r\n\t\t}\r\n\t}\r\n\r\n\teditCell(oldValue, newValue, row, column){\r\n\t\t// check with contains change in stack invoices' changes\r\n\t\tconst newChange = {\r\n\t\t\ttype: \"CHANGE\",\r\n\t\t\tpayload: {\r\n\t\t\t\tid: row.id,\r\n\t\t\t\tcol: column.dataField,\r\n\t\t\t\tvalue: newValue\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet containsIndex = -1\r\n\t\tthis.state.changes.map((change, index) => {\r\n\t\t\tif(change.type === \"CHANGE\" &&\r\n\t\t\t\tchange.payload.col === newChange.payload.col && \r\n\t\t\t\tchange.payload.id === newChange.payload.id)\r\n\t\t\t\t\treturn (containsIndex = index)\r\n\t\t})\r\n\r\n\t\tif(~containsIndex === 0)\r\n\t\t\tthis.setState({ changes: [ ...this.state.changes, newChange ] })\r\n\t\telse\r\n\t\t\tthis.setState({ \r\n\t\t\t\tchanges: this.state.changes.reduce(\r\n\t\t\t\t\t(prev, curr, index) => { \r\n\t\t\t\t\t\treturn index !== containsIndex? [...prev, curr]: [...prev, newChange]\r\n\t\t\t\t\t},[])\r\n\t\t\t})\r\n\t\t\r\n\t}\r\n\r\n\tselectRow(row, isSelect, rowIndex, e){\r\n\t\tisSelect?\r\n\t\t\tthis.setState({ selectedRows: [...this.state.selectedRows, row] }):\r\n\t\t\tthis.setState({ selectedRows: this.state.selectedRows.filter(selRow => selRow.id !== row.id) })\r\n\t}\r\n\r\n\tselectAllRows(isSelect, rows){\r\n\t\tisSelect?\r\n\t\t\tthis.setState({ selectedRows: rows }):\r\n\t\t\tthis.setState({ selectedRows: [] })\r\n\t}\r\n\r\n\t// Actions\r\n\tnewRow(){\r\n\t\tthis.setState({\r\n\t\t\tdata: [this.props.columns.reduce((prev, curr) => {\r\n\t\t\t\treturn {...prev, [curr.dataField !== \"id\" && curr.dataField]: null}\r\n\t\t\t}, { id: (this.state.data[0] && this.state.data[0].id || 0) + 1}), ...this.state.data],\r\n\t\t\tchanges: [...this.state.changes, {\r\n\t\t\t\ttype: \"NEW_ROW\",\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tid: (this.state.data[0] && this.state.data[0].id || 0) + 1\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\t})\r\n\t}\r\n\r\n\tdeleteRows(){\r\n\t\tif(window.confirm(\"Вы уверены? Данные данной строки будут удалены.\")){\r\n\t\t\tconst ids = this.state.selectedRows.reduce((prev, curr) => { return [...prev, curr.id] }, [])\r\n\t\t\tthis.setState({\r\n\t\t\t\tdata: this.state.data.filter(row => !ids.includes(row.id)),\r\n\t\t\t\tchanges: [...this.state.changes, {\r\n\t\t\t\t\ttype: \"DELETE_ROW\",\r\n\t\t\t\t\tpayload: { ids }\r\n\t\t\t\t}]\r\n\t\t\t})\r\n\t\t\tNotificationManager.info(\"Не забудьте сохранить изменения\", \"Инфо\", 2000)\r\n\t\t}\r\n\t}\r\n\r\n\tsave(e){\r\n\t\tthis.props.saveDataToAPI(this.state.changes, (res) => {\r\n\t\t\tif(!res.error){\r\n\t\t\t\tNotificationManager.success(\"Данные успешно отправлены!\", \"ОК\", 3000)\r\n\t\t\t\tthis.setState({ changes: [] })\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tNotificationManager.warning(\"Данные не отправились\", \"Ошибка\", 3000)\r\n\t\t}, err => NotificationManager.error(\"Ошибка на стороне сервера\", \"Ошибка\", 3000))\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.props.getDataFromAPI(\r\n\t\t\t(res) => this.setState({ data: res.data.reverse() }),\r\n\t\t\terr => NotificationManager.warning(\"Не удалось получить данные от сервера\", \"Ошибка\", 3000)\r\n\t\t)\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<div className={`universal__table_panel ${this.props.className}`}>\r\n\t\t\t\t{ this.props.title !== undefined && <h2 className=\"universal__table_panel_title\">{this.props.title}</h2> }\r\n\r\n\r\n\t\t\t\t<BootstrapTable striped hover condensed bordered bootstrap4\r\n\t\t\t\t\tkeyField='id'\r\n\t\t\t\t\tdata={ this.state.data } \r\n\t\t\t\t\tcolumns={ this.props.columns } \r\n\t\t\t\t\tcellEdit={\r\n\t\t\t\t\t\tcellEditFactory({\r\n\t\t\t\t\t\t\tmode: 'dbclick',\r\n\t\t\t\t\t\t\tafterSaveCell: (oldValue, newValue, row, column) => { this.editCell(oldValue, newValue, row, column) }\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tselectRow={{\r\n\t\t\t\t\t\tmode: 'checkbox',\r\n\t\t\t\t\t\tclickToSelect: true,\r\n\t\t\t\t\t\tclickToEdit: true,  // Click to edit cell also\r\n\t\t\t\t\t\tonSelect: (row, isSelect, rowIndex, e) => { this.selectRow(row, isSelect, rowIndex) },\r\n\t\t\t\t\t\tonSelectAll: (isSelect, rows) => { this.selectAllRows(isSelect, rows) }\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tdefaultSorted={[ { dataField: \"id\",order: \"desc\" } ]}\r\n\t\t\t\t\tpagination={ this.props.optPagination && paginationFactory() } // Footer for pages and view count item in pages\r\n\t\t\t\t\t/>\r\n\r\n\r\n\t\t\t\t<div className=\"panel_bottom\">\r\n\t\t\t\t\t<button className=\"btn btn-danger\" onClick={e => this.deleteRows()}>Удалить</button>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.props.enableNewRow !== undefined && this.props.enableNewRow && \r\n\t\t\t\t\t\t\t<button className=\"btn btn-success\" onClick={e => this.newRow()}>Новая строка</button>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<button className=\"btn btn-primary\" onClick={e => this.save(e)}>Сохранить</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}","import React from \"react\"\r\n\r\nimport { getUsers, sendDataUsersForSave } from \"../api\"\r\nimport { Type }  from 'react-bootstrap-table2-editor'\r\n\r\nimport UniversalTable from \"./UniversalTable\"\r\n\r\nconst ERole = [\r\n\t<span className=\"_mark mark-admin\">Администратор</span>, \r\n\t<span className=\"_mark mark-moderator\">Модератор</span>, \r\n\t<span className=\"_mark mark-editor\">Редактор</span>, \r\n\t\"Пользователь\"]\r\n\r\nclass Users extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\t\tthis.columns = [\r\n\t\t\t{\r\n\t\t\t\ttext: 'ID',\r\n\t\t\t\tdataField: 'id',\r\n\t\t\t\teditable: false\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'ФИО',\r\n\t\t\t\tdataField: 'name'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Логин',\r\n\t\t\t\tdataField: 'login',\r\n\t\t\t\teditable: false\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Роль',\r\n\t\t\t\tdataField: 'role',\r\n\t\t\t\tformatter: (cell, row) => { return ERole[row.role] },\r\n\t\t\t\teditor: {\r\n\t\t\t\t\ttype: Type.SELECT,\r\n\t\t\t\t\toptions: [{\r\n\t\t\t\t\t  value: \"0\",\r\n\t\t\t\t\t  label: 'Администратор'\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t  value: \"1\",\r\n\t\t\t\t\t  label: 'Модератор'\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t  value: '2',\r\n\t\t\t\t\t  label: 'Редактор'\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t  value: '3',\r\n\t\t\t\t\t  label: 'Пользователь'\r\n\t\t\t\t\t}]\r\n\t\t\t\t }\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Активен',\r\n\t\t\t\tdataField: 'active',\r\n\t\t\t\tformatter: (cell, row) => { \r\n\t\t\t\t\treturn row.active == 1? \r\n\t\t\t\t\t\t<span className=\"_mark mark-moderator\">Активен</span>:\r\n\t\t\t\t\t\t<span className=\"_mark mark-admin\">Не активен</span>\r\n\t\t\t\t},\r\n\t\t\t\teditor: {\r\n\t\t\t\t\ttype: Type.SELECT,\r\n\t\t\t\t\toptions: [{\r\n\t\t\t\t\t  value: '0',\r\n\t\t\t\t\t  label: 'Не активен'\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t  value: '1',\r\n\t\t\t\t\t  label: 'Активен'\r\n\t\t\t\t\t}]\r\n\t\t\t\t }\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n\t\r\n\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<div className=\"ManageUsers\">\r\n\t\t\t\t{/* <h1 style={{textAlign: \"center\", fontFamily: \"RobotoBold\", fontSize: \"1.5em\"}}>Управление пользователями</h1> */}\r\n\t\t\t\t\r\n\t\t\t\t<UniversalTable\r\n\t\t\t\t\tclassName=\"users\"\r\n\t\t\t\t\ttitle=\"Управление пользователями\"\r\n\t\t\t\t\tcolumns={this.columns}\r\n\r\n\t\t\t\t\tgetDataFromAPI={getUsers}\r\n\t\t\t\t\tsaveDataToAPI={sendDataUsersForSave}\r\n\r\n\t\t\t\t\toptPagination={true}\r\n\t\t\t\t\tenableNewRow={false}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nexport default Users","import React from \"react\"\r\nimport { connect } from \"react-redux\"\r\n\r\nclass Home extends React.Component{\r\n\t// eslint-disable-next-line no-useless-constructor\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\t}\r\n\tgetCurrentWeek(){\r\n\t\t// eslint-disable-next-line no-extend-native\r\n\t\tDate.prototype.getWeek = function(){\r\n\t\t\tvar day_miliseconds = 86400000,\r\n\t\t\t\tonejan = new Date(this.getFullYear(),0,1,0,0,0),\r\n\t\t\t\tonejan_day = (onejan.getDay() === 0) ? 7 : onejan.getDay(),\r\n\t\t\t\tdays_for_next_monday = (8-onejan_day),\r\n\t\t\t\tonejan_next_monday_time = onejan.getTime() + (days_for_next_monday * day_miliseconds),\r\n\t\t\t\t// If one jan is not a monday, get the first monday of the year\r\n\t\t\t\tfirst_monday_year_time = (onejan_day>1) ? onejan_next_monday_time : onejan.getTime(),\r\n\t\t\t\tthis_date = new Date(this.getFullYear(), this.getMonth(),this.getDate(),0,0,0),// This at 00:00:00\r\n\t\t\t\tthis_time = this_date.getTime(),\r\n\t\t\t\tdays_from_first_monday = Math.round(((this_time - first_monday_year_time) / day_miliseconds));\r\n\r\n\t\t\tvar first_monday_year = new Date(first_monday_year_time);\r\n\t\t\treturn (days_from_first_monday>=0 && days_from_first_monday<364) ? Math.ceil((days_from_first_monday+1)/7) : 52;\r\n\t  }\r\n\t  return new Date().getWeek()\r\n\t}\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<div className=\"Home\">\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.props.auth && <>\r\n\t\t\t\t\t\t<h1>Здравствуйте, {this.props.user.name}</h1>\r\n\t\t\t\t\t\t<h2 className=\"current_week\">Текущая неделя: <span className=\"mark\">{this.getCurrentWeek()}</span></h2>\r\n\t\t\t\t\t</>\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\t!this.props.auth && <p>Пожалуйста, авторизуйтесь!</p>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst mapPropsToProps = state => ({\r\n\tuser: state.user,\r\n\tauth: state.app.authorization\r\n})\r\n\r\nexport default connect(mapPropsToProps, null)(Home)","import React from \"react\"\r\nimport { connect } from \"react-redux\"\r\nimport { Form } from \"react-bootstrap\"\r\nimport { NotificationManager } from 'react-notifications'\r\nimport BootstrapTable from 'react-bootstrap-table-next'\r\nimport cellEditFactory, { Type } from 'react-bootstrap-table2-editor'\r\nimport FileDownload from \"js-file-download\"\r\n\r\nimport { addInvoiceChange, saveInvoiceChanges } from \"../redux/actions/app.action\"\r\nimport { getInvoiceOrders, getInvoiceDOCX, getColors, getMaterials, deleteInvoice } from \"../api\"\r\n\r\nimport { HOST } from \"../config.json\"\r\n\r\n\r\n\r\nclass Invoice extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tprods: [],\r\n\t\t\tselectedRows: [],\r\n\t\t\tcolors: [],\r\n\t\t\tmaterials: [],\r\n\r\n\t\t\tdelivery_price: this.props.invoiceData.delivery_price || 0,\r\n\t\t\tdelivery: this.props.invoiceData.delivery || false,\r\n\t\t\tcurrentStateActiveAddInputs: {\r\n\t\t\t\tdelivery: null,\r\n\t\t\t\tentering: null,\r\n\t\t\t\tassembly: null,\r\n\t\t\t\tassemblyAndEntering: null,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.delivery = React.createRef(null)\r\n\t\tthis.entering = React.createRef(null)\r\n\t\tthis.assembly = React.createRef(null)\r\n\t\tthis.assemblyAndEntering = React.createRef(null)\r\n\r\n\t\tconst validateNumber = (newValue, row, column) => {\r\n\t\t\tif (isNaN(newValue)) return {valid: false, message: 'Должно быть число'} \r\n\t\t\tif (newValue > 1000000) return {valid: false, message: 'Слишком большое число!' }\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tconst validateString = (newValue, row, column) => {\r\n\t\t\tif (newValue.length < 2) return { valid: false, message: 'Строка должна быть больше 1 символа' } \r\n\t\t\tif (newValue.length >= 100) return { valid: false, message: 'Слишком большая строка!' }\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tthis.columns = (materials, colors) => [\r\n\t\t\t{\r\n\t\t\t\ttext: \"№ п/п\",\r\n\t\t\t\tdataField: \"index\",\r\n\t\t\t\theaderStyle: (colum, colIndex) => { return { width: '5%'} },\r\n\t\t\t\teditable: false,\r\n\t\t\t\tfooter: col => \"\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: \"Наименование товара (описание выполненных работ, оказанных услуг)\",\r\n\t\t\t\tdataField: \"name\",\r\n\t\t\t\theaderStyle: (colum, colIndex) => { return { width: '30%'} },\r\n\t\t\t\tvalidator: (newValue, row, column) => validateString(newValue, row, column),\r\n\t\t\t\tfooter: col => \"\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: \"Материал\",\r\n\t\t\t\tdataField: \"material\",\r\n\t\t\t\teditor: {\r\n\t\t\t\t\ttype: Type.SELECT,\r\n\t\t\t\t\toptions: [{\r\n\t\t\t\t\t\tvalue: '-',\r\n\t\t\t\t\t\tlabel: 'НЕТ'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t...materials.reduce((prev, curr) => { return [...prev, { label: curr.material, value: curr.material }] }, [])\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\tfooter: col => \"\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: \"Цвет\",\r\n\t\t\t\tdataField: \"color\",\r\n\t\t\t\teditor: {\r\n\t\t\t\t\ttype: Type.SELECT,\r\n\t\t\t\t\toptions: [{\r\n\t\t\t\t\t\tvalue: '-',\r\n\t\t\t\t\t\tlabel: 'НЕТ'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t...colors.reduce((prev, curr) => { return [...prev, { label: curr.color, value: curr.color }] }, [])\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\tfooter: col => \"\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: \"Ед. изм.\",\r\n\t\t\t\tdataField: \"units\",\r\n\t\t\t\teditable: false,\r\n\t\t\t\tfooter: col => \"\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: \"Кол-во\",\r\n\t\t\t\tdataField: \"count\",\r\n\t\t\t\tvalidator:  (newValue, row, column) => validateNumber(newValue, row, column),\r\n\t\t\t\tfooter: col => this.state.delivery && \"Доставка: \"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: \"Цена (тариф) руб.коп.\",\r\n\t\t\t\tdataField: \"price\",\r\n\t\t\t\tformatter: (cell, row) => `${cell}₽`,\r\n\t\t\t\tvalidator:  (newValue, row, column) => validateNumber(newValue, row, column),\r\n\t\t\t\tfooter: col => this.state.delivery && `+ ${this.state.delivery_price} = `\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: \"Стоимость товаров (работ, услуг) руб.коп.\",\r\n\t\t\t\tdataField: \"allPrice\",\r\n\t\t\t\teditable: false,\r\n\t\t\t\tformatter: (cell, row) => `${cell}₽`,\r\n\t\t\t\tfooter: columnData => {\r\n\t\t\t\t\tconst summ = columnData.reduce((acc, item) => acc + item, 0)\r\n\t\t\t\t\t\t+ (this.state.delivery? this.state.delivery_price: 0) // only delivery\r\n\t\t\t\t\tthis.props.addInvoiceChange({ type: \"CHANGE\", payload: { col: \"priceAllControl\", value: summ, id: this.props.invoiceData.id_fc } })\r\n\t\t\t\t\treturn `${summ}₽`\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t]\r\n\r\n\t\tthis.invoiceRef = React.createRef()\r\n\t}\r\n\r\n\tprintInvoice(){\r\n\t\tlet mainData = this.props.invoiceData\r\n\t\tgetInvoiceDOCX([this.props.invoiceData.id], res => {\r\n\t\t\tFileDownload(res, `заказ_${mainData.id_fc}.docx`)\r\n\t\t}, err => NotificationManager.warning(\"Не удалось скачать документ\", \"Ошибка\", 3000))\r\n\t}\r\n\r\n\tnewRow(){\r\n\t\tthis.setState({ prods: [...this.state.prods, {\r\n\t\t\tallPrice: 0,\r\n\t\t\tassemblyAndEntering: false,\r\n\t\t\tcolor: \"-\",\r\n\t\t\tcount: 0,\r\n\t\t\tid: this.state.prods.length === 0 ? 1 :this.state.prods[this.state.prods.length - 1].id + 1,\r\n\t\t\tid_fc: this.props.invoiceData.id_fc,\r\n\t\t\tid_iv: this.props.invoiceData.id,\r\n\t\t\tindex: this.state.prods.length === 0 ? 1 :this.state.prods[this.state.prods.length - 1].index + 1,\r\n\t\t\tmaterial: \"-\",\r\n\t\t\tname: \"\",\r\n\t\t\tprice: 0,\r\n\t\t\tunits: \"шт.\",\r\n\t\t\tweek: this.props.invoiceData.week\r\n\t\t}] })\r\n\t\t\r\n\t\t\r\n\t\tthis.props.addInvoiceChange({\r\n\t\t\ttype: \"NEW_ROW\",\r\n\t\t\tpayload: {\r\n\t\t\t\tid: this.state.prods.length === 0 ? 1 :this.state.prods[this.state.prods.length - 1].id + 1\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tdeleteRow(){\r\n\t\t// List of id for selected rows\r\n\t\tconst ids = this.state.selectedRows.reduce((prev, curr) => { return [...prev, curr.id] }, [])\r\n\r\n\t\t// delete row in component, including prods which id don't selected\r\n\t\tthis.setState({ prods: this.state.prods.filter(prod => !ids.includes(prod.id)) })\r\n\r\n\t\t// make action -> DELETE_ROW\r\n\t\tthis.props.addInvoiceChange({ type: \"DELETE_ROW\", payload: ids })\r\n\t}\r\n\r\n\t// send changes and save them\r\n\tsaveInvoice(){\r\n\t\tthis.props.saveInvoiceChanges(this.props.invoiceData)\r\n\t}\r\n\t\r\n\tcomponentDidMount(){\r\n\t\tgetInvoiceOrders(res => {\r\n\t\t\tlet index = 1\r\n\t\t\tthis.setState({ \r\n\t\t\t\tprods: res.data\r\n\t\t\t\t\t.filter(order => order.id_iv === this.props.invoiceData.id)\r\n\t\t\t\t\t.reduce((prev, curr) => { return [...prev, { ...curr, units: \"шт.\", index: index++, assemblyAndEntering: !!curr.assembly && !!curr.entering}] }, [])\r\n\t\t\t})\r\n\t\t}, err => NotificationManager.warning(\"Не удалось загрузить данные\", \"Ошибка\", 3000))\r\n\t\tgetMaterials(materials => {\r\n\t\t\tthis.setState({ materials: materials.data })\r\n\t\t}, (err) => {})\r\n\t\tgetColors(colors => {\r\n\t\t\tthis.setState({ colors: colors.data })\r\n\t\t}, (err) => {})\r\n\t}\r\n\r\n\tonSelectForExelTable(row, isSelect, rowIndex){\r\n\t\tisSelect?\r\n\t\t\tthis.setState({ selectedRows: [...this.state.selectedRows, row] }):\r\n\t\t\tthis.setState({ selectedRows: [...this.state.selectedRows.filter(item => item.id !== row.id)] })\r\n\t}\r\n\r\n\tonSelectAllForExelTable(isSelect, rows){\r\n\t\tisSelect?\r\n\t\t\tthis.setState({ selectedRows: [...rows] }):\r\n\t\t\tthis.setState({ selectedRows: [] })\r\n\t}\r\n\r\n\tupdateAllPriceCell(newValue, row, column){\r\n\t\tconsole.log(newValue, row, column)\r\n\t\tif(column.dataField === \"price\"){\r\n\t\t\tconst currProds = this.state.prods\r\n\t\t\tcurrProds.map((prod, index) => {\r\n\t\t\t\tif(prod.id === row.id){\r\n\t\t\t\t\tcurrProds[index].allPrice = Number(row.count) * Number(newValue)\r\n\t\t\t\t\treturn currProds[index]\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tthis.setState({ prods: currProds })\r\n\t\t\tthis.props.addInvoiceChange({ \r\n\t\t\t\ttype: \"CHANGE\", \r\n\t\t\t\tpayload: { \r\n\t\t\t\t\tcol: \"allPrice\", \r\n\t\t\t\t\tvalue: Number(row.count) * Number(newValue), \r\n\t\t\t\t\tid: row.id \r\n\t\t\t\t} \r\n\t\t\t})\r\n\t\t}\r\n\t\tif(column.dataField === \"count\"){\r\n\t\t\tconst currProds = this.state.prods\r\n\t\t\tcurrProds.map((prod, index) => {\r\n\t\t\t\tif(prod.id === row.id){\r\n\t\t\t\t\tcurrProds[index].allPrice = Number(row.price) * Number(newValue)\r\n\t\t\t\t\treturn currProds[index]\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tthis.setState({ prods: currProds })\r\n\t\t\tthis.props.addInvoiceChange({ type: \"CHANGE\", payload: { col: \"allPrice\", value: Number(row.price) * Number(newValue), id: row.id } })\r\n\t\t}\r\n\t}\r\n\r\n\tchangeCell(oldValue, newValue, row, column){ \r\n\t\tthis.updateAllPriceCell(newValue, row, column)\r\n\t\tthis.props.addInvoiceChange({ type: \"CHANGE\", payload: { col: column.dataField, value: newValue, id: row.id } })\r\n\t}\r\n\r\n\tapplyAllPrices(){\r\n\t\tthis.setState({ \r\n\t\t\tdelivery_price: +this.delivery.current.value,\r\n\t\t\tcurrentStateActiveAddInputs: {\r\n\t\t\t\tdelivery: true,\r\n\t\t\t\tentering: true,\r\n\t\t\t\tassembly: true,\r\n\t\t\t\tassemblyAndEntering: true\r\n\t\t\t} \r\n\t\t})\r\n\t\tthis.props.addInvoiceChange({ type: \"CHANGE/delivery_price\", payload: +this.delivery.current.value })\r\n\t\tthis.props.addInvoiceChange({ type: \"CHANGE/entering_price\", payload: +this.entering.current.value })\r\n\t\tthis.props.addInvoiceChange({ type: \"CHANGE/assembly_price\", payload: +this.assembly.current.value })\r\n\t\tthis.props.addInvoiceChange({ type: \"CHANGE/assemblyAndEntering_price\", payload: +this.assemblyAndEntering.current.value })\r\n\t}\r\n\thandleDelete(){\r\n\t\twindow.confirm(\"Удалить заказ?\") && \r\n\t\t\tdeleteInvoice([{ hash: this.props.invoiceData.hash, id_fc: this.props.invoiceData.id_fc }], (res) => {\r\n\t\t\t\tthis.props.history.push(\"/invoices/\" + new Date().getFullYear())\r\n\t\t\t\tNotificationManager.success(\"Заказ удален\", \"OK\", 3000)\r\n\t\t\t}, (err) => {\r\n\t\t\t\tNotificationManager.error(\"Не удалось удалить заказ\", \"Ошибка\", 3000)\r\n\t\t\t})\r\n\t}\r\n\r\n\trender(){\r\n\t\tconst switchImage = (siteName) => {\r\n\t\t\tswitch(siteName){\r\n\t\t\t\tcase \"Krovati-spalni.ru\":\r\n\t\t\t\t\treturn <img src={`${HOST}/images/logo_krovati_var_22.png`} alt=\"logo\" />\r\n\t\t\t\tcase \"мебельизсосны.рф\":\r\n\t\t\t\t\treturn <img src={`${HOST}/images/ms.png`} alt=\"logo\" />\r\n\t\t\t\tcase \"Liman-murom.ru\":\r\n\t\t\t\t\treturn <img src={`${HOST}/images/lim.jpg`} alt=\"logo\" />\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn <img title=\"no image\" />\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst selectOption = (defaultValue, type) => {\r\n\t\t\tconst onChange = (e) => {\r\n\t\t\t\tif(e.target.name === \"CHANGE/delivery\"){\r\n\t\t\t\t\tthis.setState({ delivery: e.target.value == \"Да\" })\r\n\t\t\t\t}\r\n\t\t\t\tthis.props.addInvoiceChange({ type, payload: e.target.value })\r\n\t\t\t}\r\n\t\t\treturn <Form.Select className=\"\" aria-label=\"Выберете год\" name={type} onChange={e => onChange(e)}>\r\n\t\t\t\t<option value=\"\">Выберете</option>\r\n\t\t\t\t<option selected={!!defaultValue} value=\"Да\">Да</option>\r\n\t\t\t\t<option selected={!defaultValue} value=\"Нет\">Нет</option>\r\n\t\t\t</Form.Select>\r\n\t\t}\r\n\t\t\r\n\r\n\t\tconst inputPrice = (defaultValue, type, ref) => {\r\n\t\t\tconst changeInput = (e) => {\r\n\t\t\t\t// all actions by any key and enter key\r\n\t\t\t\tswitch(type){\r\n\t\t\t\t\tcase \"CHANGE/delivery_price\":\r\n\t\t\t\t\t\tif(e.key === \"Enter\") {\r\n\t\t\t\t\t\t\tthis.setState({ \r\n\t\t\t\t\t\t\t\tdelivery_price: +e.target.value, \r\n\t\t\t\t\t\t\t\tcurrentStateActiveAddInputs: {...this.state.currentStateActiveAddInputs, delivery: true} \r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthis.props.addInvoiceChange({ type, payload: +e.target.value })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse this.setState({ currentStateActiveAddInputs: {...this.state.currentStateActiveAddInputs, delivery: false} })\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase \"CHANGE/entering_price\":\r\n\t\t\t\t\t\tif(e.key === \"Enter\") {\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\tcurrentStateActiveAddInputs: {...this.state.currentStateActiveAddInputs, entering: true} \r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthis.props.addInvoiceChange({ type, payload: +e.target.value })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse this.setState({ currentStateActiveAddInputs: {...this.state.currentStateActiveAddInputs, entering: false} })\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase \"CHANGE/assembly_price\":\r\n\t\t\t\t\t\tif(e.key === \"Enter\") {\r\n\t\t\t\t\t\t\tthis.setState({ \r\n\t\t\t\t\t\t\t\tcurrentStateActiveAddInputs: {...this.state.currentStateActiveAddInputs, assembly: true} \r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthis.props.addInvoiceChange({ type, payload: +e.target.value })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse this.setState({ currentStateActiveAddInputs: {...this.state.currentStateActiveAddInputs, assembly: false} })\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase \"CHANGE/assemblyAndEntering_price\":\r\n\t\t\t\t\t\tif(e.key === \"Enter\") {\r\n\t\t\t\t\t\t\tthis.setState({ \r\n\t\t\t\t\t\t\t\tcurrentStateActiveAddInputs: {...this.state.currentStateActiveAddInputs, assemblyAndEntering: true} \r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthis.props.addInvoiceChange({ type, payload: +e.target.value })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse this.setState({ currentStateActiveAddInputs: {...this.state.currentStateActiveAddInputs, assemblyAndEntering: false} })\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst classInput = type.split(\"/\")[1].split(\"_\")[0]\r\n\t\t\treturn <input \r\n\t\t\t\ttype=\"number\" \r\n\t\t\t\tclassName={`\r\n\t\t\t\t\t${classInput} \r\n\t\t\t\t\t${this.state.currentStateActiveAddInputs[classInput] !== null? \r\n\t\t\t\t\t\t(this.state.currentStateActiveAddInputs[classInput]? \"applied\": \"noapplied\"):\r\n\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t}\r\n\t\t\t\t`}\r\n\t\t\t\tref={ref}\r\n\t\t\t\tdefaultValue={defaultValue} \r\n\t\t\t\tonKeyPress={e => changeInput(e)}\r\n\t\t\t/>\r\n\t\t}\r\n\t\t\r\n\t\treturn(\r\n\t\t\t<div className=\"Invoice-wrapper\">\r\n\t\t\t\t{ !!this.props.invoiceData.deliver_back && <span className=\"deliver-back-mark\">Довоз</span> }\r\n\t\t\t\t<div className=\"Invoice\" ref={this.invoiceRef}>\r\n\t\t\t\t\t{/* <Component /> */}\r\n\t\t\t\t\t<div className=\"header\">\r\n\t\t\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tswitchImage(this.props.invoiceData.site_name)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"info_block\">\r\n\t\t\t\t\t\t\t<div className=\"client_info client_name\"><span>ФИО</span>: {this.props.invoiceData.client_name}</div>\r\n\t\t\t\t\t\t\t<div className=\"client_info client_phone\"><span>Телефон</span>: {this.props.invoiceData.client_phone}</div>\r\n\t\t\t\t\t\t\t<div className=\"client_info client_address\"><span>Адрес</span>: {this.props.invoiceData.client_address}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"sub-header\">\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t<span>Заказ № <span className=\"number_order\">{this.props.invoiceData.id_fc}</span></span>\r\n\t\t\t\t\t\t\t<span>Дата доставки <span className=\"date_order\">{this.props.invoiceData.date_order}</span></span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"prods\">\r\n\t\t\t\t\t\t<BootstrapTable striped hover condensed bordered\r\n\t\t\t\t\t\t\tkeyField=\"id\"\r\n\t\t\t\t\t\t\tdata={ this.state.prods } \r\n\t\t\t\t\t\t\tcolumns={ this.columns(this.state.materials, this.state.colors) } \r\n\t\t\t\t\t\t\tcellEdit={\r\n\t\t\t\t\t\t\t\tcellEditFactory({\r\n\t\t\t\t\t\t\t\t\tmode: 'dbclick',\r\n\t\t\t\t\t\t\t\t\tafterSaveCell: (oldValue, newValue, row, column) => this.changeCell(oldValue, newValue, row, column)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tselectRow={{\r\n\t\t\t\t\t\t\t\tmode: 'checkbox',\r\n\t\t\t\t\t\t\t\tclickToSelect: true,\r\n\t\t\t\t\t\t\t\tclickToEdit: true,  // Click to edit cell also\r\n\t\t\t\t\t\t\t\tonSelect: (row, isSelect, rowIndex, e) => { this.onSelectForExelTable(row, isSelect, rowIndex) },\r\n\t\t\t\t\t\t\t\tonSelectAll: (isSelect, rows) => { this.onSelectAllForExelTable(isSelect, rows) }\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"table-bottom-panel\">\r\n\t\t\t\t\t\t<button className=\"btn btn-success\" onClick={this.newRow.bind(this)}>Новая строка</button>\r\n\t\t\t\t\t\t<button className=\"btn btn-danger\" onClick={this.deleteRow.bind(this)}>Удалить строку</button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<p className=\"gost\">\r\n\t\t\t\t\t\tДанная мебель соответствует ГОСТу 16371-93 и госту 19917-93, имеет гигиенический\r\n\t\t\t\t\t\tсертификат, сертификат соответствия, признана годной к эксплуатации.\r\n\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t<div className=\"assembly-and-entering\">\r\n\t\t\t\t\t\t<span className=\"name-field\">\r\n\t\t\t\t\t\t\tДоставка \r\n\t\t\t\t\t\t\t<span className=\"field field_data field-delivery\">\r\n\t\t\t\t\t\t\t\t{selectOption(this.state.delivery, \"CHANGE/delivery\")}\r\n\t\t\t\t\t\t\t\t{inputPrice(this.props.invoiceData.delivery_price, \"CHANGE/delivery_price\", this.delivery)}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"name-field\">\r\n\t\t\t\t\t\t\tСбор \r\n\t\t\t\t\t\t\t<span className=\"field field_data field-assembly\">\r\n\t\t\t\t\t\t\t\t{selectOption(this.props.invoiceData.assembly, \"CHANGE/assembly\")} \r\n\t\t\t\t\t\t\t\t{inputPrice(this.props.invoiceData.assembly_price, \"CHANGE/assembly_price\", this.assembly)}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"name-field\">\r\n\t\t\t\t\t\t\tЗанос \r\n\t\t\t\t\t\t\t<span className=\"field field_data field-entering\">\r\n\t\t\t\t\t\t\t\t{selectOption(this.props.invoiceData.entering, \"CHANGE/entering\")} \r\n\t\t\t\t\t\t\t\t{inputPrice(this.props.invoiceData.entering_price, \"CHANGE/entering_price\", this.entering)}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"name-field\">\r\n\t\t\t\t\t\t\tСбор/Занос \r\n\t\t\t\t\t\t\t<span className=\"field field_data field-assembly-entering\">\r\n\t\t\t\t\t\t\t\t{selectOption(this.props.invoiceData.assemblyAndEntering, \"CHANGE/assemblyAndEntering\")} \r\n\t\t\t\t\t\t\t\t{inputPrice(\r\n\t\t\t\t\t\t\t\t\tthis.props.invoiceData.assemblyAndEntering_price, \r\n\t\t\t\t\t\t\t\t\t\"CHANGE/assemblyAndEntering_price\",\r\n\t\t\t\t\t\t\t\t\tthis.assemblyAndEntering\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<p style={{textAlign: \"center\", marginTop: \"10px\"}}>\r\n\t\t\t\t\t\t\t<button className=\"btn btn-primary apply_all_assembly_and_entering_block\" onClick={this.applyAllPrices.bind(this)}>Применить все</button>\r\n\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"write-for-client\">\r\n\t\t\t\t\t\t<p>Заказчик:</p>\r\n\t\t\t\t\t\t<p className=\"write-for-client-data\">\r\n\t\t\t\t\t\t\t<span className=\"info write-name-client\">ФИО<span className=\"field\"></span></span>\r\n\t\t\t\t\t\t\t<span className=\"info write-phone-client\">Тел.<span className=\"field\"></span></span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<p className=\"signature\">Подпись <span className=\"field\"></span></p>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"panel-bottom\">\r\n\t\t\t\t\t<button className=\"btn btn-danger\" onClick={this.handleDelete.bind(this)}>Удалить</button>\r\n\t\t\t\t\t<button className=\"btn btn-success\" onClick={this.saveInvoice.bind(this)}>Соханить</button>\r\n\t\t\t\t\t<button className=\"btn btn-primary\" onClick={this.printInvoice.bind(this)}>Печать</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n\tchanges: state.app.invoiceChanges\r\n})\r\n\r\nconst mapDispatchToProps = f => ({\r\n\taddInvoiceChange: (action) => f(addInvoiceChange(action)),\r\n\tsaveInvoiceChanges: (invoiceData) => f(saveInvoiceChanges(invoiceData)),\r\n}) \r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Invoice)","import React from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { getInvoices, postNewInvoiceDeliverBack, getInvoiceDOCX, deleteInvoice } from \"../api\"\r\nimport { Form, FloatingLabel, ButtonToolbar, ButtonGroup, Button } from \"react-bootstrap\"\r\nimport { FaChevronLeft, FaChevronRight } from \"react-icons/fa\"\r\nimport { connect } from \"react-redux\"\r\nimport FileDownload from \"js-file-download\"\r\nimport { NotificationManager } from 'react-notifications'\r\nimport ReactPaginate from 'react-paginate'\r\n\r\n\r\nimport \"../styles/Invoices.scss\"\r\nimport Invoice from \"./Invoice\"\r\n\r\n\r\n// TOdos\r\n// 1. Find invoice in list /invoices\t\t\t|+|\r\n// 2. 50 - default items; sorted default\t\t|+|\r\n// 3. Saving docxes - resolving problem\t\t|+|\r\n// 4. plusing delivery in table\t\t\t\t\t|+|\r\n// 5. deleting invoice -> orders \t\t\t\t|+|\r\n\r\nclass InvoicesList extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tinvoices: [],\r\n\t\t\tactiveInvoice: false,\r\n\t\t\tactiveRow: {},\r\n\t\t\tselectedYear: this.props.match.params.year || new Date().getFullYear(),\r\n\t\t\tselectedWeek: -1,\r\n\r\n\t\t\tdeliverVisible: false,\r\n\t\t\tselectInvoices: [],\r\n\t\t\tfindedNumberOrder: -1,\r\n\r\n\t\t\t// pagination\r\n\t\t\tcountItemsInPage: 30,\r\n\t\t\tcurrentPage: 1,\r\n\t\t\tmaxCountPages: 5,\r\n\t\t\tcurrentMove: 0\r\n\t\t}\r\n\r\n\t\tthis.deliverNumberOrder = React.createRef()\r\n\t}\r\n\r\n\tupdateListInvoices(cb){\r\n\t\tgetInvoices(this.state.selectedYear, data => {\r\n\t\t\tthis.setState({ invoices: data.data.slice(0).sort(function(a,b) {\r\n\t\t\t\treturn (a[\"id_fc\"] > b[\"id_fc\"]) ? 1 : (a[\"id_fc\"] < b[\"id_fc\"]) ? -1 : 0;\r\n\t\t\t}).reverse() })\r\n\t\t\tcb(data.data).bind(this)\r\n\t\t}, err => console.log(err))\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\r\n\t\tthis.updateListInvoices((data) => {\r\n\t\t\tif(Boolean(this.props.match.params.id)){\r\n\t\t\t\tconst __row = data.filter(row => row.id === +this.props.match.params.id)\r\n\t\t\t\t\r\n\t\t\t\tif(__row.length !== 0){\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tactiveInvoice: true, \r\n\t\t\t\t\t\tactiveRow: __row[0],\r\n\t\t\t\t\t\tselectInvoices: [] \r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.props.history.push(\"/invoices\")\r\n\t\t\t}\r\n\t\t\t\r\n\t\t})\r\n\t} \r\n\r\n\tonEventHandlerForLabel(e, row){\r\n\t\tswitch(e.detail){\r\n\t\t\t// One click\r\n\t\t\tcase 1:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst consisted = this.state.selectInvoices.reduce((prev, curr) => [...prev, curr.id], []).includes(row.id)\r\n\r\n\t\t\t\t\tif (consisted) {\r\n\t\t\t\t\t\tconst tmpSelectedInvoices = this.state.selectInvoices.filter(invoice => invoice.id != row.id)\r\n\t\t\t\t\t\tconsole.log(tmpSelectedInvoices);\r\n\t\t\t\t\t\tthis.setState({ selectInvoices: [...tmpSelectedInvoices] })\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tthis.setState({ selectInvoices: [...this.state.selectInvoices, row] })\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak\r\n\t\t\t// Double click\r\n\t\t\tcase 2:\r\n\t\t\t\te.preventDefault()\r\n\t\t\t\tthis.props.history.push(`/invoices/${this.state.selectedYear}/${row.id}`)\r\n\t\t\t\t// \r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\treturn\r\n\t\t}\r\n\t}\r\n\r\n\tselectWeekAndReloadData(e){\r\n\t\tthis.setState({ selectedWeek: +e.target.value })\r\n\t}\r\n\r\n\tselectYearAndReloadData(e){\r\n\t\tgetInvoices(+e.target.value, data => {\r\n\t\t\tthis.setState({ invoices: data.data.slice(0).sort(function(a,b) {\r\n\t\t\t\treturn (a[\"id_fc\"] > b[\"id_fc\"]) ? 1 : (a[\"id_fc\"] < b[\"id_fc\"]) ? -1 : 0;\r\n\t\t\t}).reverse(), selectedYear: +e.target.value })\r\n\t\t\tthis.props.history.push(`/invoices/${e.target.value}`)\r\n\t\t}, err => console.log(err))\r\n\t}\r\n\r\n\tcreateDeliverBack(e){\r\n\t\tif(this.state.invoices.filter(invoice => invoice.id_fc === +this.deliverNumberOrder.current.value).length !== 0){\r\n\t\t\tpostNewInvoiceDeliverBack(+this.deliverNumberOrder.current.value, (res) => {\r\n\t\t\t\tif(res.error) NotificationManager.warning(\"Не удалось создать новый довоз\", \"Ошибка\", 3000)\r\n\t\t\t\telse this.setState({ \r\n\t\t\t\t\tinvoices: [\r\n\t\t\t\t\t\t{ ...this.state.invoices\r\n\t\t\t\t\t\t\t.filter(invoice => invoice.id_fc === +this.deliverNumberOrder.current.value)[0],\r\n\t\t\t\t\t\t\tdeliver_back: 1,\r\n\t\t\t\t\t\t\tid: this.state.invoices[this.state.invoices.length - 1].id + 1\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t...this.state.invoices, \r\n\t\t\t\t\t],\r\n\t\t\t\t\tdeliverVisible: false\r\n\t\t\t\t})\r\n\t\t\t}, err => NotificationManager.warning(\"Не удалось создать новый довоз\", \"Ошибка\", 3000))\r\n\t\t}\r\n\t\telse{\r\n\t\t\tNotificationManager.warning(\"Такого заказа не существует\", \"Ошибка\", 3000)\r\n\t\t}\r\n\t}\r\n\r\n\tprintSelected(e){\r\n\t\tgetInvoiceDOCX(this.state.selectInvoices.reduce((prev, curr) => { return [...prev, curr.id] }, []), res => {\r\n\t\t\tFileDownload(res, `заказы.docx`)\r\n\t\t}, err => console.log(err))\r\n\t}\r\n\t\r\n\thandleOnFindNumberOrder(e){\r\n\t\tthis.setState({ findedNumberOrder: +e.target.value || -1 })\r\n\t}\r\n\r\n\t_filter(invoices){\r\n\t\treturn invoices.length > 0 ?\r\n\t\t\tinvoices.filter(invoice => this.state.findedNumberOrder === -1 ? true : (\"\"+invoice.id_fc).includes(+this.state.findedNumberOrder)):\r\n\t\t\t[]\r\n\t}\r\n\r\n\thandleDeleteInvoice(e){\r\n\t\tif(window.confirm(\"Вы уеврены, что хотите удалить заказ?\")){\r\n\t\t\tdeleteInvoice(\r\n\t\t\t\tthis.state.selectInvoices.reduce((prev, curr) => \r\n\t\t\t\t\t[...prev, {hash: curr.hash, id_fc: curr.id_fc}], []\r\n\t\t\t\t),\r\n\t\t\t\tdata => {\r\n\t\t\t\t\tNotificationManager.success(\"Заказ и все, что с ним связано, удалено\", \"ОК\", 3000)\r\n\t\t\t\t}, \r\n\t\t\t\terr => {\r\n\t\t\t\t\tNotificationManager.warning(\"Не удалось удалить заказ\", \"Ошибка\", 3000)\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\tthis.setState({\r\n\t\t\t\tinvoices: this.state.invoices.filter(invoice => \r\n\t\t\t\t\t!this.state.selectInvoices.reduce((prev, curr) => [...prev, curr.id], []).includes(invoice.id)\r\n\t\t\t\t),\r\n\t\t\t\tselectInvoices: []\r\n\t\t\t})\r\n\t\t\t\r\n\t\t}\r\n\t\t\t\r\n\t}\r\n\r\n\t// --------------------------------------------------------------------------\r\n\t// ----------------------------- Panigation ---------------------------------\r\n\t// --------------------------------------------------------------------------\r\n\r\n\r\n\trange(size, startAt = 0) {\r\n\t\treturn [...Array(size).keys()].map(i => i + startAt);\r\n\t}\r\n\ttoForward(e){\r\n\t\tthis.state.currentPage < Math.ceil(this.state.invoices.length / this.state.countItemsInPage) && \r\n\t\t\tthis.setState({ currentPage: this.state.currentPage + 1 })\r\n\t}\r\n\ttoBackward(e){ this.state.currentPage > 1 && this.setState({ currentPage: this.state.currentPage - 1 }) }\r\n\t\r\n\tpickPage(page){\r\n\t\tthis.setState({ currentPage: page.selected + 1 })\r\n\t}\r\n\r\n\trender(){\r\n\r\n\t\t// for selects\r\n\t\tconst weeks = this.state.invoices.reduce((prev, curr) => { return (!(prev.includes(curr.week))? [...prev, curr.week]: prev)  }, []).sort()\r\n\t\t\r\n\t\t// ----- for arrays render including panigation ------\r\n\t\t\t\r\n\r\n\t\tlet invoices = this.state.selectedWeek === -1?\r\n\t\t\tthis._filter(this.state.invoices).filter((_, index) => \r\n\t\t\t\tindex >= (this.state.currentPage - 1) * this.state.countItemsInPage && \r\n\t\t\t\tindex < (this.state.currentPage) * this.state.countItemsInPage):\r\n\t\t\tthis._filter(this.state.invoices).filter(invoice => invoice.week === this.state.selectedWeek).filter((_, index) => \r\n\t\t\t\tindex >= (this.state.currentPage - 1) * this.state.countItemsInPage && \r\n\t\t\t\tindex < (this.state.currentPage) * this.state.countItemsInPage\r\n\t\t\t)\r\n\r\n\t\t\r\n\t\t// panigation\r\n\t\tconst countPages = this.state.selectedWeek === -1?\r\n\t\t\tMath.ceil(this._filter(this.state.invoices).length / this.state.countItemsInPage):\r\n\t\t\tMath.ceil(this._filter(this.state.invoices).filter(invoice => invoice.week === this.state.selectedWeek).length / this.state.countItemsInPage)\r\n\t\treturn(\r\n\t\t\t<div className=\"invoices_section\">\r\n\t\t\t\t\r\n\t\t\t\t<h1 className=\"header\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// arrow button to back list\r\n\t\t\t\t\t\tthis.state.activeInvoice && \r\n\t\t\t\t\t\t\t<Link to={`/invoices/${this.state.selectedYear}`} className=\"invoices_section__back\"><FaChevronLeft /></Link>\r\n\t\t\t\t\t}\r\n\t\t\t\t\tЗаказы \r\n\t\t\t\t\t{this.state.activeInvoice? `: ${this.state.activeRow.id_fc}`: \"\"}\r\n\t\t\t\t</h1>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\t!this.state.activeInvoice && <div className=\"invoices_list_wrapper\">\r\n\r\n\t\t\t\t\t\t<div className=\"panel\">\r\n\t\t\t\t\t\t\t{/* Number of week for order */}\r\n\t\t\t\t\t\t\t<Form.Select className=\"header-selects header-selects-week\" aria-label=\"Неделя\" onChange={e => this.selectWeekAndReloadData(e)}>\r\n\t\t\t\t\t\t\t\t<option value=\"-1\">№ недели</option>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tweeks.map(week => {\r\n\t\t\t\t\t\t\t\t\t\treturn <option key={week} value={week}>{week}</option>\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</Form.Select>\r\n\t\t\t\t\t\t\t{/* Number of year for created date of order */}\r\n\t\t\t\t\t\t\t<Form.Select defaultValue={this.state.selectedYear} className=\"header-selects header-selects-year\" aria-label=\"Выберете год\" onChange={e => this.selectYearAndReloadData(e)}>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t[...Array(new Date().getFullYear() - 2021 + 2).keys()].map(i => i + 2021).map(year => {\r\n\t\t\t\t\t\t\t\t\t\treturn <option value={year} selected={year == new Date().getFullYear()}>{year}</option>\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</Form.Select>\r\n\r\n\t\t\t\t\t\t\t<FloatingLabel hasValidation controlId=\"floatingInput\" label=\"Найти номер заказа\" className=\"find_order\">\r\n\t\t\t\t\t\t\t\t\t<Form.Control autoFocus\r\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"number\" \r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"4013\"\r\n\t\t\t\t\t\t\t\t\t\tonChange={e => this.handleOnFindNumberOrder(e)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"label_thead\">\r\n\t\t\t\t\t\t\t<span className=\"number_order\">№ Недели</span>\r\n\t\t\t\t\t\t\t<span className=\"number_order\">№ заказа</span>\r\n\t\t\t\t\t\t\t<span className=\"client_name\">ФИО</span>\r\n\t\t\t\t\t\t\t<span className=\"client_phone\">Телефон</span>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<ul className=\"invoices_list\">\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tinvoices.length > 0 && invoices.map((invoice, index) => {\r\n\t\t\t\t\t\t\t\t\treturn <li onClick={e => this.onEventHandlerForLabel(e, invoice)} key={`li_${index}`}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Check type=\"checkbox\" id={`invoice_${index}`} className={`choice choice_${index}`} \r\n\t\t\t\t\t\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"field number_order\">{invoice.week}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"field number_order\">{invoice.id_fc}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"field client_name\">{invoice.client_name}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"field client_phone\">{invoice.client_phone}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{!!invoice.deliver_back? <span className=\"deliver_back\">Довоз</span>: <></>} \r\n\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t// A new invoice -> deliver back\r\n\t\t\t\t\t\t\tthis.state.deliverVisible && <div className=\"deliver\">\r\n\t\t\t\t\t\t\t\t<span>Создать новый довоз: </span>\r\n\t\t\t\t\t\t\t\t<FloatingLabel controlId=\"floatingInput\" label=\"Номер заказа\" className=\"mb-4\">\r\n\t\t\t\t\t\t\t\t\t<Form.Control type=\"text\" placeholder=\"3400\" autoFocus ref={this.deliverNumberOrder}/>\r\n\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t<div className=\"button-wrapper\">\r\n\t\t\t\t\t\t\t\t\t<button className=\"btn btn-primary add-deliver\" onClick={this.createDeliverBack.bind(this)}>Создать</button>\r\n\t\t\t\t\t\t\t\t\t<button className=\"btn btn-danger\" onClick={e => this.setState({ deliverVisible: false })}>Закрыть</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t<div className=\"pagination-wrapper\">\r\n\r\n\t\t\t\t\t\t\t<Form.Select onChange={e => this.setState({ countItemsInPage: +e.target.value })} className=\"header-selects header-selects-year\" aria-label=\"Выберете айтомов\">\r\n\t\t\t\t\t\t\t\t<option value=\"10\">Кол-во: 10</option>\r\n\t\t\t\t\t\t\t\t<option value=\"20\">Кол-во: 20</option>\r\n\t\t\t\t\t\t\t\t<option value=\"30\" selected>Кол-во: 30</option>\r\n\t\t\t\t\t\t\t\t<option value=\"40\">Кол-во: 40</option>\r\n\t\t\t\t\t\t\t\t<option value=\"50\">Кол-во: 50</option>\r\n\t\t\t\t\t\t\t\t<option value={this.state.invoices.length}>Все</option>\r\n\t\t\t\t\t\t\t</Form.Select>\r\n\t\t\t\t\t\t\t<ReactPaginate\r\n\t\t\t\t\t\t\t\tpreviousLabel={<FaChevronLeft />}\r\n\t\t\t\t\t\t\t\tnextLabel={<FaChevronRight />}\r\n\t\t\t\t\t\t\t\tbreakLabel={'...'}\r\n\t\t\t\t\t\t\t\tbreakClassName={'break-me'}\r\n\t\t\t\t\t\t\t\tpageCount={countPages}\r\n\t\t\t\t\t\t\t\tmarginPagesDisplayed={2}\r\n\t\t\t\t\t\t\t\tpageRangeDisplayed={5}\r\n\t\t\t\t\t\t\t\tonPageChange={this.pickPage.bind(this)}\r\n\t\t\t\t\t\t\t\tcontainerClassName={'pagination'}\r\n\t\t\t\t\t\t\t\tactiveClassName={'active'}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\r\n\r\n\r\n\r\n\t\t\t\t\t\t<p className=\"button_wrapper\">\r\n\t\t\t\t\t\t\t<button onClick={e => this.props.history.push(`/invoices/${this.state.selectedYear}/${this.state.selectInvoices[0].id}`)}  className={`btn btn-secondary ${this.state.selectInvoices.length === 1? \"\": \"disabled\"}`} style={{marginRight: \"10px\"}}>Открыть</button>\r\n\t\t\t\t\t\t\t<button \r\n\t\t\t\t\t\t\t\tonClick={e => this.handleDeleteInvoice(e)} \r\n\t\t\t\t\t\t\t\tclassName={`btn btn-danger ${this.state.selectInvoices.length > 0 ? \"\": \"disabled\"}`} \r\n\t\t\t\t\t\t\t\tstyle={{marginRight: \"10px\"}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tУдалить\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button onClick={e => this.setState({ deliverVisible: true })} className=\"btn btn-success\" style={{marginRight: \"10px\"}}>Сделать довоз</button>\r\n\t\t\t\t\t\t\t<button onClick={this.printSelected.bind(this)} className={`btn btn-primary ${this.state.selectInvoices.length === 0? \"disabled\": \"\"}`}>Печать</button>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.activeInvoice && <Invoice history={this.props.history} invoiceData={this.state.activeRow} />\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n\tauth: state.app.authorization,\r\n\tuser: state.user\r\n})\r\n\r\nexport default connect(mapStateToProps, null)(InvoicesList)","import React from \"react\"\r\nimport ReactPaginate from 'react-paginate'\r\n\r\nimport UniversalTable from \"./UniversalTable\"\r\nimport { \r\n\tgetBackups, \r\n\tgetColors, \r\n\tgetMaterials, \r\n\tmakeBackup, \r\n\tsaveColors, \r\n\tsaveMaterials,\r\n\ttoBackup\r\n} from \"../api\"\r\n\r\nimport { \r\n\tForm, \r\n\tButton,\r\n\tButtonToolbar,\r\n\tButtonGroup,\r\n} from \"react-bootstrap\"\r\n\r\nimport {\r\n\tFaChevronLeft,\r\n\tFaChevronRight\r\n} from \"react-icons/fa\"\r\n\r\n// Styles\r\nimport \"../styles/SysSettings.scss\"\r\nimport { NotificationManager } from \"react-notifications\"\r\n\r\n\r\n\r\nexport default class SystemSetting extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tbackups: [],\r\n\r\n\t\t\t// pagination for backups\r\n\t\t\tcountItemsInPage: 5,\r\n\t\t\tcurrentPage: 1,\r\n\t\t\tmaxCountPages: 5\r\n\t\t}\r\n\r\n\t\tthis.columnColors = [\r\n\t\t\t{\r\n\t\t\t\ttext: 'ID',\r\n\t\t\t\tdataField: 'id',\r\n\t\t\t\tsort: true\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Цвет',\r\n\t\t\t\tdataField: 'color',\r\n\t\t\t}\r\n\t\t]\r\n\t\t\r\n\t\tthis.columnMaterials = [\r\n\t\t\t{\r\n\t\t\t\ttext: 'ID',\r\n\t\t\t\tdataField: 'id',\r\n\t\t\t\tsort: true\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Материал',\r\n\t\t\t\tdataField: 'material',\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n\r\n\thandleMakeBackup(e){\r\n\t\tmakeBackup((data) => {\r\n\t\t\tconsole.log(data)\r\n\t\t\tthis.setState({\r\n\t\t\t\tbackups: [data.fileName, ...this.state.backups]\r\n\t\t\t})\r\n\t\t}, (err) => console.log(err))\r\n\t}\r\n\r\n\ttoBackup(backupName){\r\n\t\twindow.confirm(\"Вы уверены, что хотите откатиться?\") && toBackup(backupName, \r\n\t\t\tdata => !data.error && NotificationManager.success(\"База данных успешно откатилась\", \"OK\", 3000), \r\n\t\t\terr => NotificationManager.error(\"Не удалось откататиться\", \"Ошибка\", 3000))\r\n\t}\r\n\r\n\t// --------------------------------------------------------------------------\r\n\t// ------------------------- Pagination Backups -----------------------------\r\n\t// --------------------------------------------------------------------------\r\n\r\n\tpickPage(page){\r\n\t\tthis.setState({ currentPage: page.selected + 1 })\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tgetBackups((data) => {\r\n\t\t\tconsole.log(data);\r\n\t\t\tthis.setState({ backups: data.data.sort() })\r\n\t\t}, (err) => console.log(err))\r\n\t}\r\n\r\n\trender(){\r\n\t\tconst backups = \r\n\t\t\tthis.state.backups.filter((_, index) => \r\n\t\t\t\tindex >= (this.state.currentPage - 1) * this.state.countItemsInPage && \r\n\t\t\t\tindex < (this.state.currentPage) * this.state.countItemsInPage)\r\n\r\n\t\t// panigation\r\n\t\tconst countPages = Math.ceil(this.state.backups.length / this.state.countItemsInPage)\r\n\r\n\t\treturn(\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<h1 style={{textAlign: \"center\", fontFamily: \"RobotoBold\", fontSize: \"1.5em\", marginBottom: \"20px\"}}>Системные настройки</h1>\r\n\t\t\t\t<div className=\"SystemSettings\">\r\n\t\t\t\t\t{/* COLORS TABLE */}\r\n\t\t\t\t\t<div className=\"slot slot_colors\">\r\n\t\t\t\t\t\t<UniversalTable\r\n\t\t\t\t\t\t\tclassName=\"colors\"\r\n\t\t\t\t\t\t\ttitle=\"Цвета\"\r\n\t\t\t\t\t\t\tcolumns={this.columnColors}\r\n\r\n\t\t\t\t\t\t\tgetDataFromAPI={getColors}\r\n\t\t\t\t\t\t\tsaveDataToAPI={saveColors}\r\n\r\n\t\t\t\t\t\t\toptPagination={true}\r\n\t\t\t\t\t\t\tenableNewRow={true}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* MATERIALS TABLE */}\r\n\t\t\t\t\t<div className=\"slot slot_materials\">\r\n\t\t\t\t\t\t<UniversalTable\r\n\t\t\t\t\t\t\tclassName=\"materials\"\r\n\t\t\t\t\t\t\ttitle=\"Материалы\"\r\n\t\t\t\t\t\t\tcolumns={this.columnMaterials}\r\n\r\n\t\t\t\t\t\t\tgetDataFromAPI={getMaterials}\r\n\t\t\t\t\t\t\tsaveDataToAPI={saveMaterials}\r\n\r\n\t\t\t\t\t\t\toptPagination={true}\r\n\t\t\t\t\t\t\tenableNewRow={true}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* BACKUPS LIST */}\r\n\t\t\t\t\t<div className=\"slot slot_backups\">\r\n\t\t\t\t\t\t<h2>База данных</h2>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<p>Бэкапы <button className=\"btn btn-primary\" onClick={e => this.handleMakeBackup(e)}>Сделать бэкап</button></p>\r\n\t\t\t\t\t\t<ul className=\"slot_backups_list\">\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tbackups.map(backupName => {\r\n\t\t\t\t\t\t\t\t\treturn <li className=\"backups_item\">\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"backups_item_filename\">{backupName.split(\".\").filter((_, index) => index < 5).join(\".\")}</span>\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"btn btn-danger\" onClick={e => this.toBackup(backupName)}>Откатить</button>\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</ul>\r\n\r\n\t\t\t\t\t\t<div className=\"pagination-wrapper\">\r\n\t\t\t\t\t\t\t<Form.Select onChange={e => this.setState({ countItemsInPage: +e.target.value })} className=\"header-selects header-selects-year\" aria-label=\"Выберете айтомов\">\r\n\t\t\t\t\t\t\t\t<option value=\"10\" selected>Кол-во: 10</option>\r\n\t\t\t\t\t\t\t\t<option value=\"20\">Кол-во: 20</option>\r\n\t\t\t\t\t\t\t\t<option value=\"30\">Кол-во: 30</option>\r\n\t\t\t\t\t\t\t\t<option value=\"40\">Кол-во: 40</option>\r\n\t\t\t\t\t\t\t\t<option value=\"50\">Кол-во: 50</option>\r\n\t\t\t\t\t\t\t</Form.Select>\r\n\t\t\t\t\t\t\t<ReactPaginate\r\n\t\t\t\t\t\t\t\tpreviousLabel={<FaChevronLeft />}\r\n\t\t\t\t\t\t\t\tnextLabel={<FaChevronRight />}\r\n\t\t\t\t\t\t\t\tbreakLabel={'...'}\r\n\t\t\t\t\t\t\t\tbreakClassName={'break-me'}\r\n\t\t\t\t\t\t\t\tpageCount={countPages}\r\n\t\t\t\t\t\t\t\tmarginPagesDisplayed={2}\r\n\t\t\t\t\t\t\t\tpageRangeDisplayed={5}\r\n\t\t\t\t\t\t\t\tonPageChange={this.pickPage.bind(this)}\r\n\t\t\t\t\t\t\t\tcontainerClassName={'pagination'}\r\n\t\t\t\t\t\t\t\tactiveClassName={'active'}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{/* Colors table */}\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t)\r\n\t}\r\n}","import { ERole } from \"./redux/types\"\r\n\r\n// Components\r\nimport Login from \"./components/Login\"\r\nimport Registration from \"./components/Registration\"\r\nimport Order from \"./components/Order\"\r\nimport Tables from \"./components/Tables\"\r\nimport Users from \"./components/ManageUsers\"\r\nimport Home from \"./components/Home\"\r\nimport InvoicesList from \"./components/InvoicesList\"\r\nimport SystemSettings from \"./components/SystemSettings\"\r\n\r\nimport {\r\n\tFaPlus,\r\n\tFaList,\r\n\tFaTable,\r\n\tFaUser,\r\n\tFaSignInAlt,\r\n\tFaCogs\r\n} from \"react-icons/fa\"\r\n\r\nexport const routes = [\r\n\t{\r\n\t\tpath: \"/logout\",\r\n\t\tname: \"Выйти\",\r\n\t\trole_user: ERole.USER,\r\n\t\tisNavBar: false,\r\n\t\tisPrivate: true,\r\n\t\tcomponent: Login\r\n\t},\r\n\t{\r\n\t\tpath: \"/login\",\r\n\t\tname: \"Авторизация\",\r\n\t\trole_user: ERole.NON,\r\n\t\tisNavBar: false,\r\n\t\tisPrivate: false,\r\n\t\ticon: <FaSignInAlt />,\r\n\t\tcomponent: Login\r\n\t},\r\n\t{\r\n\t\tpath: \"/registration\",\r\n\t\tname: \"Регистрация\",\r\n\t\trole_user: ERole.NON,\r\n\t\tisNavBar: false,\r\n\t\tisPrivate: false,\r\n\t\ticon: <FaSignInAlt />,\r\n\t\tcomponent: Registration\r\n\t},\r\n\r\n\r\n\t{\r\n\t\tpath: \"/new_order\",\r\n\t\tname: \"Новый заказ\",\r\n\t\trole_user: ERole.USER,\r\n\t\tisNavBar: true,\r\n\t\tisPrivate: true,\r\n\t\ticon: <FaPlus />,\r\n\t\tcomponent: Order\r\n\t},\r\n\t{\r\n\t\tpath: \"/invoices\",\r\n\t\tname: \"Заказы\",\r\n\t\trole_user: ERole.USER,\r\n\t\tisNavBar: true,\r\n\t\tisPrivate: true,\r\n\t\tisExact: true,\r\n\t\ticon: <FaList />,\r\n\t\tcomponent: InvoicesList\r\n\t},\r\n\t{\r\n\t\tpath: \"/invoices/:year/:id\",\r\n\t\tname: \"Заказы\",\r\n\t\trole_user: ERole.USER,\r\n\t\tisExact: true,\r\n\t\tisNavBar: false,\r\n\t\tisPrivate: true,\r\n\t\ticon: <FaList />,\r\n\t\tcomponent: InvoicesList\r\n\t},\r\n\t{\r\n\t\tpath: \"/invoices/:year\",\r\n\t\tname: \"Заказы\",\r\n\t\trole_user: ERole.USER,\r\n\t\tisExact: true,\r\n\t\tisNavBar: false,\r\n\t\tisPrivate: true,\r\n\t\ticon: <FaList />,\r\n\t\tcomponent: InvoicesList\r\n\t},\r\n\t{\r\n\t\tpath: \"/tables/prod\",\r\n\t\tname: \"Таблица для производства\",\r\n\t\trole_user: ERole.EDITOR,\r\n\t\tisNavBar: true,\r\n\t\tisPrivate: true,\r\n\t\ticon: <FaTable/>,\r\n\t\tcomponent: Tables\r\n\t},\r\n\t{\r\n\t\tpath: \"/tables/control\",\r\n\t\tname: \"Таблица для отслеживания\",\r\n\t\trole_user: ERole.EDITOR,\r\n\t\tisNavBar: true,\r\n\t\tisPrivate: true,\r\n\t\ticon: <FaTable/>,\r\n\t\tcomponent: Tables\r\n\t},\r\n\t{\r\n\t\tpath: \"/users\",\r\n\t\tname: \"Управление пользователями\",\r\n\t\trole_user: ERole.ADMIN,\r\n\t\tisNavBar: true,\r\n\t\tisPrivate: true,\r\n\t\ticon: <FaUser/>,\r\n\t\tcomponent: Users\r\n\t},\r\n\t{\r\n\t\tpath: \"/settings\",\r\n\t\tname: \"Системные настройки\",\r\n\t\trole_user: ERole.USER,\r\n\t\tisNavBar: true,\r\n\t\tisPrivate: true,\r\n\t\ticon: <FaCogs/>,\r\n\t\tcomponent: SystemSettings\r\n\t},\r\n\t{\r\n\t\tpath: \"/\",\r\n\t\tname: \"Главная\",\r\n\t\trole_user: ERole.USER,\r\n\t\tisNavBar: false,\r\n\t\tcomponent: Home\r\n\t},\r\n]","import React from \"react\"\nimport { NotificationContainer } from \"react-notifications\"\nimport {\n  HashRouter as Router,\n  Switch,\n  Route\n} from \"react-router-dom\"\n\n// Components\nimport SideBar from \"./components/SideBar\"\nimport Header from \"./components/Header\"\nimport Authorization from \"./hoc/authorization\"\n\n// redux and API\nimport { auth } from \"./api\"\nimport { addUser } from \"./redux/actions/users.action\"\nimport { authUser } from \"./redux/actions/app.action\"\nimport { routes } from \"./routes\"\nimport { connect } from \"react-redux\"\n\n// styles\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'react-notifications/lib/notifications.css';\nimport './styles/App.scss';\nimport './styles/__responsive__.scss';\n// import 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\n\n\n\nclass App extends React.Component{\n\tconstructor(props){\n\t\tsuper(props)\n\n\t\tthis.state = {}\n\t}\n\n\tcomponentDidMount(){\n\t\t// Authorization and set token\n\t\tif(!!localStorage.getItem(\"token\")){\n\t\t\tauth(localStorage.getItem(\"token\"), res => {\n\t\t\t\tthis.setState({ auth: true, userActive: res.active })\n\t\t\t\tthis.props.addUser(res.login, res.name, res.role, res.active)\n\t\t\t\tthis.props.authUser(!res.error)\n\t\t\t\tlocalStorage.setItem(\"token\", res.jwt)\n\t\t\t}, err => this.setState({ auth: false, userActive: 0 }) )\n\t\t}\n\t\telse{\n\t\t\tthis.props.authUser(false)\n\t\t\tthis.setState({ auth: false, userActive: 0 })\n\t\t}\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Router>\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<Header />\n\t\t\t\t\t<SideBar routes={routes.filter(route => route.isNavBar || (route.isPrivate !== undefined && !route.isPrivate))} />\n\t\t\t\t\t<NotificationContainer />\n\n\t\t\t\t\t<main>\n\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t{routes.map(route => {\n\t\t\t\t\t\t\t\tconst component = \n\t\t\t\t\t\t\t\t\troute.isPrivate && (!this.props.auth || !this.props.user.active || route.role_user < this.props.user.role)?\n\t\t\t\t\t\t\t\t\t\tAuthorization(route.component):\n\t\t\t\t\t\t\t\t\t\troute.component\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\tkey={route.path}\n\t\t\t\t\t\t\t\t\tpath={route.path}\n\t\t\t\t\t\t\t\t\tcomponent={component}\n\t\t\t\t\t\t\t\t\texact={true}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Switch>\n\t\t\t\t\t</main>\n\t\t\t\t</React.Fragment>\n\t\t\t</Router>\n\t\t)\n\t}\n}\n\n\nconst mapDispatchToProps = dispatch => ({\n\taddUser: (login,  name, role, active) => dispatch(addUser(login,  name, role, active)),\n\tauthUser: (auth) => dispatch(authUser(auth))\n})\n\nconst mapStateToProps = state => ({\n\tuser: state.user,\n\tauth: state.app.authorization\n})\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)","import { NotificationManager } from \"react-notifications\"\r\n\r\nimport { sendDataUsersForSave } from \"../../api\"\r\nimport { ERole, USER } from \"../types\"\r\n\r\n\r\nconst initialStateUser = {\r\n\tlogin: null,\r\n\tname: null,\r\n\trole: ERole.ADMIN,\r\n\tactive: 1,\r\n\tchanges: []\r\n}\r\n\r\nexport const user = (state = initialStateUser, action) => {\r\n\tswitch(action.type){\r\n\t\tcase USER.ADD_USER:\r\n\t\t\treturn {\r\n\t\t\t\t...action.payload,\r\n\t\t\t\tchanges: []\r\n\t\t\t}\r\n\t\tcase USER.DELETE_USER:\r\n\t\t\treturn initialStateUser\r\n\r\n\t\tcase USER.ADD_CHANGE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tchanges: [...state.changes, action.payload]\r\n\t\t\t}\r\n\t\tcase USER.SAVE_CHANGES:\r\n\t\t\tsendDataUsersForSave(state.changes, (res) => {\r\n\t\t\t\tif(!res.error) NotificationManager.success(\"Данные сохранены!\", \"OK\", 3000)\r\n\t\t\t\telse NotificationManager.warning(\"Что-то пошло не так\", \"Ошибка\", 3000)\r\n\t\t\t}, err => NotificationManager.warning(\"Кажется, ошибка на сервере\", \"Ошибка\", 3000))\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tchanges: []\r\n\t\t\t}\r\n\t\tdefault: \r\n\t\t\treturn state\r\n\t}\r\n}","import { NotificationManager } from \"react-notifications\"\r\n\r\nimport { APP } from \"../types\"\r\nimport { sendInvoicesChanges } from \"../../api\"\r\n\r\nconst initialStateApp = {\r\n\tauthorization: true,\r\n\tinvoicesChanges: []\r\n}\r\n\r\nexport const app = (state = initialStateApp, action) => {\r\n\tswitch(action.type){\r\n\t\tcase APP.AUTH:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tauthorization: action.payload\r\n\t\t\t}\r\n\t\tcase APP.LOGOUT:\r\n\t\t\tlocalStorage.removeItem(\"token\")\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tauthorization: action.payload\r\n\t\t\t}\r\n\t\tcase APP.INVOICE_ADD_CHANGE:\r\n\t\t\t// check with contains change in stack invoices' changes\r\n\t\t\tlet containsIndex = -1\r\n\t\t\tstate.invoicesChanges.map((change, index) => { \r\n\t\t\t\tif(change.type === \"CHANGE\" &&\r\n\t\t\t\t\tchange.payload.col === action.payload.payload.col && \r\n\t\t\t\t\tchange.payload.id === action.payload.payload.id)\r\n\t\t\t\t\t\treturn (containsIndex = index)\r\n\t\t\t})\r\n\t\t\tconsole.log(containsIndex, ~containsIndex === 0)\r\n\t\t\tif(~containsIndex === 0)\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tinvoicesChanges: [...state.invoicesChanges, action.payload]\r\n\t\t\t\t}\r\n\t\t\telse\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tinvoicesChanges: state.invoicesChanges.reduce(\r\n\t\t\t\t\t\t(prev, curr, index) => { \r\n\t\t\t\t\t\t\treturn index !== containsIndex? [...prev, curr]: [...prev, action.payload]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t[]\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\r\n\t\tcase APP.INVOICE_SAVE_CHANGES:\r\n\t\t\tsendInvoicesChanges(action.payload, state.invoicesChanges, res => {\r\n\t\t\t\tif(res.error) NotificationManager.warning(\"Кажется, ошибка на сервере\", \"Ошибка\", 3000)\r\n\t\t\t\telse NotificationManager.success(\"Данные успешно сохранены\", \"ОК\", 3000)\r\n\t\t\t}, err => NotificationManager.warning(\"Кажется, ошибка на сервере\", \"Ошибка\", 3000))\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tinvoicesChanges: []\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","import { NotificationManager } from \"react-notifications\"\r\n\r\nimport { sendDataTablesForSave } from \"../../api\"\r\nimport { TABLES } from \"../types\"\r\n\r\nconst initTablesState = {\r\n\tchanges: []\r\n}\r\n\r\nexport const tables = (state = initTablesState, action) => {\r\n\tswitch(action.type){\r\n\t\tcase TABLES.EDIT_CELL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tchanges: [...state.changes, action.payload]\r\n\t\t\t}\r\n\t\tcase TABLES.SAVE_DATA:\r\n\t\t\tsendDataTablesForSave(action.payload.url, state.changes, (res) => {\r\n\t\t\t\tif(!res.error) NotificationManager.success(\"Данные сохранены!\", \"OK\", 3000)\r\n\t\t\t\telse NotificationManager.warning(\"Что-то пошло не так\", \"Ошибка\", 3000)\r\n\t\t\t}, err => NotificationManager.warning(\"Кажется, ошибка на сервере\", \"Ошибка\", 3000))\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tchanges: []\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","import { combineReducers } from 'redux'\r\nimport { user } from \"./user.reducer\"\r\nimport { app } from \"./app.reducer\"\r\nimport { tables } from \"./tables.reducer\"\r\n\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n\tapp,\r\n\tuser,\r\n\ttables\r\n})\r\n \r\nexport default rootReducer","import { createStore, applyMiddleware } from 'redux'\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\n\r\nimport rootReducer from './reducers'\r\n\r\n// This middleware will just add the property \"async dispatch\" to all actions\r\nconst asyncDispatchMiddleware = store => next => action => {\r\n\tlet syncActivityFinished = false;\r\n\tlet actionQueue = [];\r\n\r\n\tfunction flushQueue() {\r\n\t\tactionQueue.forEach(a => store.dispatch(a)); // flush queue\r\n\t\tactionQueue = [];\r\n\t}\r\n\r\n\t\tfunction asyncDispatch(asyncAction) {\r\n\t\t\tactionQueue = actionQueue.concat([asyncAction]);\r\n\r\n\t\t\tif (syncActivityFinished)\r\n\t\t\t\tflushQueue();\r\n\t\t}\r\n\r\n\tconst actionWithAsyncDispatch = Object.assign({}, action, { asyncDispatch });\r\n\r\n\tconst res = next(actionWithAsyncDispatch);\r\n\r\n\tsyncActivityFinished = true;\r\n\tflushQueue();\r\n\r\n\treturn res;\r\n};\r\n\r\n\r\nconst composeEnhancers = composeWithDevTools({ \r\n\ttrace: true, \r\n\ttraceLimit: 25 \r\n}); \r\n\r\n\r\nconst store = createStore(rootReducer, composeEnhancers(\r\n\tapplyMiddleware(thunkMiddleware, asyncDispatchMiddleware)\r\n))\r\n\r\n\r\n// The store now has the ability to accept thunk functions in `dispatch`\r\nexport default store","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from \"react-redux\"\n\nimport App from './App.jsx';\nimport store from \"./redux/store\"\n\nimport \"./styles/reset.scss\"\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)"],"sourceRoot":""}