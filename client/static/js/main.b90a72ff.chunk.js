(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{117:function(e,t,a){},122:function(e,t,a){},202:function(e,t,a){},203:function(e,t,a){},204:function(e,t,a){},207:function(e,t,a){},209:function(e,t,a){},210:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),r=a(28),s=a.n(r),c=a(21),l=a(13),o=a(14),u=a(16),d=a(15),h=a(9),b=a(29),j=a(20),p=(a(117),a(0)),v=a(1);var m=Object(c.b)((function(e){return{user:e.user,auth:e.app.authorization}}),null)((function(e){return Object(v.jsxs)("div",{className:"sidebar",children:[Object(v.jsx)("div",{className:"logo_wrapper",children:Object(v.jsx)(b.b,{to:"/",children:Object(v.jsx)("span",{className:"logo",children:"FornitureWorker"})})}),Object(v.jsxs)("ul",{className:"sidebar_ul",children:[e.routes.map((function(t){if(t.isPrivate&&t.role_user>=e.user.role&&e.user.active&&e.auth)return Object(v.jsx)("li",{children:Object(v.jsx)(p.b.Provider,{value:{color:"white",className:"icon_header"},children:Object(v.jsxs)(b.b,{to:t.path,children:[t.icon,t.name]})})},t.path)})),e.routes.map((function(t){if(!t.isPrivate&&!e.auth)return Object(v.jsx)("li",{children:Object(v.jsx)(p.b.Provider,{value:{color:"white",className:"icon_header"},children:Object(v.jsxs)(b.b,{to:t.path,children:[t.icon,t.name]})})},t.path)}))]})]})})),f=a(216),O=a(19),g=0,x=1,y=3,N=999,k="USER/ADD",_="USER/DELETE",w="USERS/ADD_CHANGE",C="USERS/SAVE_CHANGES",S="APP/AUTH",I="APP/LOGOUT",P="APP/INVOICE_ADD_CHANGE",F="APP/INVOICE_SAVE_CHANGES",D="TABLES/EDIT_CELL",A="TABLES/SAVE_DATA",E=function(e,t,a,n){return{type:k,payload:{login:e,name:t,role:a,active:n}}},R=function(e){return{type:S,payload:e}};a(122);var T=Object(c.b)((function(e){return{user:e.user,auth:e.app.authorization}}),(function(e){return{logoutUser:function(){return e({type:I,payload:!1})},deleteUser:function(){return e({type:_})}}}))((function(e){return Object(v.jsx)("header",{className:"main_header",children:e.auth&&Object(v.jsxs)(f.a,{children:[Object(v.jsx)(f.a.Toggle,{variant:"success",id:"dropdown-basic",children:e.user.login}),Object(v.jsxs)(f.a.Menu,{children:[Object(v.jsxs)(b.b,{className:"dropdown-item",to:"/my_settings",children:[Object(v.jsx)(O.c,{style:{marginRight:"5px"}}),"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"]}),Object(v.jsxs)(b.b,{className:"dropdown-item",to:"/",onClick:function(t){e.logoutUser(),e.deleteUser()},children:[Object(v.jsx)(O.h,{style:{marginRight:"5px"}}),"\u0412\u044b\u0439\u0442\u0438"]})]})]})})})),M=a(3),B=function(e,t){return function(a){Object(u.a)(i,a);var n=Object(d.a)(i);function i(){return Object(l.a)(this,i),n.apply(this,arguments)}return Object(o.a)(i,[{key:"render",value:function(){return t?Object(v.jsx)(e,Object(M.a)({},this.props)):Object(v.jsx)(j.a,{to:"/login"})}}]),i}(i.a.Component)},L=a(67),G=a.n(L),U=a(7),H=function(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];G.a.get(e,{params:Object(M.a)(Object(M.a)({},t),{},{token:localStorage.getItem("token")}),responseType:i?"blob":"json"}).then((function(e){return a(e.data)})).catch((function(e){return n(e.response)}))},W=function(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];G.a.post(e,Object(M.a)(Object(M.a)({},t),{},{token:localStorage.getItem("token")}),{responseType:i?"blob":"json"}).then((function(e){a(e.data)})).catch((function(e){n(e.response)}))},V=function(e,t){H(U.a+U.b.urlGetUsers,{},e,t)},K=function(e,t,a,n){W(U.a+e,{data:t},a,n)},z=function(e,t,a){W(U.a+U.b.urlSaveUserTable,{data:e},t,a)},Y=function(e,t,a){H(U.a+U.b.urlGetInvoices,{type:"main",year:e},t,a)},q=function(e,t,a){H(U.a+U.b.urlGetInvoiceDOCX,{ids:e},t,a,!0)},J=function(e,t,a,n){W(U.a+U.b.urlSendInvoiceChanges,Object(M.a)({data:t},e),a,n)},X=function(e,t){H(U.a+U.b.urlGetColors,{},e,t)},Q=function(e,t,a){W(U.a+U.b.urlSaveColors,{changes:e},t,a)},Z=function(e,t){H(U.a+U.b.urlGetMaterials,{},e,t)},$=function(e,t,a){W(U.a+U.b.urlSaveMaterials,{changes:e},t,a)},ee=a(217),te=a(100),ae=(a(79),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).login=i.a.createRef(),n.password=i.a.createRef(),n}return Object(o.a)(a,[{key:"onLogin",value:function(e){var t,a,n,i=this;e.preventDefault(),t={login:this.login.current.value,password:this.password.current.value},a=function(e){console.log(e),e.error?h.NotificationManager.warning("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c","\u041e\u0448\u0438\u0431\u043a\u0430",3e3):(localStorage.setItem("token",e.jwt),h.NotificationManager.success("\u0412\u044b \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b!","OK",3e3),i.props.addUser(e.login,e.name,e.role,e.active),i.props.authUser(!0),i.props.history.push("/"))},n=function(e){h.NotificationManager.warning("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435(","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)},W(U.a+U.b.urlLogin,t,a,n)}},{key:"render",value:function(){return Object(v.jsx)("div",{className:"main",children:Object(v.jsxs)(ee.a,{className:"login-form",style:{display:"flex",flexDirection:"column",width:"400px"},children:[Object(v.jsx)("h2",{children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(v.jsx)(te.a,{controlId:"floatingInput",label:"\u041b\u043e\u0433\u0438\u043d",className:"mb-12",children:Object(v.jsx)(ee.a.Control,{ref:this.login,type:"text",placeholder:"\u0418\u0432\u0430\u043d\u043e\u0432 \u0418\u0432\u0430\u043d \u0418\u0432\u0430\u043d\u043e\u0432\u0438\u0447",name:"login",autoFocus:!0})}),Object(v.jsx)(te.a,{controlId:"floatingInput",label:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"mb-12",children:Object(v.jsx)(ee.a.Control,{ref:this.password,type:"password",placeholder:"Login",name:"password"})}),Object(v.jsx)("button",{className:"btn btn-primary",onClick:this.onLogin.bind(this),children:"\u0412\u043e\u0439\u0442\u0438"})]})})}}]),a}(i.a.Component));ae.contextTypes={router:function(){return!0}};var ne=Object(c.b)((function(e){return{auth:e.app.authorization}}),(function(e){return{addUser:function(t,a,n,i){return e(E(t,a,n,i))},authUser:function(t){return e(R(t))}}}))(ae),ie=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n.name=i.a.createRef(),n.login=i.a.createRef(),n.role=i.a.createRef(),n.password=i.a.createRef(),n.repeatePassword=i.a.createRef(),n}return Object(o.a)(a,[{key:"validateField",value:function(e,t){switch(e){case"\u0424\u0418\u041e":return t.length>=3;case"\u041b\u043e\u0433\u0438\u043d":return t.length>=4;case"\u041f\u0430\u0440\u043e\u043b\u044c":return t.length>8}}},{key:"onBlurInput",value:function(e,t){console.log(this.validateField(t,e.target.value)),!this.validateField(t,e.target.value)&&h.NotificationManager.warning("\u0412\u044b \u0432\u0432\u0435\u043b\u0438 \u043d\u0435\u043a\u043e\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435: ".concat(t),"\u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435",2e3)}},{key:"registrationUser",value:function(e){var t=this;(e.preventDefault(),this.repeatePassword.current.value===this.password.current.value)?function(e,t,a){W(U.a+U.b.urlRegistration,e,t,a)}({name:this.name.current.value,login:this.login.current.value,role:this.role.current.value,password:this.password.current.value},(function(e){localStorage.setItem("token",e.jwt),t.props.history.push("/"),h.NotificationManager.success("\u0412\u0430\u0448 \u0430\u043a\u043a\u0430\u0443\u043d\u0442 \u0432 \u0411\u0414! \u0422\u0435\u043f\u0435\u0440\u044c \u0434\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e\u0431\u044b \u0432\u0430\u0448 \u0430\u043a\u043a\u0430\u0443\u043d\u0442 \u0430\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043b\u0438","\u041e\u043a!",3e3)}),(function(e){return h.NotificationManager.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430!","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)})):h.NotificationManager.warning("\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442!","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)}},{key:"render",value:function(){var e=this;return Object(v.jsx)("div",{className:"main",children:Object(v.jsxs)(ee.a,{className:"registration-form",style:{display:"flex",flexDirection:"column",width:"400px"},children:[Object(v.jsx)("h2",{children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(v.jsx)(te.a,{controlId:"floatingInput",label:"\u0424\u0418\u041e",className:"mb-12",children:Object(v.jsx)(ee.a.Control,{ref:this.name,type:"text",placeholder:"\u0418\u0432\u0430\u043d\u043e\u0432 \u0418\u0432\u0430\u043d \u0418\u0432\u0430\u043d\u043e\u0432\u0438\u0447",onBlur:function(t){return e.onBlurInput(t,"\u0424\u0418\u041e")},autoFocus:!0})}),Object(v.jsx)(te.a,{controlId:"floatingInput",label:"\u041b\u043e\u0433\u0438\u043d",className:"mb-12",children:Object(v.jsx)(ee.a.Control,{ref:this.login,type:"text",placeholder:"Login",onBlur:function(t){return e.onBlurInput(t,"\u041b\u043e\u0433\u0438\u043d")}})}),Object(v.jsxs)(ee.a.Select,{name:"",id:"",ref:this.role,children:[Object(v.jsx)("option",{value:"3",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"}),Object(v.jsx)("option",{value:"2",children:"\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440"}),Object(v.jsx)("option",{value:"1",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440"}),Object(v.jsx)("option",{value:"0",children:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"})]}),Object(v.jsx)(te.a,{controlId:"floatingInput",label:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"mb-12",children:Object(v.jsx)(ee.a.Control,{ref:this.password,type:"password",placeholder:"\u0418\u0432\u0430\u043d\u043e\u0432 \u0418\u0432\u0430\u043d \u0418\u0432\u0430\u043d\u043e\u0432\u0438\u0447",onBlur:function(t){return e.onBlurInput(t,"\u041f\u0430\u0440\u043e\u043b\u044c")}})}),Object(v.jsx)(te.a,{controlId:"floatingInput",label:"\u041f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",className:"mb-12",children:Object(v.jsx)(ee.a.Control,{ref:this.repeatePassword,type:"password",placeholder:"\u0418\u0432\u0430\u043d\u043e\u0432 \u0418\u0432\u0430\u043d \u0418\u0432\u0430\u043d\u043e\u0432\u0438\u0447",autoFocus:!0})}),Object(v.jsx)("button",{className:"btn btn-primary",onClick:this.registrationUser.bind(this),children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})})}}]),a}(i.a.Component),re=a(6),se=(a(80),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={id:-1,name:"",count:1,price:0,allPrice:0,colors:[],materials:[]},n.refColor=i.a.createRef(),n.refMaterial=i.a.createRef(),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({id:this.props.id}),Z((function(t){e.setState({materials:t.data})}),(function(e){})),X((function(t){e.setState({colors:t.data})}),(function(e){}))}},{key:"reCalcAllPrice",value:function(e,t){switch(t){case 0:return this.state.price*e;case 1:return e*this.state.count;default:return 0}}},{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeCount",value:function(e){this.setState({count:+e.target.value,allPrice:this.reCalcAllPrice(+e.target.value,0)})}},{key:"onChangeMainPrice",value:function(e){this.setState({price:+e.target.value,allPrice:this.reCalcAllPrice(+e.target.value,1)})}},{key:"validate",value:function(e){}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"order_panel",children:[Object(v.jsx)("div",{className:"order_panel_close",onClick:function(t){return e.props.deleteOrderFromArrayById(e.state.id)},children:Object(v.jsx)(O.k,{})}),Object(v.jsxs)("form",{className:"oreder_panel_main_info",action:"javascript:0",children:[Object(v.jsxs)("span",{className:"order_panel_id",children:["#",this.props.id+1]}),Object(v.jsx)(te.a,{style:{width:"40%"},controlId:"floatingInput",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",className:"mb-12",children:Object(v.jsx)(ee.a.Control,{ref:this.name,type:"text",name:"name",placeholder:"\u0421\u0442\u0443\u043b",onChange:this.onChangeName.bind(this),minLength:3,required:!0})}),Object(v.jsxs)(ee.a.Select,{style:{width:"12%"},ref:this.refMaterial,"aria-label":"Default select example",className:"order_panel_select select_material",children:[Object(v.jsx)("option",{value:"-",children:"\u041c\u0430\u0442\u0435\u0440."}),this.state.materials.map((function(e){return Object(v.jsx)("option",{value:e.material,children:e.material})}))]}),Object(v.jsxs)(ee.a.Select,{style:{width:"10%"},ref:this.refColor,"aria-label":"Default select example",className:"order_panel_select select_color",children:[Object(v.jsx)("option",{value:"-",children:"\u0426\u0432\u0435\u0442"}),this.state.colors.map((function(e){return Object(v.jsx)("option",{value:e.color,children:e.color})}))]}),Object(v.jsx)(te.a,{style:{width:"8%"},controlId:"floatingInput",label:"\u041a\u043e\u043b",className:"mb-12",children:Object(v.jsx)(ee.a.Control,{min:1,max:1e7,ref:this.count,type:"number",placeholder:"4",defaultValue:1,onChange:this.onChangeCount.bind(this),required:!0})}),Object(v.jsx)(te.a,{style:{width:"14%"},controlId:"floatingInput",label:"\u0426\u0435\u043d\u0430",className:"mb-12",children:Object(v.jsx)(ee.a.Control,{min:0,max:1e7,ref:this.price,type:"number",placeholder:"540",defaultValue:0,onChange:this.onChangeMainPrice.bind(this),required:!0})}),Object(v.jsx)(te.a,{style:{width:"14%"},controlId:"floatingInput",label:"\u0421\u0443\u043c\u043c\u0430",className:"mb-12",children:Object(v.jsx)(ee.a.Control,{disabled:!0,ref:this.price,type:"number",placeholder:"540",value:this.state.price*this.state.count,onChange:this.onChangeMainPrice.bind(this),required:!0})}),Object(v.jsx)("button",{className:"btn btn-primary apply_order",onClick:function(t){return e.props.addOrderToArray(t,{id:e.state.id,name:e.state.name,count:e.state.count,price:e.state.price,allPrice:e.state.allPrice,color:e.refColor.current.value,material:e.refMaterial.current.value})},children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"})]})]})}}]),a}(i.a.Component)),ce=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).stateOrderPanel={id:0,name:"",size:"",count:0,price:0,allPrice:0},n.state={additional_info_active:!1,numberOrder:0,additional:{delivery:!1,assembly:!1,entering:!1,assemblyAndEntering:!1},orders:[n.stateOrderPanel],allPrice:0,validatation:[]},n.client_name=i.a.createRef(),n.client_phone=i.a.createRef(),n.client_address=i.a.createRef(),n.siteName=i.a.createRef(),n.week=i.a.createRef(),n.dateDelivery=i.a.createRef(),n.year=i.a.createRef(),n.delivery_price=i.a.createRef(),n.assembly_price=i.a.createRef(),n.entering_price=i.a.createRef(),n.assemblyAndEntering_price=i.a.createRef(),n}return Object(o.a)(a,[{key:"onClickAddOrder",value:function(e){this.setState({orders:[].concat(Object(re.a)(this.state.orders),[this.stateOrderPanel])})}},{key:"onClickAdditionalInfo",value:function(){this.setState({additional_info_active:!this.state.additional_info_active})}},{key:"onChangeDelivery",value:function(e){this.setState({additional:Object(M.a)(Object(M.a)({},this.state.additional),{},{delivery:e.target.checked})})}},{key:"onChangeAssembly",value:function(e){this.setState({additional:Object(M.a)(Object(M.a)({},this.state.additional),{},{assembly:e.target.checked})})}},{key:"onChangeEntering",value:function(e){this.setState({additional:Object(M.a)(Object(M.a)({},this.state.additional),{},{entering:e.target.checked})})}},{key:"onChangeAssemblyAndEntering",value:function(e){this.setState({additional:Object(M.a)(Object(M.a)({},this.state.additional),{},{assemblyAndEntering:e.target.checked})})}},{key:"addOrderToArray",value:function(e,t){e.preventDefault(),console.log(t);var a=this.state.orders;a[t.id]=t,this.setState({orders:a,allPrice:a.reduce((function(e,t){return e+t.allPrice}),0)})}},{key:"deleteOrderFromArrayById",value:function(e){if(window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b? \u0414\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430 \u043d\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f.")){var t=this.state.orders;t.splice(e,1),this.setState({orders:t})}}},{key:"onSendThisOrder",value:function(e){if(e.preventDefault(),0===this.state.validatation.length){var t={name:this.client_name.current.value,phone:this.client_phone.current.value,address:this.client_address.current.value},a={siteName:this.siteName.current.value,week:+this.week.current.value,dateDelivery:this.dateDelivery.current.value,id:this.state.numberOrder,year:+this.year.current.value,delivery:this.state.additional.delivery,assembly:this.state.additional.assembly,entering:this.state.additional.entering,assemblyAndEntering:this.state.additional.assemblyAndEntering,delivery_price:this.delivery_price.current.value,assembly_price:this.assembly_price.current.value,entering_price:this.entering_price.current.value,assemblyAndEntering_price:this.assemblyAndEntering_price.current.value};n=t,i=a,r=this.state.orders,s=function(e){h.NotificationManager.success("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b","OK",3e3)},c=function(e){return h.NotificationManager.warning("\u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438\u0441\u044c.","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)},W(U.a+U.b.urlNewOrder,{client:n,additional:i,orders:r},s,c)}else h.NotificationManager.error("\u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b","\u041e\u0448\u0438\u0431\u043a\u0430",3e3);var n,i,r,s,c}},{key:"onPressWeekInput",value:function(e){var t,a,n,i,r=this;"Enter"===e.key&&(e.preventDefault(),t=this.week.current.value,a=this.year.current.value,n=function(e){r.setState({numberOrder:e.id})},i=function(e){console.log(e)},H(U.a+U.b.urlNumberOrder,{week:t,year:a},n,i))}},{key:"validate",value:function(e){var t=this,a=function(e){return t.setState({validatation:[].concat(Object(re.a)(t.state.validatation),[e.target.name])})},n=function(e){return t.setState({validatation:t.state.validatation.filter((function(t){return e.target.name!==t}))})};switch(e.target.name){case"name":return void(e.target.value.length>3||"-"==e.target.value||"\u043d\u0435\u0442"==e.target.value.toLowerCase()?n(e):a(e));case"phone":return void(e.target.value.length>6?n(e):a(e));case"address":return void(e.target.value.length>3||"-"==e.target.value||"\u043d\u0435\u0442"==e.target.value.toLowerCase()?n(e):a(e));case"week":return void(+e.target.value>=1&&+e.target.value<=54&&Number(e.target.value)?n(e):a(e));case"date_deliver":return void(e.target.value.length>3||"-"==e.target.value||"\u043d\u0435\u0442"==e.target.value.toLowerCase()?n(e):a(e));default:console.log("Case don't registration")}}},{key:"render",value:function(){var e=this,t=function(e){return Object(v.jsxs)("p",{className:"FLabel_line"+(e.mark?" mark_bold":""),children:[Object(v.jsx)("span",{className:"line_key_span",children:e._key}),Object(v.jsx)("span",{className:"line_value_span",children:e.value})]})};return Object(v.jsx)(ee.a,{className:"Order_wrapper",action:"javascript:0",children:Object(v.jsxs)("div",{className:"Order",children:[Object(v.jsx)("h1",{children:"\u0424\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(v.jsx)("h2",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0435"}),Object(v.jsxs)("div",{className:"top_panel",children:[Object(v.jsxs)("div",{className:"order_form_user",children:[Object(v.jsx)(te.a,{hasValidation:!0,controlId:"floatingInput",label:"\u0424\u0418\u041e \u043a\u043b\u0438\u0435\u043d\u0442\u0430",className:"mb-12",children:Object(v.jsx)(ee.a.Control,{isInvalid:this.state.validatation.includes("name"),autoFocus:!0,ref:this.client_name,name:"name",type:"text",placeholder:"\u0418\u0432\u0430\u043d\u043e\u0432 \u0418\u0432\u0430\u043d \u0418\u0432\u0430\u043d\u043e\u0432\u0438\u0447",onBlur:function(t){return e.validate(t)},title:"\u0412\u043f\u0438\u0448\u0438\u0442\u0435 '-' \u0438\u043b\u0438 '\u043d\u0435\u0442', \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u0432\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e"})}),Object(v.jsx)(te.a,{hasValidation:!0,controlId:"floatingInput",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",className:"mb-12",children:Object(v.jsx)(ee.a.Control,{required:!0,isInvalid:this.state.validatation.includes("phone"),ref:this.client_phone,name:"phone",type:"tel",placeholder:"8 123 456 78 90",onBlur:function(t){return e.validate(t)}})}),Object(v.jsx)(te.a,{hasValidation:!0,controlId:"floatingInput",label:"\u0410\u0434\u0440\u0435\u0441",className:"mb-12",children:Object(v.jsx)(ee.a.Control,{isInvalid:this.state.validatation.includes("address"),onBlur:function(t){return e.validate(t)},ref:this.client_address,type:"text",name:"address",title:"\u0412\u043f\u0438\u0448\u0438\u0442\u0435 '-' \u0438\u043b\u0438 '\u043d\u0435\u0442', \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u0432\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e",placeholder:"\u0433. \u041c\u0443\u0440\u043e\u043c, \u0443\u043b. \u041b\u0435\u043d\u0438\u043d\u0430, 19, \u043a\u0432. 9"})})]}),Object(v.jsxs)("div",{className:"order_form_additional",children:[Object(v.jsxs)(ee.a.Select,{ref:this.siteName,"aria-label":"Default select example",className:"select_site",children:[Object(v.jsx)("option",{children:"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0441\u0430\u0439\u0442"}),Object(v.jsx)("option",{value:"Krovati-spalni.ru",children:"Krovati-spalni.ru"}),Object(v.jsx)("option",{value:"\u043c\u0435\u0431\u0435\u043b\u044c\u0438\u0437\u0441\u043e\u0441\u043d\u044b.\u0440\u0444",children:"\u043c\u0435\u0431\u0435\u043b\u044c\u0438\u0437\u0441\u043e\u0441\u043d\u044b.\u0440\u0444"}),Object(v.jsx)("option",{value:"Liman-murom.ru",children:"Liman-murom.ru"})]}),Object(v.jsxs)("div",{className:"within",children:[Object(v.jsxs)(ee.a.Select,{ref:this.year,"aria-label":"year",className:"select_year",children:[Object(v.jsx)("option",{children:"\u0413\u043e\u0434"}),Object(v.jsx)("option",{value:"2021",selected:!0,children:"2021"}),Object(v.jsx)("option",{value:"2022",children:"2022"})]}),Object(v.jsx)(te.a,{controlId:"floatingInput",label:"\u2116 \u043d\u0435\u0434\u0435\u043b\u0438",className:"mb-12",children:Object(v.jsx)(ee.a.Control,{isInvalid:this.state.validatation.includes("week"),onBlur:function(t){return e.validate(t)},name:"week",ref:this.week,className:"within_input",type:"number",placeholder:"33",onKeyDown:this.onPressWeekInput.bind(this),required:!0})}),Object(v.jsx)(te.a,{controlId:"floatingInput",label:"\u2116 \u0437\u0430\u043a\u0430\u0437\u0430",className:"mb-12",children:Object(v.jsx)(ee.a.Control,{value:this.state.numberOrder,className:"within_input",disabled:!0,type:"number",title:"\u0412\u043f\u0438\u0448\u0438\u0442\u0435 \u2116 \u043d\u0435\u0434\u0435\u043b\u0438 \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 Enter",placeholder:"34"})})]}),Object(v.jsx)(te.a,{hasValidation:!0,controlId:"floatingInput",label:"\u0414\u0430\u0442\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",className:"mb-12",children:Object(v.jsx)(ee.a.Control,{isInvalid:this.state.validatation.includes("date_deliver"),onBlur:function(t){return e.validate(t)},ref:this.dateDelivery,type:"text",name:"date_deliver",title:"\u0412\u043f\u0438\u0448\u0438\u0442\u0435 '-' \u0438\u043b\u0438 '\u043d\u0435\u0442', \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u0432\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e",placeholder:"34.4.2032"})})]})]}),Object(v.jsx)("h2",{children:"\u0417\u0430\u043a\u0430\u0437\u044b"}),this.state.orders.map((function(t,a){return Object(v.jsx)(se,{id:a,deleteOrderFromArrayById:e.deleteOrderFromArrayById.bind(e),addOrderToArray:e.addOrderToArray.bind(e)})})),Object(v.jsx)("button",{onClick:this.onClickAddOrder.bind(this),className:"btn btn-primary button_add_order",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}),Object(v.jsxs)("p",{className:"dfrowaic",style:{cursor:"pointer",marginTop:"10px"},onClick:this.onClickAdditionalInfo.bind(this),children:["\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e ",this.state.additional_info_active?Object(v.jsx)(v.Fragment,{children:":"}):Object(v.jsx)(O.i,{})]}),Object(v.jsxs)("div",{className:"additional_info",style:{display:this.state.additional_info_active?"block":"none"},children:[Object(v.jsx)(ee.a.Check,{type:"checkbox",id:"delivery",label:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{children:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430"}),Object(v.jsxs)("span",{className:"price_grey",children:[Object(v.jsx)("input",{className:"form-control",min:0,max:1e6,ref:this.delivery_price,type:"number"}),"\u0440\u0443\u0431"]})]}),onChange:this.onChangeDelivery.bind(this)}),Object(v.jsx)(ee.a.Check,{type:"checkbox",id:"assembly",label:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{children:"\u0421\u0431\u043e\u0440\u043a\u0430"}),Object(v.jsxs)("span",{className:"price_grey",children:[Object(v.jsx)("input",{className:"form-control",min:0,max:1e6,ref:this.assembly_price,type:"number"}),"\u0440\u0443\u0431"]})]}),onChange:this.onChangeAssembly.bind(this)}),Object(v.jsx)(ee.a.Check,{type:"checkbox",id:"entering",label:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{children:"\u0417\u0430\u043d\u043e\u0441"}),Object(v.jsxs)("span",{className:"price_grey",children:[Object(v.jsx)("input",{className:"form-control",min:0,max:1e6,ref:this.entering_price,type:"number"}),"\u0440\u0443\u0431"]})]}),onChange:this.onChangeEntering.bind(this)}),Object(v.jsx)(ee.a.Check,{type:"checkbox",id:"assemblyAndEntering",label:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{children:"\u0421\u0431\u043e\u0440/\u0417\u0430\u043d\u043e\u0441"}),Object(v.jsxs)("span",{className:"price_grey",children:[Object(v.jsx)("input",{className:"form-control",min:0,max:1e6,ref:this.assemblyAndEntering_price,type:"number"}),"\u0440\u0443\u0431"]})]}),onChange:this.onChangeAssemblyAndEntering.bind(this)})]}),Object(v.jsx)("hr",{}),this.state.orders.map((function(e){return Object(v.jsx)(t,{_key:"\u0417\u0430\u043a\u0430\u0437 #".concat(e.id+1),value:"".concat(e.allPrice," \u0440\u0443\u0431")})})),Object(v.jsx)(t,{mark:!0,_key:"\u0418\u0442\u043e\u0433",value:"".concat(this.state.allPrice," \u0440\u0443\u0431")}),Object(v.jsx)("button",{className:"btn btn-success button_send_order",onClick:this.onSendThisOrder.bind(this),children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})})}}]),a}(i.a.Component),le=Object(c.b)((function(e){return{prices:e.prices}}),null)(ce),oe=a(31),ue=a(35),de=a.n(ue),he=a(25),be=a.n(he),je=a(23),pe=a.n(je),ve=a(52),me=a.n(ve),fe=a(101),Oe=a.n(fe),ge=(a(202),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;function i(e,t){switch(t.status){case"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435":return Object(v.jsx)("span",{children:Object(v.jsx)("strong",{style:{color:"blue"},children:e})});case"\u041e\u0442\u043a\u0430\u0437":return Object(v.jsx)("span",{children:Object(v.jsx)("strong",{style:{color:"red"},children:e})});case"\u041e\u043f\u043b\u0430\u0447\u0435\u043d":return Object(v.jsx)("span",{children:Object(v.jsx)("strong",{style:{color:"green"},children:e})});default:return e}}Object(l.a)(this,a),(n=t.call(this,e)).state={data:[],title:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0434\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0430",tableName:"prod",exelTableData:[],year:(new Date).getFullYear(),colors:[],materials:[]};var r=function(e){return console.log(e),Number(e)||isNaN(e)?{valid:!1,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043b\u043e"}:!((""+e).length>7)||{valid:!1,message:"\u0412\u044b \u0432\u0432\u0435\u043b\u0438 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0435 \u0447\u0438\u0441\u043b\u043e"}};return n.prodColumns=function(e,t){return[{text:"\u2116 \u043d\u0435\u0434\u0435\u043b\u0438",dataField:"week",sort:!0,filter:Object(he.textFilter)(),validator:function(e,t,a){return r(e)},headerStyle:function(e,t){return{width:"7%"}}},{text:"\u2116 \u0437\u0430\u043a\u0430\u0437\u0430",dataField:"id_fc",sort:!0,filter:Object(he.textFilter)(),validator:function(e,t,a){return r(e)},headerStyle:function(e,t){return{width:"8%"}}},{text:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataField:"name",filter:Object(he.textFilter)(),headerStyle:function(e,t){return{width:"35%"}}},{text:"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b",dataField:"material",filter:Object(he.selectFilter)({options:e.reduce((function(e,t){return Object(M.a)(Object(M.a)({},e),{},Object(oe.a)({},t.material,t.material))}),{})}),editor:{type:je.Type.SELECT,options:[{value:"-",label:"\u041d\u0415\u0422"}].concat(Object(re.a)(e.reduce((function(e,t){return[].concat(Object(re.a)(e),[{label:t.material,value:t.material}])}),[])))},headerStyle:function(e,t){return{width:"10%"}}},{text:"\u0426\u0432\u0435\u0442",dataField:"color",filter:Object(he.textFilter)(),editor:{type:je.Type.SELECT,options:[{value:"-",label:"\u041d\u0415\u0422"}].concat(Object(re.a)(t.reduce((function(e,t){return[].concat(Object(re.a)(e),[{label:t.color,value:t.color}])}),[])))},headerStyle:function(e,t){return{width:"12%"}}},{text:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",dataField:"count",validator:function(e,t,a){r(e)},headerStyle:function(e,t){return{width:"9%"}}},{text:"\u0421\u0442\u0430\u0442\u0443\u0441",dataField:"status",formatter:i,filter:Object(he.selectFilter)({options:{"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435":"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435","\u041e\u0442\u043a\u0430\u0437":"\u041e\u0442\u043a\u0430\u0437","\u041e\u043f\u043b\u0430\u0447\u0435\u043d":"\u041e\u043f\u043b\u0430\u0447\u0435\u043d"}}),editor:{type:je.Type.SELECT,options:[{value:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435",label:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"},{value:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d",label:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d"},{value:"\u041e\u0442\u043a\u0430\u0437",label:"\u041e\u0442\u043a\u0430\u0437"}]}}]},n.controlColumns=[{text:"\u2116 \u043d\u0435\u0434.",dataField:"week",sort:!0,filter:Object(he.textFilter)(),validator:function(e,t,a){return r(e)},headerStyle:function(e,t){return{width:"8%"}}},{text:"\u2116 \u0437\u0430\u043a.",dataField:"id_fc",sort:!0,filter:Object(he.textFilter)(),validator:function(e,t,a){r(e)},headerStyle:function(e,t){return{width:"8%"}}},{text:"\u0421\u0430\u0439\u0442",dataField:"site_name",filter:Object(he.selectFilter)({options:{"Krovati-spalni.ru":"Krovati-spalni.ru","\u043c\u0435\u0431\u0435\u043b\u044c\u0438\u0437\u0441\u043e\u0441\u043d\u044b.\u0440\u0444":"\u043c\u0435\u0431\u0435\u043b\u044c\u0438\u0437\u0441\u043e\u0441\u043d\u044b.\u0440\u0444","Liman-murom.ru":"Liman-murom.ru"}}),headerStyle:function(e,t){return{width:"15%"}},editor:{type:je.Type.SELECT,options:[{value:"Krovati-spalni.ru",label:"Krovati-spalni.ru"},{value:"\u043c\u0435\u0431\u0435\u043b\u044c\u0438\u0437\u0441\u043e\u0441\u043d\u044b.\u0440\u0444",label:"\u043c\u0435\u0431\u0435\u043b\u044c\u0438\u0437\u0441\u043e\u0441\u043d\u044b.\u0440\u0444"},{value:"Liman-murom.ru",label:"Liman-murom.ru"}]}},{text:"\u0424\u0418\u041e",dataField:"client_name",filter:Object(he.textFilter)(),headerStyle:function(e,t){return{width:"15%"}}},{text:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",filter:Object(he.textFilter)(),dataField:"client_phone",headerStyle:function(e,t){return{width:"15%"}}},{text:"\u0410\u0434\u0440\u0435\u0441",filter:Object(he.textFilter)(),dataField:"client_address",headerStyle:function(e,t){return{width:"15%"}}},{text:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",dataField:"price",headerStyle:function(e,t){return{width:"8%"}},validator:function(e,t,a){return r(e)}},{text:"\u0421\u0442\u0430\u0442\u0443\u0441",dataField:"status",formatter:i,editor:{type:je.Type.SELECT,options:[{value:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435",label:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"},{value:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d",label:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d"},{value:"\u041e\u0442\u043a\u0430\u0437",label:"\u041e\u0442\u043a\u0430\u0437"}]},headerStyle:function(e,t){return{width:"8%"}}},{text:"\u041e\u0442\u0434\u0430\u043b\u0438",dataField:"paid",headerStyle:function(e,t){return{width:"6%"}},validator:function(e,t,a){return r(e)}},{text:"\u0414\u043e\u043b\u0433",dataField:"debt",validator:function(e,t,a){return r(e)},headerStyle:function(e,t){return{width:"6%"}}}],n}return Object(o.a)(a,[{key:"onSelectForExelTable",value:function(e,t,a){t?this.setState({exelTableData:[].concat(Object(re.a)(this.state.exelTableData),[e])}):this.setState({exelTableData:Object(re.a)(this.state.exelTableData.filter((function(t){return t.id!==e.id})))})}},{key:"onSelectAllForExelTable",value:function(e,t){var a=this;e?t.map((function(e){return a.setState({exelTableData:Object(re.a)(t)})})):this.setState({exelTableData:[]})}},{key:"selectYearAndReloadData",value:function(e){this.setState({year:+e.target.value}),this.updateOrders(this.state.tableName,+e.target.value)}},{key:"updateOrders",value:function(e,t){var a=this;switch(e){case"prod":!function(e,t,a){H(U.a+U.b.urlGetProdOrders,{type:"prod",year:e},t,a)}(t,(function(e){a.setState({data:e.data.reverse()})}),(function(e){return console.error(e)}));break;case"control":!function(e,t,a){H(U.a+U.b.urlGetControlOrders,{type:"control",year:e},t,a)}(t,(function(e){a.setState({data:e.data.reverse(),title:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0434\u043b\u044f \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),(function(e){return console.error(e)}));break;default:console.log("error")}}},{key:"componentDidMount",value:function(){var e=this,t="/tables/prod"===this.props.location.pathname?"prod":"control";this.updateOrders(t,this.state.year),this.setState({tableName:t,title:"control"===t?"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0434\u043b\u044f \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432":this.state.title}),Z((function(t){e.setState({materials:t.data})}),(function(e){})),X((function(t){e.setState({colors:t.data})}),(function(e){}))}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"table-wrapper",children:[Object(v.jsx)("h1",{style:{textAlign:"center",fontFamily:"RobotoBold",fontSize:"1.5em",marginBottom:"20px"},children:this.state.title}),Object(v.jsxs)(ee.a.Select,{className:"header-selects header-selects-year","aria-label":"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0433\u043e\u0434",onChange:function(t){return e.selectYearAndReloadData(t)},children:[Object(v.jsx)("option",{value:(new Date).getFullYear(),children:"\u0413\u043e\u0434"}),Object(v.jsx)("option",{selected:!0,value:"2021",children:"2021 \u0433\u043e\u0434"}),Object(v.jsx)("option",{value:"2022",children:"2022 \u0433\u043e\u0434"})]}),Object(v.jsx)(de.a,{striped:!0,hover:!0,condensed:!0,bordered:!0,keyField:"id",data:this.state.data,columns:"/tables/prod"===this.props.location.pathname?this.prodColumns(this.state.materials,this.state.colors):this.controlColumns,cellEdit:pe()({mode:"dbclick",afterSaveCell:function(t,a,n,i){e.props.editCellFromRedux(n.id,i.dataField,a)}}),filter:be()({}),filterPosition:"top",selectRow:{mode:"checkbox",clickToSelect:!0,clickToEdit:!0,onSelect:function(t,a,n,i){e.onSelectForExelTable(t,a,n)},onSelectAll:function(t,a){e.onSelectAllForExelTable(t,a)}},pagination:me()()}),Object(v.jsxs)("table",{style:{display:"none"},id:"table-to-xls",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:["prod"==this.state.tableName&&this.prodColumns(this.state.materials,this.state.colors).map((function(e){return Object(v.jsx)("th",{children:e.text})})),"control"==this.state.tableName&&this.controlColumns.map((function(e){return Object(v.jsx)("th",{children:e.text})}))]})}),Object(v.jsx)("tbody",{children:this.state.exelTableData.map((function(t){return Object(v.jsxs)("tr",{children:["prod"==e.state.tableName&&e.prodColumns.map((function(e){return Object(v.jsx)("th",{children:t[e.dataField]})})),"control"==e.state.tableName&&e.controlColumns.map((function(e){return Object(v.jsx)("th",{children:t[e.dataField]})}))]},t.id)}))})]}),Object(v.jsxs)("p",{className:"footer-table",children:[Object(v.jsx)("button",{className:"btn btn-success",onClick:function(t){return"/tables/prod"===e.props.location.pathname?e.props.save("/save_data/prod","POST"):e.props.save("/save_data/control","POST")},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(v.jsx)(Oe.a,{id:"test-table-xls-button",className:"btn btn-primary ".concat(0===this.state.exelTableData.length?"disabled":""," download-table-xls-button"),table:"table-to-xls",filename:"table_"+this.state.tableName,sheet:"tablexls",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432 XLS"})]})]})}}]),a}(i.a.Component)),xe=Object(c.b)(null,(function(e){return{editCellFromRedux:function(t,a,n){return e(function(e,t,a){return{type:D,payload:{type:"CHANGE",payload:{id:e,col:t,value:a}}}}(t,a,n))},save:function(t,a){return e(function(e,t){return{type:A,payload:{url:e,method:t}}}(t,a))}}}))(ge),ye=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={data:[],changes:[],selectedRows:[]},n}return Object(o.a)(a,[{key:"editCell",value:function(e,t,a,n){var i={type:"CHANGE",payload:{id:a.id,col:n.dataField,value:t}},r=-1;this.state.changes.map((function(e,t){if("CHANGE"===e.type&&e.payload.col===i.payload.col&&e.payload.id===i.payload.id)return r=t})),0===~r?this.setState({changes:[].concat(Object(re.a)(this.state.changes),[i])}):this.setState({changes:this.state.changes.reduce((function(e,t,a){return[].concat(Object(re.a)(e),a!==r?[t]:[i])}),[])})}},{key:"selectRow",value:function(e,t,a,n){t?this.setState({selectedRows:[].concat(Object(re.a)(this.state.selectedRows),[e])}):this.setState({selectedRows:this.state.selectedRows.filter((function(t){return t.id!==e.id}))})}},{key:"selectAllRows",value:function(e,t){e?this.setState({selectedRows:t}):this.setState({selectedRows:[]})}},{key:"newRow",value:function(){this.setState({data:[this.props.columns.reduce((function(e,t){return Object(M.a)(Object(M.a)({},e),{},Object(oe.a)({},"id"!==t.dataField&&t.dataField,null))}),{id:(this.state.data[0]&&this.state.data[0].id||0)+1})].concat(Object(re.a)(this.state.data)),changes:[].concat(Object(re.a)(this.state.changes),[{type:"NEW_ROW",payload:{id:(this.state.data[0]&&this.state.data[0].id||0)+1}}])})}},{key:"deleteRows",value:function(){if(window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b? \u0414\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u0431\u0443\u0434\u0443\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u044b.")){var e=this.state.selectedRows.reduce((function(e,t){return[].concat(Object(re.a)(e),[t.id])}),[]);this.setState({data:this.state.data.filter((function(t){return!e.includes(t.id)})),changes:[].concat(Object(re.a)(this.state.changes),[{type:"DELETE_ROW",payload:{ids:e}}])}),h.NotificationManager.info("\u041d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f","\u0418\u043d\u0444\u043e",2e3)}}},{key:"save",value:function(e){var t=this;this.props.saveDataToAPI(this.state.changes,(function(e){e.error?h.NotificationManager.warning("\u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438\u0441\u044c","\u041e\u0448\u0438\u0431\u043a\u0430",3e3):(h.NotificationManager.success("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b!","\u041e\u041a",3e3),t.setState({changes:[]}))}),(function(e){return h.NotificationManager.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)}))}},{key:"componentDidMount",value:function(){var e=this;this.props.getDataFromAPI((function(t){return e.setState({data:t.data.reverse()})}),(function(e){return h.NotificationManager.warning("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)}))}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"universal__table_panel ".concat(this.props.className),children:[void 0!==this.props.title&&Object(v.jsx)("h2",{className:"universal__table_panel_title",children:this.props.title}),Object(v.jsx)(de.a,{striped:!0,hover:!0,condensed:!0,bordered:!0,keyField:"id",data:this.state.data,columns:this.props.columns,cellEdit:pe()({mode:"dbclick",afterSaveCell:function(t,a,n,i){e.editCell(t,a,n,i)}}),selectRow:{mode:"checkbox",clickToSelect:!0,clickToEdit:!0,onSelect:function(t,a,n,i){e.selectRow(t,a,n)},onSelectAll:function(t,a){e.selectAllRows(t,a)}},pagination:this.props.optPagination&&me()()}),Object(v.jsxs)("div",{className:"panel_bottom",children:[Object(v.jsx)("button",{className:"btn btn-danger",onClick:function(t){return e.deleteRows()},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),void 0!==this.props.enableNewRow&&this.props.enableNewRow&&Object(v.jsx)("button",{className:"btn btn-success",onClick:function(t){return e.newRow()},children:"\u041d\u043e\u0432\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430"}),Object(v.jsx)("button",{className:"btn btn-primary",onClick:function(t){return e.save(t)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})}}]),a}(i.a.Component),Ne=[Object(v.jsx)("span",{className:"_mark mark-admin",children:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"}),Object(v.jsx)("span",{className:"_mark mark-moderator",children:"\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440"}),Object(v.jsx)("span",{className:"_mark mark-editor",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440"}),"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"],ke=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).columns=[{text:"ID",dataField:"id",editable:!1},{text:"\u0424\u0418\u041e",dataField:"name"},{text:"\u041b\u043e\u0433\u0438\u043d",dataField:"login",editable:!1},{text:"\u0420\u043e\u043b\u044c",dataField:"role",formatter:function(e,t){return Ne[t.role]},editor:{type:je.Type.SELECT,options:[{value:"0",label:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"},{value:"1",label:"\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440"},{value:"2",label:"\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440"},{value:"3",label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"}]}},{text:"\u0410\u043a\u0442\u0438\u0432\u0435\u043d",dataField:"active",formatter:function(e,t){return 1==t.active?Object(v.jsx)("span",{className:"_mark mark-moderator",children:"\u0410\u043a\u0442\u0438\u0432\u0435\u043d"}):Object(v.jsx)("span",{className:"_mark mark-admin",children:"\u041d\u0435 \u0430\u043a\u0442\u0438\u0432\u0435\u043d"})},editor:{type:je.Type.SELECT,options:[{value:"0",label:"\u041d\u0435 \u0430\u043a\u0442\u0438\u0432\u0435\u043d"},{value:"1",label:"\u0410\u043a\u0442\u0438\u0432\u0435\u043d"}]}}],n}return Object(o.a)(a,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"ManageUsers",children:Object(v.jsx)(ye,{className:"users",title:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438",columns:this.columns,getDataFromAPI:V,saveDataToAPI:z,optPagination:!0,enableNewRow:!1})})}}]),a}(i.a.Component),_e=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e)}return Object(o.a)(a,[{key:"getCurrentWeek",value:function(){return Date.prototype.getWeek=function(){var e=864e5,t=new Date(this.getFullYear(),0,1,0,0,0),a=0===t.getDay()?7:t.getDay(),n=8-a,i=t.getTime()+n*e,r=a>1?i:t.getTime(),s=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0).getTime(),c=Math.round((s-r)/e);new Date(r);return c>=0&&c<364?Math.ceil((c+1)/7):52},(new Date).getWeek()}},{key:"render",value:function(){return Object(v.jsxs)("div",{className:"Home",children:[this.props.auth&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("h1",{children:["\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435, ",this.props.user.name]}),Object(v.jsxs)("h2",{className:"current_week",children:["\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043d\u0435\u0434\u0435\u043b\u044f: ",Object(v.jsx)("span",{className:"mark",children:this.getCurrentWeek()})]})]}),!this.props.auth&&Object(v.jsx)("p",{children:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c!"})]})}}]),a}(i.a.Component),we=Object(c.b)((function(e){return{user:e.user,auth:e.app.authorization}}),null)(_e),Ce=a(214),Se=a(215),Ie=a(99),Pe=a(53),Fe=a.n(Pe),De=(a(203),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).state={prods:[],selectedRows:[],colors:[],materials:[]};var r=function(e,t,a){return isNaN(e)?{valid:!1,message:"\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0447\u0438\u0441\u043b\u043e"}:!(e>1e4)||{valid:!1,message:"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0435 \u0447\u0438\u0441\u043b\u043e!"}};return n.columns=function(e,t){return[{text:"\u2116 \u043f/\u043f",dataField:"index",headerStyle:function(e,t){return{width:"5%"}},editable:!1},{text:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430 (\u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0445 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0445 \u0443\u0441\u043b\u0443\u0433)",dataField:"name",headerStyle:function(e,t){return{width:"30%"}},validator:function(e,t,a){return function(e,t,a){return e.length<2?{valid:!1,message:"\u0421\u0442\u0440\u043e\u043a\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 1 \u0441\u0438\u043c\u0432\u043e\u043b\u0430"}:!(e.length>=100)||{valid:!1,message:"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430!"}}(e)}},{text:"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b",dataField:"material",editor:{type:je.Type.SELECT,options:[{value:"-",label:"\u041d\u0415\u0422"}].concat(Object(re.a)(e.reduce((function(e,t){return[].concat(Object(re.a)(e),[{label:t.material,value:t.material}])}),[])))}},{text:"\u0426\u0432\u0435\u0442",dataField:"color",editor:{type:je.Type.SELECT,options:[{value:"-",label:"\u041d\u0415\u0422"}].concat(Object(re.a)(t.reduce((function(e,t){return[].concat(Object(re.a)(e),[{label:t.color,value:t.color}])}),[])))}},{text:"\u0415\u0434. \u0438\u0437\u043c.",dataField:"units",editable:!1},{text:"\u041a\u043e\u043b-\u0432\u043e",dataField:"count",validator:function(e,t,a){return r(e)}},{text:"\u0426\u0435\u043d\u0430 (\u0442\u0430\u0440\u0438\u0444) \u0440\u0443\u0431.\u043a\u043e\u043f.",dataField:"price",validator:function(e,t,a){return r(e)}},{text:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u043e\u0432 (\u0440\u0430\u0431\u043e\u0442, \u0443\u0441\u043b\u0443\u0433) \u0440\u0443\u0431.\u043a\u043e\u043f.",dataField:"allPrice",editable:!1}]},n.invoiceRef=i.a.createRef(),n}return Object(o.a)(a,[{key:"printInvoice",value:function(){var e=this.props.invoiceData;q([this.props.invoiceData.id],(function(t){Fe()(t,"\u0437\u0430\u043a\u0430\u0437_".concat(e.id_fc,".docx"))}),(function(e){return h.NotificationManager.warning("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043a\u0430\u0447\u0430\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)}))}},{key:"newRow",value:function(){this.setState({prods:[].concat(Object(re.a)(this.state.prods),[{allPrice:0,assemblyAndEntering:!1,color:"-",count:0,id:this.state.prods[this.state.prods.length-1].id+1,id_fc:this.props.invoiceData.id_fc,id_iv:this.props.invoiceData.id,index:this.state.prods[this.state.prods.length-1].index+1,material:"-",name:"",price:0,units:"\u0448\u0442.",week:this.props.invoiceData.week}])}),this.props.addInvoiceChange({type:"NEW_ROW",payload:{id:this.state.prods[this.state.prods.length-1].id+1}})}},{key:"deleteRow",value:function(){var e=this.state.selectedRows.reduce((function(e,t){return[].concat(Object(re.a)(e),[t.id])}),[]);this.setState({prods:this.state.prods.filter((function(t){return!e.includes(t.id)}))}),this.props.addInvoiceChange({type:"DELETE_ROW",payload:e})}},{key:"saveInvoice",value:function(){this.props.saveInvoiceChanges(this.props.invoiceData)}},{key:"componentDidMount",value:function(){var e,t,a=this;e=function(e){var t=1;a.setState({prods:e.data.filter((function(e){return e.id_iv===a.props.invoiceData.id})).reduce((function(e,a){return[].concat(Object(re.a)(e),[Object(M.a)(Object(M.a)({},a),{},{units:"\u0448\u0442.",index:t++,assemblyAndEntering:!!a.assembly&&!!a.entering})])}),[])})},t=function(e){return h.NotificationManager.warning("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)},H(U.a+U.b.urlGetInvoices,{type:"prods"},e,t),Z((function(e){a.setState({materials:e.data})}),(function(e){})),X((function(e){a.setState({colors:e.data})}),(function(e){}))}},{key:"onSelectForExelTable",value:function(e,t,a){t?this.setState({selectedRows:[].concat(Object(re.a)(this.state.selectedRows),[e])}):this.setState({selectedRows:Object(re.a)(this.state.selectedRows.filter((function(t){return t.id!==e.id})))})}},{key:"onSelectAllForExelTable",value:function(e,t){e?this.setState({selectedRows:Object(re.a)(t)}):this.setState({selectedRows:[]})}},{key:"updateAllPriceCell",value:function(e,t,a){if(console.log(e,t,a),"price"===a.dataField){var n=this.state.prods;n.map((function(a,i){if(a.id===t.id)return n[i].allPrice=Number(t.count)*Number(e),n[i]})),this.setState({prods:n}),this.props.addInvoiceChange({type:"CHANGE",payload:{col:"allPrice",value:Number(t.count)*Number(e),id:t.id}})}if("count"===a.dataField){var i=this.state.prods;i.map((function(a,n){if(a.id===t.id)return i[n].allPrice=Number(t.price)*Number(e),i[n]})),this.setState({prods:i}),this.props.addInvoiceChange({type:"CHANGE",payload:{col:"allPrice",value:Number(t.price)*Number(e),id:t.id}})}}},{key:"changeCell",value:function(e,t,a,n){this.updateAllPriceCell(t,a,n),this.props.addInvoiceChange({type:"CHANGE",payload:{col:n.dataField,value:t,id:a.id}})}},{key:"render",value:function(){var e=this,t=function(t,a){return Object(v.jsxs)(ee.a.Select,{className:"","aria-label":"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0433\u043e\u0434",onChange:function(t){return e.props.addInvoiceChange({type:a,payload:t.target.value})},children:[Object(v.jsx)("option",{value:"",children:"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435"}),Object(v.jsx)("option",{selected:!!t,value:"\u0414\u0430",children:"\u0414\u0430"}),Object(v.jsx)("option",{selected:!t,value:"\u041d\u0435\u0442",children:"\u041d\u0435\u0442"})]})},a=function(t,a){return Object(v.jsx)("input",{type:"number",defaultValue:t,onKeyPress:function(t){return function(t){console.log(t.key),"Enter"===t.key&&e.props.addInvoiceChange({type:a,payload:+t.target.value})}(t)}})};return Object(v.jsxs)("div",{className:"Invoice-wrapper",children:[!!this.props.invoiceData.deliver_back&&Object(v.jsx)("span",{className:"deliver-back-mark",children:"\u0414\u043e\u0432\u043e\u0437"}),Object(v.jsxs)("div",{className:"Invoice",ref:this.invoiceRef,children:[Object(v.jsxs)("div",{className:"header",children:[Object(v.jsx)("div",{className:"logo",children:function(e){switch(e){case"Krovati-spalni.ru":return Object(v.jsx)("img",{src:"".concat(U.a,"/images/logo_krovati_var_22.png"),alt:"logo"});case"\u043c\u0435\u0431\u0435\u043b\u044c\u0438\u0437\u0441\u043e\u0441\u043d\u044b.\u0440\u0444":return Object(v.jsx)("img",{src:"".concat(U.a,"/images/ms.png"),alt:"logo"});case"Liman-murom.ru":return Object(v.jsx)("img",{src:"".concat(U.a,"/images/lim.jpg"),alt:"logo"});default:return Object(v.jsx)("img",{title:"no image"})}}(this.props.invoiceData.site_name)}),Object(v.jsxs)("div",{className:"info_block",children:[Object(v.jsxs)("div",{className:"client_info client_name",children:[Object(v.jsx)("span",{children:"\u0424\u0418\u041e"}),": ",this.props.invoiceData.client_name]}),Object(v.jsxs)("div",{className:"client_info client_phone",children:[Object(v.jsx)("span",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),": ",this.props.invoiceData.client_phone]}),Object(v.jsxs)("div",{className:"client_info client_address",children:[Object(v.jsx)("span",{children:"\u0410\u0434\u0440\u0435\u0441"}),": ",this.props.invoiceData.client_address]})]})]}),Object(v.jsx)("div",{className:"sub-header",children:Object(v.jsxs)("p",{children:[Object(v.jsxs)("span",{children:["\u0417\u0430\u043a\u0430\u0437 \u2116 ",Object(v.jsx)("span",{className:"number_order",children:this.props.invoiceData.id_fc})]}),Object(v.jsxs)("span",{children:["\u0414\u0430\u0442\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438 ",Object(v.jsx)("span",{className:"date_order",children:this.props.invoiceData.date_order})]})]})}),Object(v.jsx)("div",{className:"prods",children:Object(v.jsx)(de.a,{striped:!0,hover:!0,condensed:!0,bordered:!0,keyField:"id",data:this.state.prods,columns:this.columns(this.state.materials,this.state.colors),cellEdit:pe()({mode:"dbclick",afterSaveCell:function(t,a,n,i){return e.changeCell(t,a,n,i)}}),selectRow:{mode:"checkbox",clickToSelect:!0,clickToEdit:!0,onSelect:function(t,a,n,i){e.onSelectForExelTable(t,a,n)},onSelectAll:function(t,a){e.onSelectAllForExelTable(t,a)}}})}),Object(v.jsxs)("div",{className:"table-bottom-panel",children:[Object(v.jsx)("button",{className:"btn btn-success",onClick:this.newRow.bind(this),children:"\u041d\u043e\u0432\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430"}),Object(v.jsx)("button",{className:"btn btn-danger",onClick:this.deleteRow.bind(this),children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443"})]}),Object(v.jsx)("p",{className:"gost",children:"\u0414\u0430\u043d\u043d\u0430\u044f \u043c\u0435\u0431\u0435\u043b\u044c \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0413\u041e\u0421\u0422\u0443 16371-93 \u0438 \u0433\u043e\u0441\u0442\u0443 19917-93, \u0438\u043c\u0435\u0435\u0442 \u0433\u0438\u0433\u0438\u0435\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442, \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044f, \u043f\u0440\u0438\u0437\u043d\u0430\u043d\u0430 \u0433\u043e\u0434\u043d\u043e\u0439 \u043a \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438."}),Object(v.jsxs)("div",{className:"assembly-and-entering",children:[Object(v.jsxs)("span",{className:"name-field",children:["\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430 ",Object(v.jsxs)("span",{className:"field field_data field-delivery",children:[t(this.props.invoiceData.delivery,"CHANGE/delivery")," ",a(this.props.invoiceData.delivery_price,"CHANGE/delivery_price")]})]}),Object(v.jsxs)("span",{className:"name-field",children:["\u0421\u0431\u043e\u0440 ",Object(v.jsxs)("span",{className:"field field_data field-assembly",children:[t(this.props.invoiceData.assembly,"CHANGE/assembly")," ",a(this.props.invoiceData.assembly_price,"CHANGE/assembly_price")]})]}),Object(v.jsxs)("span",{className:"name-field",children:["\u0417\u0430\u043d\u043e\u0441 ",Object(v.jsxs)("span",{className:"field field_data field-entering",children:[t(this.props.invoiceData.entering,"CHANGE/entering")," ",a(this.props.invoiceData.entering_price,"CHANGE/entering_price")]})]}),Object(v.jsxs)("span",{className:"name-field",children:["\u0421\u0431\u043e\u0440/\u0417\u0430\u043d\u043e\u0441 ",Object(v.jsxs)("span",{className:"field field_data field-assembly-entering",children:[t(this.props.invoiceData.assemblyAndEntering,"CHANGE/assemblyAndEntering")," ",a(this.props.invoiceData.assemblyAndEntering_price,"CHANGE/assemblyAndEntering_price")]})]})]}),Object(v.jsxs)("div",{className:"write-for-client",children:[Object(v.jsx)("p",{children:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a:"}),Object(v.jsxs)("p",{className:"write-for-client-data",children:[Object(v.jsxs)("span",{className:"info write-name-client",children:["\u0424\u0418\u041e",Object(v.jsx)("span",{className:"field"})]}),Object(v.jsxs)("span",{className:"info write-phone-client",children:["\u0422\u0435\u043b.",Object(v.jsx)("span",{className:"field"})]})]})]}),Object(v.jsxs)("p",{className:"signature",children:["\u041f\u043e\u0434\u043f\u0438\u0441\u044c ",Object(v.jsx)("span",{className:"field"})]})]}),Object(v.jsxs)("div",{className:"panel-bottom",children:[Object(v.jsx)("button",{className:"btn btn-success",onClick:this.saveInvoice.bind(this),children:"\u0421\u043e\u0445\u0430\u043d\u0438\u0442\u044c"}),Object(v.jsx)("button",{className:"btn btn-primary",onClick:this.printInvoice.bind(this),children:"\u041f\u0435\u0447\u0430\u0442\u044c"})]})]})}}]),a}(i.a.Component)),Ae=Object(c.b)((function(e){return{changes:e.app.invoiceChanges}}),(function(e){return{addInvoiceChange:function(t){return e({type:P,payload:t})},saveInvoiceChanges:function(t){return e(function(e){return{type:F,payload:e}}(t))}}}))(De),Ee=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={invoices:[],activeInvoice:!1,activeRow:{},selectedYear:(new Date).getFullYear(),selectedWeek:-1,deliverVisible:!1,selectInvoices:[],countItemsInPage:10,currentPage:1,maxCountPages:5},n.deliverNumberOrder=i.a.createRef(),n}return Object(o.a)(a,[{key:"updateListInvoices",value:function(e){var t=this;Y(this.state.selectedYear,(function(a){t.setState({invoices:a.data.reverse()}),e(a.data).bind(t)}),(function(e){return console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;this.updateListInvoices((function(t){if(Boolean(e.props.match.params.id)){var a=t.filter((function(t){return t.id===+e.props.match.params.id}));console.log(a),0!==a.length?e.setState({activeInvoice:!0,activeRow:a[0],selectInvoices:[]}):e.props.history.push("/invoices")}}))}},{key:"onEventHandlerForLabel",value:function(e,t){switch(e.detail){case 1:var a=-1;if(this.state.selectInvoices.map((function(e,n){if(e.id===t.id)return a=n,e})),-1!==a){var n=this.state.selectInvoices;n.splice(a,1),this.setState({selectInvoices:n})}else this.setState({selectInvoices:[].concat(Object(re.a)(this.state.selectInvoices),[t])});break;case 2:e.preventDefault(),this.props.history.push("/invoices/".concat(t.id));break;default:return}}},{key:"selectWeekAndReloadData",value:function(e){this.setState({selectedWeek:+e.target.value})}},{key:"selectYearAndReloadData",value:function(e){var t=this;Y(+e.target.value,(function(e){t.setState({invoices:e.data})}),(function(e){return console.log(e)}))}},{key:"createDeliverBack",value:function(e){var t,a,n,i=this;0!==this.state.invoices.filter((function(e){return e.id_fc===+i.deliverNumberOrder.current.value})).length?(t=+this.deliverNumberOrder.current.value,a=function(e){e.error?h.NotificationManager.warning("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0434\u043e\u0432\u043e\u0437","\u041e\u0448\u0438\u0431\u043a\u0430",3e3):i.setState({invoices:[Object(M.a)(Object(M.a)({},i.state.invoices.filter((function(e){return e.id_fc===+i.deliverNumberOrder.current.value}))[0]),{},{deliver_back:1,id:i.state.invoices[i.state.invoices.length-1].id+1})].concat(Object(re.a)(i.state.invoices)),deliverVisible:!1})},n=function(e){return h.NotificationManager.warning("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0434\u043e\u0432\u043e\u0437","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)},W(U.a+U.b.urlPostInvoiceDeliverBack,{id_fc:t},a,n)):h.NotificationManager.warning("\u0422\u0430\u043a\u043e\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)}},{key:"printSelected",value:function(e){q(this.state.selectInvoices.reduce((function(e,t){return[].concat(Object(re.a)(e),[t.id])}),[]),(function(e){Fe()(e,"\u0437\u0430\u043a\u0430\u0437\u044b.docx")}),(function(e){return console.log(e)}))}},{key:"range",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(re.a)(Array(e).keys()).map((function(e){return e+t}))}},{key:"toForward",value:function(e){this.state.currentPage<Math.ceil(this.state.invoices.length/this.state.countItemsInPage)&&this.setState({currentPage:this.state.currentPage+1})}},{key:"toBackward",value:function(e){this.state.currentPage>1&&this.setState({currentPage:this.state.currentPage-1})}},{key:"pickPage",value:function(e){this.setState({currentPage:e})}},{key:"render",value:function(){var e=this,t=this.state.invoices.reduce((function(e,t){return e.includes(t.week)?e:[].concat(Object(re.a)(e),[t.week])}),[]).sort(),a=-1===this.state.selectedWeek?this.state.invoices.filter((function(t,a){return a>=(e.state.currentPage-1)*e.state.countItemsInPage&&a<e.state.currentPage*e.state.countItemsInPage})):this.state.invoices.filter((function(t){return t.week===e.state.selectedWeek})).filter((function(t,a){return a>=(e.state.currentPage-1)*e.state.countItemsInPage&&a<e.state.currentPage*e.state.countItemsInPage})),n=-1===this.state.selectedWeek?Math.ceil(this.state.invoices.length/this.state.countItemsInPage):Math.ceil(this.state.invoices.filter((function(t){return t.week===e.state.selectedWeek})).length/this.state.countItemsInPage);return Object(v.jsxs)("div",{className:"invoices_section",children:[Object(v.jsxs)("h1",{className:"header",children:[this.state.activeInvoice&&Object(v.jsx)(b.b,{to:"/invoices",className:"invoices_section__back",children:Object(v.jsx)(O.a,{})}),"\u0417\u0430\u043a\u0430\u0437\u044b",this.state.activeInvoice?": ".concat(this.state.activeRow.id_fc):""]}),!this.state.activeInvoice&&Object(v.jsxs)("div",{className:"invoices_list_wrapper",children:[Object(v.jsxs)("div",{className:"panel",children:[Object(v.jsxs)(ee.a.Select,{className:"header-selects header-selects-week","aria-label":"\u041d\u0435\u0434\u0435\u043b\u044f",onChange:function(t){return e.selectWeekAndReloadData(t)},children:[Object(v.jsx)("option",{value:"-1",children:"\u2116 \u043d\u0435\u0434\u0435\u043b\u0438"}),t.map((function(e){return Object(v.jsx)("option",{value:e,children:e},e)}))]}),Object(v.jsxs)(ee.a.Select,{className:"header-selects header-selects-year","aria-label":"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0433\u043e\u0434",onChange:function(t){return e.selectYearAndReloadData(t)},children:[Object(v.jsx)("option",{value:"2021",children:"\u0413\u043e\u0434"}),Object(v.jsx)("option",{selected:!0,value:"2021",children:"2021 \u0433\u043e\u0434"}),Object(v.jsx)("option",{value:"2022",children:"2022 \u0433\u043e\u0434"})]})]}),Object(v.jsxs)("div",{className:"label_thead",children:[Object(v.jsx)("span",{className:"number_order",children:"\u2116 \u041d\u0435\u0434\u0435\u043b\u0438"}),Object(v.jsx)("span",{className:"number_order",children:"\u2116 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(v.jsx)("span",{className:"client_name",children:"\u0424\u0418\u041e"}),Object(v.jsx)("span",{className:"client_phone",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"})]}),Object(v.jsx)("ul",{className:"invoices_list",children:a.map((function(t,a){return Object(v.jsx)("li",{onClick:function(a){return e.onEventHandlerForLabel(a,t)},children:Object(v.jsx)(ee.a.Check,{type:"checkbox",id:"invoice_".concat(a),className:"choice choice_".concat(a),label:Object(v.jsxs)(i.a.Fragment,{children:[Object(v.jsx)("span",{className:"field number_order",children:t.week}),Object(v.jsx)("span",{className:"field number_order",children:t.id_fc}),Object(v.jsx)("span",{className:"field client_name",children:t.client_name}),Object(v.jsx)("span",{className:"field client_phone",children:t.client_phone}),t.deliver_back?Object(v.jsx)("span",{className:"deliver_back",children:"\u0414\u043e\u0432\u043e\u0437"}):Object(v.jsx)(v.Fragment,{})]})})},"li_".concat(a))}))}),this.state.deliverVisible&&Object(v.jsxs)("div",{className:"deliver",children:[Object(v.jsx)("span",{children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0434\u043e\u0432\u043e\u0437: "}),Object(v.jsx)(te.a,{controlId:"floatingInput",label:"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u043a\u0430\u0437\u0430",className:"mb-4",children:Object(v.jsx)(ee.a.Control,{type:"text",placeholder:"3400",autoFocus:!0,ref:this.deliverNumberOrder})}),Object(v.jsxs)("div",{className:"button-wrapper",children:[Object(v.jsx)("button",{className:"btn btn-primary add-deliver",onClick:this.createDeliverBack.bind(this),children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"}),Object(v.jsx)("button",{className:"btn btn-danger",onClick:function(t){return e.setState({deliverVisible:!1})},children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]})]}),Object(v.jsxs)("div",{className:"panigation",children:[Object(v.jsxs)(ee.a.Select,{onChange:function(t){return e.setState({countItemsInPage:+t.target.value})},className:"header-selects header-selects-year","aria-label":"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0430\u0439\u0442\u043e\u043c\u043e\u0432",children:[Object(v.jsx)("option",{value:"10",selected:!0,children:"\u041a\u043e\u043b-\u0432\u043e: 10"}),Object(v.jsx)("option",{value:"20",children:"\u041a\u043e\u043b-\u0432\u043e: 20"}),Object(v.jsx)("option",{value:"30",children:"\u041a\u043e\u043b-\u0432\u043e: 30"}),Object(v.jsx)("option",{value:"40",children:"\u041a\u043e\u043b-\u0432\u043e: 40"}),Object(v.jsx)("option",{value:"50",children:"\u041a\u043e\u043b-\u0432\u043e: 50"})]}),Object(v.jsxs)(Ce.a,{"aria-label":"Toolbar with button groups",className:"panigation-pages",children:[Object(v.jsx)(Se.a,{className:"me-2","aria-label":"First group",children:Object(v.jsx)(Ie.a,{onClick:this.toBackward.bind(this),children:Object(v.jsx)(O.a,{})})}),Object(v.jsx)(Se.a,{className:"me-2","aria-label":"Second group",children:this.range(n).map((function(t,a){return Object(v.jsx)(Ie.a,{onClick:function(t){return e.pickPage(a+1)},active:e.state.currentPage===a+1,children:a+1})}))}),Object(v.jsx)(Se.a,{"aria-label":"Third group",children:Object(v.jsx)(Ie.a,{onClick:this.toForward.bind(this),children:Object(v.jsx)(O.b,{})})})]})]}),Object(v.jsxs)("p",{className:"button_wrapper",children:[Object(v.jsx)("button",{onClick:function(t){return e.props.history.push("/invoices/".concat(e.state.selectInvoices[0].id))},className:"btn btn-secondary ".concat(1===this.state.selectInvoices.length?"":"disabled"),style:{marginRight:"10px"},children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"}),Object(v.jsx)("button",{onClick:function(t){return e.setState({deliverVisible:!0})},className:"btn btn-success",style:{marginRight:"10px"},children:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0434\u043e\u0432\u043e\u0437"}),Object(v.jsx)("button",{onClick:this.printSelected.bind(this),className:"btn btn-primary ".concat(0===this.state.selectInvoices.length?"disabled":""),children:"\u041f\u0435\u0447\u0430\u0442\u044c"})]})]}),this.state.activeInvoice&&Object(v.jsx)(Ae,{invoiceData:this.state.activeRow})]})}}]),a}(i.a.Component),Re=Object(c.b)((function(e){return{auth:e.app.authorization,user:e.user}}),null)(Ee),Te=(a(204),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={backups:[],countItemsInPage:10,currentPage:1,maxCountPages:5},n.columnColors=[{text:"ID",dataField:"id",sort:!0},{text:"\u0426\u0432\u0435\u0442",dataField:"color"}],n.columnMaterials=[{text:"ID",dataField:"id",sort:!0},{text:"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b",dataField:"material"}],n}return Object(o.a)(a,[{key:"handleMakeBackup",value:function(e){var t,a,n=this;t=function(e){n.setState({backups:[].concat(Object(re.a)(n.state.backups),[e.fileName])})},a=function(e){return console.log(e)},W(U.a+U.b.urlMakeBackup,{},t,a)}},{key:"toBackup",value:function(e){var t,a,n;window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u0430\u0442\u0438\u0442\u044c\u0441\u044f?")&&(t=e,a=function(e){return!e.error&&h.NotificationManager.success("\u0411\u0430\u0437\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043a\u0430\u0442\u0438\u043b\u0430\u0441\u044c","OK",3e3)},n=function(e){return h.NotificationManager.error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043a\u0430\u0442\u0430\u0442\u0438\u0442\u044c\u0441\u044f","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)},W(U.a+U.b.urlToBackup,{fileName:t},a,n))}},{key:"range",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(re.a)(Array(e).keys()).map((function(e){return e+t}))}},{key:"toForward",value:function(e){this.state.currentPage<Math.ceil(this.state.backups.length/this.state.countItemsInPage)&&this.setState({currentPage:this.state.currentPage+1})}},{key:"toBackward",value:function(e){this.state.currentPage>1&&this.setState({currentPage:this.state.currentPage-1})}},{key:"pickPage",value:function(e){this.setState({currentPage:e})}},{key:"componentDidMount",value:function(){var e,t,a=this;e=function(e){a.setState({backups:e.data.reverse()})},H(U.a+U.b.urlGetBackups,{},e,t)}},{key:"render",value:function(){var e=this,t=this.state.backups.filter((function(t,a){return a>=(e.state.currentPage-1)*e.state.countItemsInPage&&a<e.state.currentPage*e.state.countItemsInPage})),a=Math.ceil(this.state.backups.length/this.state.countItemsInPage);return Object(v.jsxs)("div",{className:"SystemSettings",children:[Object(v.jsx)("div",{className:"slot slot_colors",children:Object(v.jsx)(ye,{className:"colors",title:"\u0426\u0432\u0435\u0442\u0430",columns:this.columnColors,getDataFromAPI:X,saveDataToAPI:Q,optPagination:!0,enableNewRow:!0})}),Object(v.jsx)("div",{className:"slot slot_materials",children:Object(v.jsx)(ye,{className:"materials",title:"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b",columns:this.columnMaterials,getDataFromAPI:Z,saveDataToAPI:$,optPagination:!0,enableNewRow:!0})}),Object(v.jsxs)("div",{className:"slot slot_backups",children:[Object(v.jsx)("h2",{children:"\u0411\u0430\u0437\u0430 \u0434\u0430\u043d\u043d\u044b\u0445"}),Object(v.jsxs)("p",{children:["\u0411\u044d\u043a\u0430\u043f\u044b ",Object(v.jsx)("button",{className:"btn btn-primary",onClick:function(t){return e.handleMakeBackup(t)},children:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0431\u044d\u043a\u0430\u043f"})]}),Object(v.jsx)("ul",{className:"slot_backups_list",children:t.map((function(t){return Object(v.jsxs)("li",{className:"backups_item",children:[Object(v.jsx)("span",{className:"backups_item_filename",children:t.split(".").filter((function(e,t){return t<5})).join(".")}),Object(v.jsx)("button",{className:"btn btn-danger",onClick:function(a){return e.toBackup(t)},children:"\u041e\u0442\u043a\u0430\u0442\u0438\u0442\u044c"})]})}))}),Object(v.jsxs)("div",{className:"pagination",children:[Object(v.jsxs)(ee.a.Select,{onChange:function(t){return e.setState({countItemsInPage:+t.target.value})},className:"header-selects header-selects-year","aria-label":"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0430\u0439\u0442\u043e\u043c\u043e\u0432",children:[Object(v.jsx)("option",{value:"10",selected:!0,children:"\u041a\u043e\u043b-\u0432\u043e: 10"}),Object(v.jsx)("option",{value:"20",children:"\u041a\u043e\u043b-\u0432\u043e: 20"}),Object(v.jsx)("option",{value:"30",children:"\u041a\u043e\u043b-\u0432\u043e: 30"}),Object(v.jsx)("option",{value:"40",children:"\u041a\u043e\u043b-\u0432\u043e: 40"}),Object(v.jsx)("option",{value:"50",children:"\u041a\u043e\u043b-\u0432\u043e: 50"})]}),Object(v.jsxs)(Ce.a,{"aria-label":"Toolbar with button groups",className:"pagination-pages",children:[Object(v.jsx)(Se.a,{className:"me-2","aria-label":"First group",children:Object(v.jsx)(Ie.a,{onClick:this.toBackward.bind(this),children:Object(v.jsx)(O.a,{})})}),Object(v.jsx)(Se.a,{className:"me-2","aria-label":"Second group",children:this.range(a).map((function(t,a){return Object(v.jsx)(Ie.a,{onClick:function(t){return e.pickPage(a+1)},active:e.state.currentPage===a+1,children:a+1})}))}),Object(v.jsx)(Se.a,{"aria-label":"Third group",children:Object(v.jsx)(Ie.a,{onClick:this.toForward.bind(this),children:Object(v.jsx)(O.b,{})})})]})]})]})]})}}]),a}(i.a.Component)),Me=[{path:"/logout",name:"\u0412\u044b\u0439\u0442\u0438",role_user:y,isNavBar:!1,isPrivate:!0,component:ne},{path:"/login",name:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f",role_user:N,isNavBar:!1,isPrivate:!1,icon:Object(v.jsx)(O.g,{}),component:ne},{path:"/registration",name:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",role_user:N,isNavBar:!1,isPrivate:!1,icon:Object(v.jsx)(O.g,{}),component:ie},{path:"/new_order",name:"\u041d\u043e\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437",role_user:y,isNavBar:!0,isPrivate:!0,icon:Object(v.jsx)(O.f,{}),component:le},{path:"/invoices",name:"\u0417\u0430\u043a\u0430\u0437\u044b",role_user:y,isNavBar:!0,isPrivate:!0,isExact:!0,icon:Object(v.jsx)(O.e,{}),component:Re},{path:"/invoices/:id",name:"\u0417\u0430\u043a\u0430\u0437\u044b",role_user:y,isExact:!0,isNavBar:!1,isPrivate:!0,icon:Object(v.jsx)(O.e,{}),component:Re},{path:"/tables/prod",name:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0434\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0430",role_user:x,isNavBar:!0,isPrivate:!0,icon:Object(v.jsx)(O.j,{}),component:xe},{path:"/tables/control",name:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0434\u043b\u044f \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u043d\u0438\u044f",role_user:x,isNavBar:!0,isPrivate:!0,icon:Object(v.jsx)(O.j,{}),component:xe},{path:"/users",name:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438",role_user:g,isNavBar:!0,isPrivate:!0,icon:Object(v.jsx)(O.l,{}),component:ke},{path:"/settings",name:"\u0421\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",role_user:y,isNavBar:!0,isPrivate:!0,icon:Object(v.jsx)(O.d,{}),component:Te},{path:"/",name:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",role_user:y,isNavBar:!1,component:we}],Be=(a(205),a(206),a(207),a(208),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e,t,a,n=this;localStorage.getItem("token")?(e=localStorage.getItem("token"),t=function(e){n.setState({auth:!0,userActive:e.active}),n.props.addUser(e.login,e.name,e.role,e.active),n.props.authUser(!e.error),localStorage.setItem("token",e.jwt)},a=function(e){return n.setState({auth:!1,userActive:0})},W(U.a+U.b.urlAuth,{jwt:e},t,a)):(this.props.authUser(!1),this.setState({auth:!1,userActive:0}))}},{key:"render",value:function(){var e=this;return Object(v.jsx)(b.a,{children:Object(v.jsxs)(i.a.Fragment,{children:[Object(v.jsx)(T,{}),Object(v.jsx)(m,{routes:Me.filter((function(e){return e.isNavBar||void 0!==e.isPrivate&&!e.isPrivate}))}),Object(v.jsx)(h.NotificationContainer,{}),Object(v.jsx)("main",{children:Object(v.jsx)(j.d,{children:Me.map((function(t){var a=t.isPrivate&&(!e.props.auth||!e.props.user.active||t.role_user<e.props.user.role)?B(t.component):t.component;return Object(v.jsx)(j.b,{path:t.path,component:a,exact:!0},t.path)}))})})]})})}}]),a}(i.a.Component)),Le=Object(c.b)((function(e){return{user:e.user,auth:e.app.authorization}}),(function(e){return{addUser:function(t,a,n,i){return e(E(t,a,n,i))},authUser:function(t){return e(R(t))}}}))(Be),Ge=a(36),Ue=a(102),He=a(103),We={login:null,name:null,role:g,active:1,changes:[]},Ve={authorization:!0,invoicesChanges:[]},Ke={changes:[]},ze=Object(Ge.combineReducers)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(M.a)(Object(M.a)({},e),{},{authorization:t.payload});case I:return localStorage.removeItem("token"),Object(M.a)(Object(M.a)({},e),{},{authorization:t.payload});case P:var a=-1;return e.invoicesChanges.map((function(e,n){if("CHANGE"===e.type&&e.payload.col===t.payload.payload.col&&e.payload.id===t.payload.payload.id)return a=n})),console.log(a,0===~a),0===~a?Object(M.a)(Object(M.a)({},e),{},{invoicesChanges:[].concat(Object(re.a)(e.invoicesChanges),[t.payload])}):Object(M.a)(Object(M.a)({},e),{},{invoicesChanges:e.invoicesChanges.reduce((function(e,n,i){return[].concat(Object(re.a)(e),i!==a?[n]:[t.payload])}),[])});case F:return J(t.payload,e.invoicesChanges,(function(e){e.error?h.NotificationManager.warning("\u041a\u0430\u0436\u0435\u0442\u0441\u044f, \u043e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435","\u041e\u0448\u0438\u0431\u043a\u0430",3e3):h.NotificationManager.success("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b","\u041e\u041a",3e3)}),(function(e){return h.NotificationManager.warning("\u041a\u0430\u0436\u0435\u0442\u0441\u044f, \u043e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)})),Object(M.a)(Object(M.a)({},e),{},{invoicesChanges:[]});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(M.a)(Object(M.a)({},t.payload),{},{changes:[]});case _:return We;case w:return Object(M.a)(Object(M.a)({},e),{},{changes:[].concat(Object(re.a)(e.changes),[t.payload])});case C:return z(e.changes,(function(e){e.error?h.NotificationManager.warning("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a","\u041e\u0448\u0438\u0431\u043a\u0430",3e3):h.NotificationManager.success("\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!","OK",3e3)}),(function(e){return h.NotificationManager.warning("\u041a\u0430\u0436\u0435\u0442\u0441\u044f, \u043e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)})),Object(M.a)(Object(M.a)({},e),{},{changes:[]});default:return e}},tables:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(M.a)(Object(M.a)({},e),{},{changes:[].concat(Object(re.a)(e.changes),[t.payload])});case A:return K(t.payload.url,e.changes,(function(e){e.error?h.NotificationManager.warning("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a","\u041e\u0448\u0438\u0431\u043a\u0430",3e3):h.NotificationManager.success("\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!","OK",3e3)}),(function(e){return h.NotificationManager.warning("\u041a\u0430\u0436\u0435\u0442\u0441\u044f, \u043e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)})),Object(M.a)(Object(M.a)({},e),{},{changes:[]});default:return e}}}),Ye=Object(He.composeWithDevTools)({trace:!0,traceLimit:25}),qe=Object(Ge.createStore)(ze,Ye(Object(Ge.applyMiddleware)(Ue.a,(function(e){return function(t){return function(a){var n=!1,i=[];function r(){i.forEach((function(t){return e.dispatch(t)})),i=[]}var s=Object.assign({},a,{asyncDispatch:function(e){i=i.concat([e]),n&&r()}}),c=t(s);return n=!0,r(),c}}}))));a(209);s.a.render(Object(v.jsx)(c.a,{store:qe,children:Object(v.jsx)(Le,{})}),document.getElementById("root"))},7:function(e){e.exports=JSON.parse('{"a":"","b":{"urlNewOrder":"/new_order","urlGetProdOrders":"/orders","urlGetControlOrders":"/orders","urlGetUsers":"/users","urlNumberOrder":"/get_number_order","urlRegistration":"/registration","urlLogin":"/login","urlAuth":"/auth","urlSaveUserTable":"/save_data/users","urlGetInvoices":"/invoices","urlGetInvoiceDOCX":"/get_invoice","urlPostInvoiceDeliverBack":"/new_invoice_deliver_back","urlSendInvoiceChanges":"/save_data/invoice","urlGetColors":"/get_colors","urlSaveColors":"/save_data/colors","urlGetMaterials":"/get_materials","urlSaveMaterials":"/save_data/materials","urlMakeBackup":"/make_backup","urlGetBackups":"/get_backups","urlToBackup":"/to_backup"}}')},79:function(e,t,a){},80:function(e,t,a){}},[[210,1,2]]]);
//# sourceMappingURL=main.b90a72ff.chunk.js.map