(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{118:function(e,t,a){},123:function(e,t,a){},203:function(e,t,a){},205:function(e,t,a){},206:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){},210:function(e,t,a){},211:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(28),s=a.n(r),c=a(21),l=a(13),o=a(14),d=a(16),u=a(15),h=a(8),b=a(30),p=a(20),j=a(36),v=(a(118),a(0)),f=a(18),m=function(e,t){var a=function(a){e.current&&!e.current.contains(a.target)&&t()};Object(n.useEffect)((function(){return document.addEventListener("click",a),function(){document.removeEventListener("click",a)}}))},O=a(2);var g=Object(c.b)((function(e){return{user:e.user,auth:e.app.authorization}}),null)((function(e){var t=Object(n.useState)(!1),a=Object(j.a)(t,2),i=a[0],r=a[1],s=Object(n.useRef)(null);return Object(n.useEffect)((function(){document.body.style.overflow=i?"hidden":"unset"}),[i]),m(s,(function(){i&&r(!1)})),Object(O.jsxs)("div",{className:"sidebar",children:[Object(O.jsx)("div",{className:"icon_bars",onClick:function(e){return r(!i)},children:Object(O.jsx)(f.a,{})}),Object(O.jsxs)("div",{className:"sidebar_content responsive_".concat(i?"active":"noactive"),children:[Object(O.jsx)("div",{className:"logo_wrapper",children:Object(O.jsx)(b.b,{ref:s,onClick:function(e){return r(!1)},to:"/",children:Object(O.jsx)("span",{className:"logo",children:"FornitureWorker"})})}),Object(O.jsxs)("ul",{className:"sidebar_ul",children:[e.routes.map((function(t){if(t.isPrivate&&t.role_user>=e.user.role&&e.user.active&&e.auth)return Object(O.jsx)("li",{children:Object(O.jsx)(v.b.Provider,{value:{color:"white",className:"icon_header"},children:Object(O.jsxs)(b.b,{ref:s,onClick:function(e){return r(!1)},to:t.path,children:[t.icon,t.name]})})},t.path)})),e.routes.map((function(t){if(!t.isPrivate&&!e.auth)return Object(O.jsx)("li",{children:Object(O.jsx)(v.b.Provider,{value:{color:"white",className:"icon_header"},children:Object(O.jsxs)(b.b,{onClick:function(e){return r(!1)},to:t.path,children:[t.icon,t.name]})})},t.path)}))]})]})]})})),x=a(215),y=0,N=1,k=3,_=999,C="USER/ADD",w="USER/DELETE",S="USERS/ADD_CHANGE",I="USERS/SAVE_CHANGES",A="APP/AUTH",E="APP/LOGOUT",P="APP/INVOICE_ADD_CHANGE",D="APP/INVOICE_SAVE_CHANGES",F="TABLES/EDIT_CELL",R="TABLES/SAVE_DATA",T=function(e,t,a,n){return{type:C,payload:{login:e,name:t,role:a,active:n}}},M=function(e){return{type:A,payload:e}};a(123);var L=Object(c.b)((function(e){return{user:e.user,auth:e.app.authorization}}),(function(e){return{logoutUser:function(){return e({type:E,payload:!1})},deleteUser:function(){return e({type:w})}}}))((function(e){return Object(O.jsx)("header",{className:"main_header",children:e.auth&&Object(O.jsxs)(x.a,{children:[Object(O.jsx)(x.a.Toggle,{variant:"success",id:"dropdown-basic",children:e.user.login}),Object(O.jsx)(x.a.Menu,{children:Object(O.jsxs)(b.b,{className:"dropdown-item",to:"/",onClick:function(t){e.logoutUser(),e.deleteUser()},children:[Object(O.jsx)(f.h,{style:{marginRight:"5px"}}),"\u0412\u044b\u0439\u0442\u0438"]})})]})})})),B=a(3),G=function(e,t){return function(a){Object(d.a)(i,a);var n=Object(u.a)(i);function i(){return Object(l.a)(this,i),n.apply(this,arguments)}return Object(o.a)(i,[{key:"render",value:function(){return t?Object(O.jsx)(e,Object(B.a)({},this.props)):Object(O.jsx)(p.a,{to:"/login"})}}]),i}(i.a.Component)},H=a(69),U=a.n(H),W=a(7),Y=function(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];U.a.get(e,{params:Object(B.a)(Object(B.a)({},t),{},{token:localStorage.getItem("token")}),responseType:i?"blob":"json"}).then((function(e){return a(e.data)})).catch((function(e){return n(e.response)}))},V=function(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];U.a.post(e,Object(B.a)(Object(B.a)({},t),{},{token:localStorage.getItem("token")}),{responseType:i?"blob":"json"}).then((function(e){a(e.data)})).catch((function(e){n(e.response)}))},K=function(e,t){Y(W.a+W.b.urlGetUsers,{},e,t)},z=function(e,t,a,n){V(W.a+e,{data:t},a,n)},q=function(e,t,a){V(W.a+W.b.urlSaveUserTable,{data:e},t,a)},J=function(e,t,a){Y(W.a+W.b.urlGetInvoices,{type:"main",year:e},t,a)},X=function(e,t,a){Y(W.a+W.b.urlGetInvoiceDOCX,{ids:e},t,a,!0)},Q=function(e,t,a,n){V(W.a+W.b.urlSendInvoiceChanges,Object(B.a)({data:t},e),a,n)},Z=function(e,t,a){V(W.a+W.b.urlDeleteIncoive,{hashes:e},t,a)},$=function(e,t){Y(W.a+W.b.urlGetColors,{},e,t)},ee=function(e,t,a){V(W.a+W.b.urlSaveColors,{changes:e},t,a)},te=function(e,t){Y(W.a+W.b.urlGetMaterials,{},e,t)},ae=function(e,t,a){V(W.a+W.b.urlSaveMaterials,{changes:e},t,a)},ne=a(216),ie=a(101),re=(a(80),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).login=i.a.createRef(),n.password=i.a.createRef(),n}return Object(o.a)(a,[{key:"onLogin",value:function(e){var t,a,n,i=this;e.preventDefault(),t={login:this.login.current.value,password:this.password.current.value},a=function(e){console.log(e),e.error?h.NotificationManager.warning("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c","\u041e\u0448\u0438\u0431\u043a\u0430",3e3):(localStorage.setItem("token",e.jwt),h.NotificationManager.success("\u0412\u044b \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b!","OK",3e3),i.props.addUser(e.login,e.name,e.role,e.active),i.props.authUser(!0),i.props.history.push("/"))},n=function(e){h.NotificationManager.warning("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435(","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)},V(W.a+W.b.urlLogin,t,a,n)}},{key:"render",value:function(){return Object(O.jsx)("div",{className:"main",children:Object(O.jsxs)(ne.a,{className:"login-form",style:{display:"flex",flexDirection:"column",width:"400px"},children:[Object(O.jsx)("h2",{children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(O.jsx)(ie.a,{controlId:"floatingInput",label:"\u041b\u043e\u0433\u0438\u043d",className:"mb-12",children:Object(O.jsx)(ne.a.Control,{ref:this.login,type:"text",placeholder:"\u0418\u0432\u0430\u043d\u043e\u0432 \u0418\u0432\u0430\u043d \u0418\u0432\u0430\u043d\u043e\u0432\u0438\u0447",name:"login",autoFocus:!0})}),Object(O.jsx)(ie.a,{controlId:"floatingInput",label:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"mb-12",children:Object(O.jsx)(ne.a.Control,{ref:this.password,type:"password",placeholder:"Login",name:"password"})}),Object(O.jsx)("button",{className:"btn btn-primary",onClick:this.onLogin.bind(this),children:"\u0412\u043e\u0439\u0442\u0438"})]})})}}]),a}(i.a.Component));re.contextTypes={router:function(){return!0}};var se=Object(c.b)((function(e){return{auth:e.app.authorization}}),(function(e){return{addUser:function(t,a,n,i){return e(T(t,a,n,i))},authUser:function(t){return e(M(t))}}}))(re),ce=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={validateLogin:null,validateName:null,validatePassword:null},n.name=i.a.createRef(),n.login=i.a.createRef(),n.role=i.a.createRef(),n.password=i.a.createRef(),n.repeatePassword=i.a.createRef(),n}return Object(o.a)(a,[{key:"onBlurInput",value:function(e){switch(e.target.name){case"name":return this.setState({validateName:!(e.target.value.length>=3)});case"login":return this.setState({validateLogin:!(e.target.value.length>=4)});case"password":return this.setState({validatePassword:!(e.target.value.length>=8)});default:return}}},{key:"registrationUser",value:function(e){var t=this;(e.preventDefault(),this.repeatePassword.current.value===this.password.current.value)?function(e,t,a){V(W.a+W.b.urlRegistration,e,t,a)}({name:this.name.current.value,login:this.login.current.value,role:this.role.current.value,password:this.password.current.value},(function(e){e.error?h.NotificationManager.error("\u0422\u0430\u043a\u043e\u0439 \u043b\u043e\u0433\u0438\u043d \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442","\u041e\u0448\u0438\u0431\u043a\u0430",3e3):(localStorage.setItem("token",e.jwt),t.props.history.push("/"),h.NotificationManager.success("\u0412\u0430\u0448 \u0430\u043a\u043a\u0430\u0443\u043d\u0442 \u0432 \u0411\u0414! \u0422\u0435\u043f\u0435\u0440\u044c \u0434\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e\u0431\u044b \u0432\u0430\u0448 \u0430\u043a\u043a\u0430\u0443\u043d\u0442 \u0430\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043b\u0438","\u041e\u043a!",3e3))}),(function(e){return h.NotificationManager.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430!","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)})):h.NotificationManager.warning("\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442!","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)}},{key:"render",value:function(){var e=this;return Object(O.jsx)("div",{className:"main",children:Object(O.jsxs)(ne.a,{className:"registration-form",style:{display:"flex",flexDirection:"column",width:"400px"},children:[Object(O.jsx)("h2",{children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(O.jsx)(ie.a,{hasValidate:!0,controlId:"floatingInput",label:"\u0424\u0418\u041e",className:"mb-12",children:Object(O.jsx)(ne.a.Control,{className:null!==this.state.validateName?this.state.validateName?"is-invalid":"is-valid":"",name:"name",ref:this.name,type:"text",placeholder:"\u0418\u0432\u0430\u043d\u043e\u0432 \u0418\u0432\u0430\u043d \u0418\u0432\u0430\u043d\u043e\u0432\u0438\u0447",onBlur:function(t){return e.onBlurInput(t)},autoFocus:!0})}),Object(O.jsx)(ie.a,{controlId:"floatingInput",label:"\u041b\u043e\u0433\u0438\u043d",className:"mb-12",children:Object(O.jsx)(ne.a.Control,{className:null!==this.state.validateLogin?this.state.validateLogin?"is-invalid":"is-valid":"",ref:this.login,name:"login",type:"text",placeholder:"Login",onBlur:function(t){return e.onBlurInput(t)}})}),Object(O.jsxs)(ne.a.Select,{name:"",id:"",ref:this.role,children:[Object(O.jsx)("option",{value:"3",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"}),Object(O.jsx)("option",{value:"2",children:"\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440"}),Object(O.jsx)("option",{value:"1",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440"}),Object(O.jsx)("option",{value:"0",children:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"})]}),Object(O.jsx)(ie.a,{controlId:"floatingInput",label:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"mb-12",children:Object(O.jsx)(ne.a.Control,{className:null!==this.state.validatePassword?this.state.validatePassword?"is-invalid":"is-valid":"",ref:this.password,name:"password",type:"password",placeholder:"Login",onBlur:function(t){return e.onBlurInput(t)}})}),Object(O.jsx)(ie.a,{controlId:"floatingInput",label:"\u041f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",className:"mb-12",children:Object(O.jsx)(ne.a.Control,{ref:this.repeatePassword,type:"password",placeholder:"\u0418\u0432\u0430\u043d\u043e\u0432 \u0418\u0432\u0430\u043d \u0418\u0432\u0430\u043d\u043e\u0432\u0438\u0447"})}),Object(O.jsx)("button",{className:"btn btn-primary",onClick:this.registrationUser.bind(this),children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})})}}]),a}(i.a.Component),le=a(6),oe=(a(81),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={id:-1,name:"",count:1,price:0,allPrice:0,colors:[],materials:[],active:!1},n.refColor=i.a.createRef(),n.refMaterial=i.a.createRef(),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({id:this.props.id}),te((function(t){e.setState({materials:t.data})}),(function(e){})),$((function(t){e.setState({colors:t.data})}),(function(e){}))}},{key:"reCalcAllPrice",value:function(e,t){switch(t){case 0:return this.state.price*e;case 1:return e*this.state.count;default:return 0}}},{key:"onChangeName",value:function(e){this.setState({name:e.target.value,active:!1})}},{key:"onChangeCount",value:function(e){this.setState({count:+e.target.value,allPrice:this.reCalcAllPrice(+e.target.value,0),active:!1})}},{key:"onChangeMainPrice",value:function(e){this.setState({price:+e.target.value,allPrice:this.reCalcAllPrice(+e.target.value,1),active:!1})}},{key:"applyOrder",value:function(e){this.setState({active:!0}),this.props.addOrderToArray(e,{id:this.state.id,name:this.state.name,count:this.state.count,price:this.state.price,allPrice:this.state.allPrice,color:this.refColor.current.value,material:this.refMaterial.current.value})}},{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{className:"order_panel ".concat(this.state.active?"active":"noactive"),children:[Object(O.jsx)("div",{className:"order_panel_close",onClick:function(t){return e.props.deleteOrderFromArrayById(e.state.id)},children:Object(O.jsx)(f.k,{})}),Object(O.jsxs)("form",{className:"oreder_panel_main_info",action:"javascript:0",children:[Object(O.jsxs)("span",{className:"order_panel_id",children:["#",this.props.id+1]}),Object(O.jsx)(ie.a,{style:{width:"40%"},controlId:"floatingInput",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",className:"mb-12",children:Object(O.jsx)(ne.a.Control,{ref:this.name,type:"text",name:"name",placeholder:"\u0421\u0442\u0443\u043b",onChange:this.onChangeName.bind(this),minLength:3,required:!0})}),Object(O.jsxs)(ne.a.Select,{style:{width:"12%"},ref:this.refMaterial,"aria-label":"Default select example",className:"order_panel_select select_material",children:[Object(O.jsx)("option",{value:"-",children:"\u041c\u0430\u0442\u0435\u0440."}),this.state.materials.map((function(e){return Object(O.jsx)("option",{value:e.material,children:e.material})}))]}),Object(O.jsxs)(ne.a.Select,{style:{width:"10%"},ref:this.refColor,"aria-label":"Default select example",className:"order_panel_select select_color",children:[Object(O.jsx)("option",{value:"-",children:"\u0426\u0432\u0435\u0442"}),this.state.colors.map((function(e){return Object(O.jsx)("option",{value:e.color,children:e.color})}))]}),Object(O.jsx)(ie.a,{style:{width:"8%"},controlId:"floatingInput",label:"\u041a\u043e\u043b",className:"mb-12",children:Object(O.jsx)(ne.a.Control,{min:1,max:1e7,ref:this.count,type:"number",placeholder:"4",defaultValue:1,onChange:this.onChangeCount.bind(this),required:!0})}),Object(O.jsx)(ie.a,{style:{width:"14%"},controlId:"floatingInput",label:"\u0426\u0435\u043d\u0430",className:"mb-12",children:Object(O.jsx)(ne.a.Control,{min:0,max:1e7,ref:this.price,type:"number",placeholder:"540",defaultValue:0,onChange:this.onChangeMainPrice.bind(this),required:!0})}),Object(O.jsx)(ie.a,{style:{width:"14%"},controlId:"floatingInput",label:"\u0421\u0443\u043c\u043c\u0430",className:"mb-12",children:Object(O.jsx)(ne.a.Control,{disabled:!0,ref:this.price,type:"number",placeholder:"540",value:this.state.price*this.state.count,onChange:this.onChangeMainPrice.bind(this),required:!0})}),Object(O.jsx)("button",{className:"btn btn-primary apply_order",onClick:this.applyOrder.bind(this),children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"})]})]})}}]),a}(i.a.Component)),de=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).stateOrderPanel={id:0,name:"",size:"",count:0,price:0,allPrice:0},n.state={additional_info_active:!1,numberOrder:0,additional:{delivery:!1,assembly:!1,entering:!1,assemblyAndEntering:!1},orders:[n.stateOrderPanel],allPrice:0,validatation:["site"]},n.client_name=i.a.createRef(),n.client_phone=i.a.createRef(),n.client_address=i.a.createRef(),n.siteName=i.a.createRef(),n.week=i.a.createRef(),n.dateDelivery=i.a.createRef(),n.year=i.a.createRef(),n.delivery_price=i.a.createRef(),n.assembly_price=i.a.createRef(),n.entering_price=i.a.createRef(),n.assemblyAndEntering_price=i.a.createRef(),n}return Object(o.a)(a,[{key:"onClickAddOrder",value:function(e){this.setState({orders:[].concat(Object(le.a)(this.state.orders),[this.stateOrderPanel])})}},{key:"onClickAdditionalInfo",value:function(){this.setState({additional_info_active:!this.state.additional_info_active})}},{key:"onChangeDelivery",value:function(e){this.setState({additional:Object(B.a)(Object(B.a)({},this.state.additional),{},{delivery:e.target.checked})})}},{key:"onChangeAssembly",value:function(e){this.setState({additional:Object(B.a)(Object(B.a)({},this.state.additional),{},{assembly:e.target.checked})})}},{key:"onChangeEntering",value:function(e){this.setState({additional:Object(B.a)(Object(B.a)({},this.state.additional),{},{entering:e.target.checked})})}},{key:"onChangeAssemblyAndEntering",value:function(e){this.setState({additional:Object(B.a)(Object(B.a)({},this.state.additional),{},{assemblyAndEntering:e.target.checked})})}},{key:"addOrderToArray",value:function(e,t){e.preventDefault(),console.log(t);var a=this.state.orders;a[t.id]=t,this.setState({orders:a,allPrice:a.reduce((function(e,t){return e+t.allPrice}),0)})}},{key:"deleteOrderFromArrayById",value:function(e){if(window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b? \u0414\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430 \u043d\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f.")){var t=this.state.orders;t.splice(e,1),this.setState({orders:t})}}},{key:"onSendThisOrder",value:function(e){var t,a,n,i,r,s=this;if(e.preventDefault(),0===this.state.validatation.length){var c={name:this.client_name.current.value,phone:this.client_phone.current.value,address:this.client_address.current.value},l={siteName:this.siteName.current.value,week:+this.week.current.value,dateDelivery:this.dateDelivery.current.value,id:this.state.numberOrder,year:+this.year.current.value,delivery:this.state.additional.delivery,assembly:this.state.additional.assembly,entering:this.state.additional.entering,assemblyAndEntering:this.state.additional.assemblyAndEntering,delivery_price:this.delivery_price.current.value,assembly_price:this.assembly_price.current.value,entering_price:this.entering_price.current.value,assemblyAndEntering_price:this.assemblyAndEntering_price.current.value};t=c,a=l,n=this.state.orders,i=function(e){h.NotificationManager.success("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b","OK",3e3),s.props.history.push("/invoices")},r=function(e){return h.NotificationManager.warning("\u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438\u0441\u044c.","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)},V(W.a+W.b.urlNewOrder,{client:t,additional:a,orders:n},i,r)}else h.NotificationManager.error("\u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)}},{key:"handleGetNumberOrder",value:function(){var e,t,a,n,i=this;e=this.week.current.value,t=this.year.current.value,a=function(e){i.setState({numberOrder:e.id})},n=function(e){console.log(e)},Y(W.a+W.b.urlNumberOrder,{week:e,year:t},a,n)}},{key:"onPressWeekInput",value:function(e){"Enter"===e.key&&(e.preventDefault(),this.handleGetNumberOrder())}},{key:"validate",value:function(e){var t=this,a=function(e){return t.setState({validatation:[].concat(Object(le.a)(t.state.validatation),[e.target.name])})},n=function(e){return t.setState({validatation:t.state.validatation.filter((function(t){return e.target.name!==t}))})};switch(e.target.name){case"name":return void(e.target.value.length>3||"-"==e.target.value||"\u043d\u0435\u0442"==e.target.value.toLowerCase()?n(e):a(e));case"phone":return void(e.target.value.length>6?n(e):a(e));case"site":return void("-"===e.target.value?a(e):n(e));case"address":return void(e.target.value.length>3||"-"==e.target.value||"\u043d\u0435\u0442"==e.target.value.toLowerCase()?n(e):a(e));case"week":return void(+e.target.value>=1&&+e.target.value<=54&&Number(e.target.value)?n(e):a(e));case"date_deliver":return void(e.target.value.length>3||"-"==e.target.value||"\u043d\u0435\u0442"==e.target.value.toLowerCase()?n(e):a(e));default:console.log("Case don't registration")}}},{key:"render",value:function(){var e=this,t=function(e){return Object(O.jsxs)("p",{className:"FLabel_line"+(e.mark?" mark_bold":""),children:[Object(O.jsx)("span",{className:"line_key_span",children:e._key}),Object(O.jsx)("span",{className:"line_value_span",children:e.value})]})};return Object(O.jsx)(ne.a,{className:"Order_wrapper",action:"javascript:0",children:Object(O.jsxs)("div",{className:"Order",children:[Object(O.jsx)("h1",{children:"\u0424\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(O.jsx)("h2",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0435"}),Object(O.jsxs)("div",{className:"top_panel",children:[Object(O.jsxs)("div",{className:"order_form_user",children:[Object(O.jsx)(ie.a,{hasValidation:!0,controlId:"floatingInput",label:"\u0424\u0418\u041e \u043a\u043b\u0438\u0435\u043d\u0442\u0430",className:"mb-12",children:Object(O.jsx)(ne.a.Control,{isInvalid:this.state.validatation.includes("name"),autoFocus:!0,ref:this.client_name,name:"name",type:"text",placeholder:"\u0418\u0432\u0430\u043d\u043e\u0432 \u0418\u0432\u0430\u043d \u0418\u0432\u0430\u043d\u043e\u0432\u0438\u0447",onBlur:function(t){return e.validate(t)},title:"\u0412\u043f\u0438\u0448\u0438\u0442\u0435 '-' \u0438\u043b\u0438 '\u043d\u0435\u0442', \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u0432\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e"})}),Object(O.jsx)(ie.a,{hasValidation:!0,controlId:"floatingInput",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",className:"mb-12",children:Object(O.jsx)(ne.a.Control,{required:!0,isInvalid:this.state.validatation.includes("phone"),ref:this.client_phone,name:"phone",type:"tel",placeholder:"8 123 456 78 90",onBlur:function(t){return e.validate(t)}})}),Object(O.jsx)(ie.a,{hasValidation:!0,controlId:"floatingInput",label:"\u0410\u0434\u0440\u0435\u0441",className:"mb-12",children:Object(O.jsx)(ne.a.Control,{isInvalid:this.state.validatation.includes("address"),onBlur:function(t){return e.validate(t)},ref:this.client_address,type:"text",name:"address",title:"\u0412\u043f\u0438\u0448\u0438\u0442\u0435 '-' \u0438\u043b\u0438 '\u043d\u0435\u0442', \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u0432\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e",placeholder:"\u0433. \u041c\u0443\u0440\u043e\u043c, \u0443\u043b. \u041b\u0435\u043d\u0438\u043d\u0430, 19, \u043a\u0432. 9"})})]}),Object(O.jsxs)("div",{className:"order_form_additional",children:[Object(O.jsxs)(ne.a.Select,{name:"site",isInvalid:this.state.validatation.includes("site"),onBlur:function(t){return e.validate(t)},ref:this.siteName,"aria-label":"Default select example",className:"select_site",children:[Object(O.jsx)("option",{value:"-",children:"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0441\u0430\u0439\u0442"}),Object(O.jsx)("option",{value:"Krovati-spalni.ru",children:"Krovati-spalni.ru"}),Object(O.jsx)("option",{value:"\u043c\u0435\u0431\u0435\u043b\u044c\u0438\u0437\u0441\u043e\u0441\u043d\u044b.\u0440\u0444",children:"\u043c\u0435\u0431\u0435\u043b\u044c\u0438\u0437\u0441\u043e\u0441\u043d\u044b.\u0440\u0444"}),Object(O.jsx)("option",{value:"Liman-murom.ru",children:"Liman-murom.ru"})]}),Object(O.jsxs)("div",{className:"within",children:[Object(O.jsxs)(ne.a.Select,{ref:this.year,"aria-label":"year",className:"select_year",children:[Object(O.jsx)("option",{children:"\u0413\u043e\u0434"}),Object(le.a)(Array((new Date).getFullYear()-2021+2).keys()).map((function(e){return e+2021})).map((function(e){return Object(O.jsx)("option",{value:e,selected:e==(new Date).getFullYear(),children:e})}))]}),Object(O.jsx)(ie.a,{controlId:"floatingInput",label:"\u2116 \u043d\u0435\u0434\u0435\u043b\u0438",className:"mb-12",children:Object(O.jsx)(ne.a.Control,{isInvalid:this.state.validatation.includes("week"),onBlur:function(t){return e.validate(t)},name:"week",ref:this.week,className:"within_input",type:"number",placeholder:"33",onKeyDown:this.onPressWeekInput.bind(this),required:!0})}),Object(O.jsxs)("button",{onClick:this.handleGetNumberOrder.bind(this),className:"apply_order_number active btn btn-primary",children:[" ",">"," \u2116"]}),Object(O.jsx)(ie.a,{controlId:"floatingInput",label:"\u2116 \u0437\u0430\u043a\u0430\u0437\u0430",className:"mb-12",children:Object(O.jsx)(ne.a.Control,{value:this.state.numberOrder,className:"within_input",disabled:!0,type:"number",title:"\u0412\u043f\u0438\u0448\u0438\u0442\u0435 \u2116 \u043d\u0435\u0434\u0435\u043b\u0438 \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 Enter",placeholder:"34"})})]}),Object(O.jsx)(ie.a,{hasValidation:!0,controlId:"floatingInput",label:"\u0414\u0430\u0442\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",className:"mb-12",children:Object(O.jsx)(ne.a.Control,{isInvalid:this.state.validatation.includes("date_deliver"),onBlur:function(t){return e.validate(t)},ref:this.dateDelivery,type:"text",name:"date_deliver",title:"\u0412\u043f\u0438\u0448\u0438\u0442\u0435 '-' \u0438\u043b\u0438 '\u043d\u0435\u0442', \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u0432\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e",placeholder:"34.4.2032"})})]})]}),Object(O.jsx)("h2",{children:"\u0417\u0430\u043a\u0430\u0437\u044b"}),this.state.orders.map((function(t,a){return Object(O.jsx)(oe,{id:a,deleteOrderFromArrayById:e.deleteOrderFromArrayById.bind(e),addOrderToArray:e.addOrderToArray.bind(e)})})),Object(O.jsx)("button",{onClick:this.onClickAddOrder.bind(this),className:"btn btn-primary button_add_order",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}),Object(O.jsxs)("p",{className:"dfrowaic",style:{cursor:"pointer",marginTop:"10px"},onClick:this.onClickAdditionalInfo.bind(this),children:["\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e ",this.state.additional_info_active?Object(O.jsx)(O.Fragment,{children:":"}):Object(O.jsx)(f.i,{})]}),Object(O.jsxs)("div",{className:"additional_info",style:{display:this.state.additional_info_active?"block":"none"},children:[Object(O.jsx)(ne.a.Check,{type:"checkbox",id:"delivery",label:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("span",{children:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430"}),Object(O.jsxs)("span",{className:"price_grey",children:[Object(O.jsx)("input",{className:"form-control",min:0,max:1e6,ref:this.delivery_price,type:"number"}),"\u0440\u0443\u0431"]})]}),onChange:this.onChangeDelivery.bind(this)}),Object(O.jsx)(ne.a.Check,{type:"checkbox",id:"assembly",label:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("span",{children:"\u0421\u0431\u043e\u0440\u043a\u0430"}),Object(O.jsxs)("span",{className:"price_grey",children:[Object(O.jsx)("input",{className:"form-control",min:0,max:1e6,ref:this.assembly_price,type:"number"}),"\u0440\u0443\u0431"]})]}),onChange:this.onChangeAssembly.bind(this)}),Object(O.jsx)(ne.a.Check,{type:"checkbox",id:"entering",label:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("span",{children:"\u0417\u0430\u043d\u043e\u0441"}),Object(O.jsxs)("span",{className:"price_grey",children:[Object(O.jsx)("input",{className:"form-control",min:0,max:1e6,ref:this.entering_price,type:"number"}),"\u0440\u0443\u0431"]})]}),onChange:this.onChangeEntering.bind(this)}),Object(O.jsx)(ne.a.Check,{type:"checkbox",id:"assemblyAndEntering",label:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("span",{children:"\u0421\u0431\u043e\u0440/\u0417\u0430\u043d\u043e\u0441"}),Object(O.jsxs)("span",{className:"price_grey",children:[Object(O.jsx)("input",{className:"form-control",min:0,max:1e6,ref:this.assemblyAndEntering_price,type:"number"}),"\u0440\u0443\u0431"]})]}),onChange:this.onChangeAssemblyAndEntering.bind(this)})]}),Object(O.jsx)("hr",{}),this.state.orders.map((function(e){return Object(O.jsx)(t,{_key:"\u0417\u0430\u043a\u0430\u0437 #".concat(e.id+1),value:"".concat(e.allPrice," \u0440\u0443\u0431")})})),Object(O.jsx)(t,{mark:!0,_key:"\u0418\u0442\u043e\u0433",value:"".concat(this.state.allPrice," \u0440\u0443\u0431")}),Object(O.jsx)("button",{className:"btn btn-success button_send_order",onClick:this.onSendThisOrder.bind(this),children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})})}}]),a}(i.a.Component),ue=Object(c.b)((function(e){return{prices:e.prices}}),null)(de),he=a(31),be=a(35),pe=a.n(be),je=a(25),ve=a.n(je),fe=a(23),me=a.n(fe),Oe=a(53),ge=a.n(Oe),xe=a(102),ye=a.n(xe),Ne=(a(203),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;function i(e,t){switch(t.status){case"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435":return Object(O.jsx)("span",{children:Object(O.jsx)("strong",{style:{color:"blue"},children:e})});case"\u041e\u0442\u043a\u0430\u0437":return Object(O.jsx)("span",{children:Object(O.jsx)("strong",{style:{color:"red"},children:e})});case"\u041e\u043f\u043b\u0430\u0447\u0435\u043d":return Object(O.jsx)("span",{children:Object(O.jsx)("strong",{style:{color:"green"},children:e})});default:return e}}Object(l.a)(this,a),(n=t.call(this,e)).state={data:[],title:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0434\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0430",tableName:"prod",exelTableData:[],year:(new Date).getFullYear(),colors:[],materials:[]};var r=function(e){return console.log(e),!Number(e)||isNaN(e)?{valid:!1,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043b\u043e"}:!(+e>1e6)||{valid:!1,message:"\u0412\u044b \u0432\u0432\u0435\u043b\u0438 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0435 \u0447\u0438\u0441\u043b\u043e"}};return n.prodColumns=function(e,t){return[{text:"\u2116 \u043d\u0435\u0434\u0435\u043b\u0438",dataField:"week",sort:!0,filter:Object(je.textFilter)(),validator:function(e,t,a){return r(e)},headerStyle:function(e,t){return{width:"7%"}}},{text:"\u2116 \u0437\u0430\u043a\u0430\u0437\u0430",dataField:"id_fc",editable:!1,sort:!0,filter:Object(je.textFilter)(),validator:function(e,t,a){return r(e)},headerStyle:function(e,t){return{width:"8%"}}},{text:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataField:"name",filter:Object(je.textFilter)(),headerStyle:function(e,t){return{width:"35%"}}},{text:"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b",dataField:"material",filter:Object(je.selectFilter)({options:e.reduce((function(e,t){return Object(B.a)(Object(B.a)({},e),{},Object(he.a)({},t.material,t.material))}),{})}),editor:{type:fe.Type.SELECT,options:[{value:"-",label:"\u041d\u0415\u0422"}].concat(Object(le.a)(e.reduce((function(e,t){return[].concat(Object(le.a)(e),[{label:t.material,value:t.material}])}),[])))},headerStyle:function(e,t){return{width:"10%"}}},{text:"\u0426\u0432\u0435\u0442",dataField:"color",filter:Object(je.textFilter)(),editor:{type:fe.Type.SELECT,options:[{value:"-",label:"\u041d\u0415\u0422"}].concat(Object(le.a)(t.reduce((function(e,t){return[].concat(Object(le.a)(e),[{label:t.color,value:t.color}])}),[])))},headerStyle:function(e,t){return{width:"12%"}}},{text:"\u041a\u043e\u043b-\u0432\u043e",dataField:"count",validator:function(e,t,a){r(e)},headerStyle:function(e,t){return{width:"9%"}}},{text:"\u0421\u0442\u0430\u0442\u0443\u0441",dataField:"status",formatter:i,filter:Object(je.selectFilter)({options:{"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435":"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435","\u041e\u0442\u043a\u0430\u0437":"\u041e\u0442\u043a\u0430\u0437","\u041e\u043f\u043b\u0430\u0447\u0435\u043d":"\u041e\u043f\u043b\u0430\u0447\u0435\u043d"}}),editor:{type:fe.Type.SELECT,options:[{value:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435",label:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"},{value:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d",label:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d"},{value:"\u041e\u0442\u043a\u0430\u0437",label:"\u041e\u0442\u043a\u0430\u0437"}]}}]},n.controlColumns=[{text:"\u2116 \u043d\u0435\u0434.",dataField:"week",sort:!0,filter:Object(je.textFilter)(),validator:function(e,t,a){return r(e)},headerStyle:function(e,t){return{width:"8%"}}},{text:"\u2116 \u0437\u0430\u043a.",dataField:"id_fc",editable:!1,sort:!0,filter:Object(je.textFilter)(),validator:function(e,t,a){r(e)},headerStyle:function(e,t){return{width:"8%"}}},{text:"\u0421\u0430\u0439\u0442",dataField:"site_name",filter:Object(je.selectFilter)({options:{"Krovati-spalni.ru":"Krovati-spalni.ru","\u043c\u0435\u0431\u0435\u043b\u044c\u0438\u0437\u0441\u043e\u0441\u043d\u044b.\u0440\u0444":"\u043c\u0435\u0431\u0435\u043b\u044c\u0438\u0437\u0441\u043e\u0441\u043d\u044b.\u0440\u0444","Liman-murom.ru":"Liman-murom.ru"}}),headerStyle:function(e,t){return{width:"15%"}},editor:{type:fe.Type.SELECT,options:[{value:"-",label:"\u041d\u0415\u0422"},{value:"Krovati-spalni.ru",label:"Krovati-spalni.ru"},{value:"\u043c\u0435\u0431\u0435\u043b\u044c\u0438\u0437\u0441\u043e\u0441\u043d\u044b.\u0440\u0444",label:"\u043c\u0435\u0431\u0435\u043b\u044c\u0438\u0437\u0441\u043e\u0441\u043d\u044b.\u0440\u0444"},{value:"Liman-murom.ru",label:"Liman-murom.ru"}]}},{text:"\u0424\u0418\u041e",dataField:"client_name",filter:Object(je.textFilter)(),headerStyle:function(e,t){return{width:"15%"}}},{text:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",filter:Object(je.textFilter)(),dataField:"client_phone",headerStyle:function(e,t){return{width:"15%"}}},{text:"\u0410\u0434\u0440\u0435\u0441",filter:Object(je.textFilter)(),dataField:"client_address",headerStyle:function(e,t){return{width:"15%"}}},{text:"\u0421\u0442\u043e-\u0442\u044c",dataField:"price",formatter:function(e,t){return"".concat(e,"\u20bd")},headerStyle:function(e,t){return{width:"8%"}},validator:function(e,t,a){return r(e)}},{text:"\u0421\u0442\u0430\u0442\u0443\u0441",dataField:"status",formatter:i,filter:Object(je.selectFilter)({options:{"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435":"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435","\u041e\u0442\u043a\u0430\u0437":"\u041e\u0442\u043a\u0430\u0437","\u041e\u043f\u043b\u0430\u0447\u0435\u043d":"\u041e\u043f\u043b\u0430\u0447\u0435\u043d"}}),editor:{type:fe.Type.SELECT,options:[{value:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435",label:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"},{value:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d",label:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d"},{value:"\u041e\u0442\u043a\u0430\u0437",label:"\u041e\u0442\u043a\u0430\u0437"}]},headerStyle:function(e,t){return{width:"8%"}}},{text:"\u041e\u0442\u0434\u0430\u043b\u0438",dataField:"paid",formatter:function(e,t){return"".concat(e,"\u20bd")},headerStyle:function(e,t){return{width:"8%"}},validator:function(e,t,a){return r(e)}},{text:"\u0414\u043e\u043b\u0433",dataField:"debt",headerStyle:function(e,t){return{width:"6%"}}}],n.defaultSorted=[{dataField:"id_fc",order:"desc"}],n}return Object(o.a)(a,[{key:"onSelectForExelTable",value:function(e,t,a){t?this.setState({exelTableData:[].concat(Object(le.a)(this.state.exelTableData),[e])}):this.setState({exelTableData:Object(le.a)(this.state.exelTableData.filter((function(t){return t.id!==e.id})))})}},{key:"onSelectAllForExelTable",value:function(e,t){var a=this;e?t.map((function(e){return a.setState({exelTableData:Object(le.a)(t)})})):this.setState({exelTableData:[]})}},{key:"selectYearAndReloadData",value:function(e){this.setState({year:+e.target.value}),this.updateOrders(this.state.tableName,+e.target.value)}},{key:"updateOrders",value:function(e,t){var a=this;switch(e){case"prod":!function(e,t,a){Y(W.a+W.b.urlGetProdOrders,{type:"prod",year:e},t,a)}(t,(function(e){a.setState({data:e.data.reverse()})}),(function(e){return console.error(e)}));break;case"control":!function(e,t,a){Y(W.a+W.b.urlGetControlOrders,{type:"control",year:e},t,a)}(t,(function(e){a.setState({data:e.data.reverse(),title:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0434\u043b\u044f \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),(function(e){return console.error(e)}));break;default:console.log("error")}}},{key:"componentDidMount",value:function(){var e=this,t="/tables/prod"===this.props.location.pathname?"prod":"control";this.updateOrders(t,this.state.year),this.setState({tableName:t,title:"control"===t?"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0434\u043b\u044f \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432":this.state.title}),te((function(t){e.setState({materials:t.data})}),(function(e){})),$((function(t){e.setState({colors:t.data})}),(function(e){}))}},{key:"render",value:function(){var e=this,t={sizePerPageList:[{text:"10",value:10},{text:"20",value:20},{text:"30",value:30},{text:"40",value:40},{text:"50",value:50,selected:!0},{text:"\u0412\u0441\u0435",value:this.state.data.length}],sizePerPage:50};return Object(O.jsxs)("div",{className:"table-wrapper",children:[Object(O.jsx)("h1",{style:{textAlign:"center",fontFamily:"RobotoBold",fontSize:"1.5em",marginBottom:"20px"},children:this.state.title}),Object(O.jsxs)(ne.a.Select,{className:"header-selects header-selects-year","aria-label":"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0433\u043e\u0434",onChange:function(t){return e.selectYearAndReloadData(t)},children:[Object(O.jsx)("option",{children:"\u0413\u043e\u0434"}),Object(le.a)(Array((new Date).getFullYear()-2021+2).keys()).map((function(e){return e+2021})).map((function(e){return Object(O.jsx)("option",{value:e,selected:e==(new Date).getFullYear(),children:e})}))]}),Object(O.jsx)(pe.a,{striped:!0,hover:!0,condensed:!0,bordered:!0,bootstrap4:!0,keyField:"id",data:this.state.data,columns:"/tables/prod"===this.props.location.pathname?this.prodColumns(this.state.materials,this.state.colors):this.controlColumns,cellEdit:me()({mode:"dbclick",afterSaveCell:function(t,a,n,i){e.props.editCellFromRedux(n.id,i.dataField,a)}}),filter:ve()({}),filterPosition:"top",selectRow:{mode:"checkbox",clickToSelect:!0,clickToEdit:!0,onSelect:function(t,a,n,i){e.onSelectForExelTable(t,a,n)},onSelectAll:function(t,a){e.onSelectAllForExelTable(t,a)}},defaultSorted:this.defaultSorted,pagination:ge()(t)}),Object(O.jsxs)("table",{style:{display:"none"},id:"table-to-xls",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:["prod"==this.state.tableName&&this.prodColumns(this.state.materials,this.state.colors).map((function(e){return Object(O.jsx)("th",{children:e.text})})),"control"==this.state.tableName&&this.controlColumns.map((function(e){return Object(O.jsx)("th",{children:e.text})}))]})}),Object(O.jsx)("tbody",{children:this.state.exelTableData.map((function(t){return Object(O.jsxs)("tr",{children:["prod"===e.state.tableName&&e.prodColumns(e.state.materials,e.state.colors).map((function(e){return Object(O.jsx)("th",{children:t[e.dataField]})})),"control"===e.state.tableName&&e.controlColumns.map((function(e){return Object(O.jsx)("th",{children:t[e.dataField]})}))]},t.id)}))})]}),Object(O.jsxs)("p",{className:"footer-table",children:[Object(O.jsx)("button",{className:"btn btn-success",onClick:function(t){return"/tables/prod"===e.props.location.pathname?e.props.save("/save_data/prod","POST"):e.props.save("/save_data/control","POST")},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(O.jsx)(ye.a,{id:"test-table-xls-button",className:"btn btn-primary ".concat(0===this.state.exelTableData.length?"disabled":""," download-table-xls-button"),table:"table-to-xls",filename:"table_"+this.state.tableName,sheet:"tablexls",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432 XLS"})]})]})}}]),a}(i.a.Component)),ke=Object(c.b)(null,(function(e){return{editCellFromRedux:function(t,a,n){return e(function(e,t,a){return{type:F,payload:{type:"CHANGE",payload:{id:e,col:t,value:a}}}}(t,a,n))},save:function(t,a){return e(function(e,t){return{type:R,payload:{url:e,method:t}}}(t,a))}}}))(Ne),_e=(a(95),a(204),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={data:[],changes:[],selectedRows:[]},n}return Object(o.a)(a,[{key:"editCell",value:function(e,t,a,n){var i={type:"CHANGE",payload:{id:a.id,col:n.dataField,value:t}},r=-1;this.state.changes.map((function(e,t){if("CHANGE"===e.type&&e.payload.col===i.payload.col&&e.payload.id===i.payload.id)return r=t})),0===~r?this.setState({changes:[].concat(Object(le.a)(this.state.changes),[i])}):this.setState({changes:this.state.changes.reduce((function(e,t,a){return[].concat(Object(le.a)(e),a!==r?[t]:[i])}),[])})}},{key:"selectRow",value:function(e,t,a,n){t?this.setState({selectedRows:[].concat(Object(le.a)(this.state.selectedRows),[e])}):this.setState({selectedRows:this.state.selectedRows.filter((function(t){return t.id!==e.id}))})}},{key:"selectAllRows",value:function(e,t){e?this.setState({selectedRows:t}):this.setState({selectedRows:[]})}},{key:"newRow",value:function(){this.setState({data:[this.props.columns.reduce((function(e,t){return Object(B.a)(Object(B.a)({},e),{},Object(he.a)({},"id"!==t.dataField&&t.dataField,null))}),{id:(this.state.data[0]&&this.state.data[0].id||0)+1})].concat(Object(le.a)(this.state.data)),changes:[].concat(Object(le.a)(this.state.changes),[{type:"NEW_ROW",payload:{id:(this.state.data[0]&&this.state.data[0].id||0)+1}}])})}},{key:"deleteRows",value:function(){if(window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b? \u0414\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u0431\u0443\u0434\u0443\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u044b.")){var e=this.state.selectedRows.reduce((function(e,t){return[].concat(Object(le.a)(e),[t.id])}),[]);this.setState({data:this.state.data.filter((function(t){return!e.includes(t.id)})),changes:[].concat(Object(le.a)(this.state.changes),[{type:"DELETE_ROW",payload:{ids:e}}])}),h.NotificationManager.info("\u041d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f","\u0418\u043d\u0444\u043e",2e3)}}},{key:"save",value:function(e){var t=this;this.props.saveDataToAPI(this.state.changes,(function(e){e.error?h.NotificationManager.warning("\u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438\u0441\u044c","\u041e\u0448\u0438\u0431\u043a\u0430",3e3):(h.NotificationManager.success("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b!","\u041e\u041a",3e3),t.setState({changes:[]}))}),(function(e){return h.NotificationManager.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)}))}},{key:"componentDidMount",value:function(){var e=this;this.props.getDataFromAPI((function(t){return e.setState({data:t.data.reverse()})}),(function(e){return h.NotificationManager.warning("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)}))}},{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{className:"universal__table_panel ".concat(this.props.className),children:[void 0!==this.props.title&&Object(O.jsx)("h2",{className:"universal__table_panel_title",children:this.props.title}),Object(O.jsx)(pe.a,{striped:!0,hover:!0,condensed:!0,bordered:!0,bootstrap4:!0,keyField:"id",data:this.state.data,columns:this.props.columns,cellEdit:me()({mode:"dbclick",afterSaveCell:function(t,a,n,i){e.editCell(t,a,n,i)}}),selectRow:{mode:"checkbox",clickToSelect:!0,clickToEdit:!0,onSelect:function(t,a,n,i){e.selectRow(t,a,n)},onSelectAll:function(t,a){e.selectAllRows(t,a)}},defaultSorted:[{dataField:"id",order:"desc"}],pagination:this.props.optPagination&&ge()()}),Object(O.jsxs)("div",{className:"panel_bottom",children:[Object(O.jsx)("button",{className:"btn btn-danger",onClick:function(t){return e.deleteRows()},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),void 0!==this.props.enableNewRow&&this.props.enableNewRow&&Object(O.jsx)("button",{className:"btn btn-success",onClick:function(t){return e.newRow()},children:"\u041d\u043e\u0432\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430"}),Object(O.jsx)("button",{className:"btn btn-primary",onClick:function(t){return e.save(t)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})}}]),a}(i.a.Component)),Ce=[Object(O.jsx)("span",{className:"_mark mark-admin",children:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"}),Object(O.jsx)("span",{className:"_mark mark-moderator",children:"\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440"}),Object(O.jsx)("span",{className:"_mark mark-editor",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440"}),"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"],we=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).columns=[{text:"ID",dataField:"id",editable:!1},{text:"\u0424\u0418\u041e",dataField:"name"},{text:"\u041b\u043e\u0433\u0438\u043d",dataField:"login",editable:!1},{text:"\u0420\u043e\u043b\u044c",dataField:"role",formatter:function(e,t){return Ce[t.role]},editor:{type:fe.Type.SELECT,options:[{value:"0",label:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"},{value:"1",label:"\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440"},{value:"2",label:"\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440"},{value:"3",label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"}]}},{text:"\u0410\u043a\u0442\u0438\u0432\u0435\u043d",dataField:"active",formatter:function(e,t){return 1==t.active?Object(O.jsx)("span",{className:"_mark mark-moderator",children:"\u0410\u043a\u0442\u0438\u0432\u0435\u043d"}):Object(O.jsx)("span",{className:"_mark mark-admin",children:"\u041d\u0435 \u0430\u043a\u0442\u0438\u0432\u0435\u043d"})},editor:{type:fe.Type.SELECT,options:[{value:"0",label:"\u041d\u0435 \u0430\u043a\u0442\u0438\u0432\u0435\u043d"},{value:"1",label:"\u0410\u043a\u0442\u0438\u0432\u0435\u043d"}]}}],n}return Object(o.a)(a,[{key:"render",value:function(){return Object(O.jsx)("div",{className:"ManageUsers",children:Object(O.jsx)(_e,{className:"users",title:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438",columns:this.columns,getDataFromAPI:K,saveDataToAPI:q,optPagination:!0,enableNewRow:!1})})}}]),a}(i.a.Component),Se=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e)}return Object(o.a)(a,[{key:"getCurrentWeek",value:function(){return Date.prototype.getWeek=function(){var e=864e5,t=new Date(this.getFullYear(),0,1,0,0,0),a=0===t.getDay()?7:t.getDay(),n=8-a,i=t.getTime()+n*e,r=a>1?i:t.getTime(),s=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0).getTime(),c=Math.round((s-r)/e);new Date(r);return c>=0&&c<364?Math.ceil((c+1)/7):52},(new Date).getWeek()}},{key:"render",value:function(){return Object(O.jsxs)("div",{className:"Home",children:[this.props.auth&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("h1",{children:["\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435, ",this.props.user.name]}),Object(O.jsxs)("h2",{className:"current_week",children:["\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043d\u0435\u0434\u0435\u043b\u044f: ",Object(O.jsx)("span",{className:"mark",children:this.getCurrentWeek()})]})]}),!this.props.auth&&Object(O.jsx)("p",{children:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c!"})]})}}]),a}(i.a.Component),Ie=Object(c.b)((function(e){return{user:e.user,auth:e.app.authorization}}),null)(Se),Ae=a(54),Ee=a.n(Ae),Pe=a(55),De=a.n(Pe),Fe=(a(205),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).state={prods:[],selectedRows:[],colors:[],materials:[],delivery_price:n.props.invoiceData.delivery_price||0,delivery:n.props.invoiceData.delivery||!1,currentStateActiveAddInputs:{delivery:null,entering:null,assembly:null,assemblyAndEntering:null}},n.delivery=i.a.createRef(null),n.entering=i.a.createRef(null),n.assembly=i.a.createRef(null),n.assemblyAndEntering=i.a.createRef(null);var r=function(e,t,a){return isNaN(e)?{valid:!1,message:"\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0447\u0438\u0441\u043b\u043e"}:!(e>1e6)||{valid:!1,message:"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0435 \u0447\u0438\u0441\u043b\u043e!"}};return n.columns=function(e,t){return[{text:"\u2116 \u043f/\u043f",dataField:"index",headerStyle:function(e,t){return{width:"5%"}},editable:!1,footer:function(e){return""}},{text:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430 (\u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0445 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0445 \u0443\u0441\u043b\u0443\u0433)",dataField:"name",headerStyle:function(e,t){return{width:"30%"}},validator:function(e,t,a){return function(e,t,a){return e.length<2?{valid:!1,message:"\u0421\u0442\u0440\u043e\u043a\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 1 \u0441\u0438\u043c\u0432\u043e\u043b\u0430"}:!(e.length>=100)||{valid:!1,message:"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430!"}}(e)},footer:function(e){return""}},{text:"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b",dataField:"material",editor:{type:fe.Type.SELECT,options:[{value:"-",label:"\u041d\u0415\u0422"}].concat(Object(le.a)(e.reduce((function(e,t){return[].concat(Object(le.a)(e),[{label:t.material,value:t.material}])}),[])))},footer:function(e){return""}},{text:"\u0426\u0432\u0435\u0442",dataField:"color",editor:{type:fe.Type.SELECT,options:[{value:"-",label:"\u041d\u0415\u0422"}].concat(Object(le.a)(t.reduce((function(e,t){return[].concat(Object(le.a)(e),[{label:t.color,value:t.color}])}),[])))},footer:function(e){return""}},{text:"\u0415\u0434. \u0438\u0437\u043c.",dataField:"units",editable:!1,footer:function(e){return""}},{text:"\u041a\u043e\u043b-\u0432\u043e",dataField:"count",validator:function(e,t,a){return r(e)},footer:function(e){return n.state.delivery&&"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430: "}},{text:"\u0426\u0435\u043d\u0430 (\u0442\u0430\u0440\u0438\u0444) \u0440\u0443\u0431.\u043a\u043e\u043f.",dataField:"price",formatter:function(e,t){return"".concat(e,"\u20bd")},validator:function(e,t,a){return r(e)},footer:function(e){return n.state.delivery&&"+ ".concat(n.state.delivery_price," = ")}},{text:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u043e\u0432 (\u0440\u0430\u0431\u043e\u0442, \u0443\u0441\u043b\u0443\u0433) \u0440\u0443\u0431.\u043a\u043e\u043f.",dataField:"allPrice",editable:!1,formatter:function(e,t){return"".concat(e,"\u20bd")},footer:function(e){var t=e.reduce((function(e,t){return e+t}),0)+(n.state.delivery?n.state.delivery_price:0);return n.props.addInvoiceChange({type:"CHANGE",payload:{col:"priceAllControl",value:t,id:n.props.invoiceData.id_fc}}),"".concat(t,"\u20bd")}}]},n.invoiceRef=i.a.createRef(),n}return Object(o.a)(a,[{key:"printInvoice",value:function(){var e=this.props.invoiceData;X([this.props.invoiceData.id],(function(t){Ee()(t,"\u0437\u0430\u043a\u0430\u0437_".concat(e.id_fc,".docx"))}),(function(e){return h.NotificationManager.warning("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043a\u0430\u0447\u0430\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)}))}},{key:"newRow",value:function(){this.setState({prods:[].concat(Object(le.a)(this.state.prods),[{allPrice:0,assemblyAndEntering:!1,color:"-",count:0,id:0===this.state.prods.length?1:this.state.prods[this.state.prods.length-1].id+1,id_fc:this.props.invoiceData.id_fc,id_iv:this.props.invoiceData.id,index:0===this.state.prods.length?1:this.state.prods[this.state.prods.length-1].index+1,material:"-",name:"",price:0,units:"\u0448\u0442.",week:this.props.invoiceData.week}])}),this.props.addInvoiceChange({type:"NEW_ROW",payload:{id:0===this.state.prods.length?1:this.state.prods[this.state.prods.length-1].id+1}})}},{key:"deleteRow",value:function(){var e=this.state.selectedRows.reduce((function(e,t){return[].concat(Object(le.a)(e),[t.id])}),[]);this.setState({prods:this.state.prods.filter((function(t){return!e.includes(t.id)}))}),this.props.addInvoiceChange({type:"DELETE_ROW",payload:e})}},{key:"saveInvoice",value:function(){this.props.saveInvoiceChanges(this.props.invoiceData)}},{key:"componentDidMount",value:function(){var e,t,a=this;e=function(e){var t=1;a.setState({prods:e.data.filter((function(e){return e.id_iv===a.props.invoiceData.id})).reduce((function(e,a){return[].concat(Object(le.a)(e),[Object(B.a)(Object(B.a)({},a),{},{units:"\u0448\u0442.",index:t++,assemblyAndEntering:!!a.assembly&&!!a.entering})])}),[])})},t=function(e){return h.NotificationManager.warning("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)},Y(W.a+W.b.urlGetInvoices,{type:"prods"},e,t),te((function(e){a.setState({materials:e.data})}),(function(e){})),$((function(e){a.setState({colors:e.data})}),(function(e){}))}},{key:"onSelectForExelTable",value:function(e,t,a){t?this.setState({selectedRows:[].concat(Object(le.a)(this.state.selectedRows),[e])}):this.setState({selectedRows:Object(le.a)(this.state.selectedRows.filter((function(t){return t.id!==e.id})))})}},{key:"onSelectAllForExelTable",value:function(e,t){e?this.setState({selectedRows:Object(le.a)(t)}):this.setState({selectedRows:[]})}},{key:"updateAllPriceCell",value:function(e,t,a){if(console.log(e,t,a),"price"===a.dataField){var n=this.state.prods;n.map((function(a,i){if(a.id===t.id)return n[i].allPrice=Number(t.count)*Number(e),n[i]})),this.setState({prods:n}),this.props.addInvoiceChange({type:"CHANGE",payload:{col:"allPrice",value:Number(t.count)*Number(e),id:t.id}})}if("count"===a.dataField){var i=this.state.prods;i.map((function(a,n){if(a.id===t.id)return i[n].allPrice=Number(t.price)*Number(e),i[n]})),this.setState({prods:i}),this.props.addInvoiceChange({type:"CHANGE",payload:{col:"allPrice",value:Number(t.price)*Number(e),id:t.id}})}}},{key:"changeCell",value:function(e,t,a,n){this.updateAllPriceCell(t,a,n),this.props.addInvoiceChange({type:"CHANGE",payload:{col:n.dataField,value:t,id:a.id}})}},{key:"applyAllPrices",value:function(){this.setState({delivery_price:+this.delivery.current.value,currentStateActiveAddInputs:{delivery:!0,entering:!0,assembly:!0,assemblyAndEntering:!0}}),this.props.addInvoiceChange({type:"CHANGE/delivery_price",payload:+this.delivery.current.value}),this.props.addInvoiceChange({type:"CHANGE/entering_price",payload:+this.entering.current.value}),this.props.addInvoiceChange({type:"CHANGE/assembly_price",payload:+this.assembly.current.value}),this.props.addInvoiceChange({type:"CHANGE/assemblyAndEntering_price",payload:+this.assemblyAndEntering.current.value})}},{key:"handleDelete",value:function(){var e=this;window.confirm("\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437?")&&Z([{hash:this.props.invoiceData.hash,id_fc:this.props.invoiceData.id_fc}],(function(t){e.props.history.push("/invoices/"+(new Date).getFullYear()),h.NotificationManager.success("\u0417\u0430\u043a\u0430\u0437 \u0443\u0434\u0430\u043b\u0435\u043d","OK",3e3)}),(function(e){h.NotificationManager.error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)}))}},{key:"render",value:function(){var e=this,t=function(t,a){return Object(O.jsxs)(ne.a.Select,{className:"","aria-label":"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0433\u043e\u0434",name:a,onChange:function(t){return function(t){"CHANGE/delivery"===t.target.name&&e.setState({delivery:"\u0414\u0430"==t.target.value}),e.props.addInvoiceChange({type:a,payload:t.target.value})}(t)},children:[Object(O.jsx)("option",{value:"",children:"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435"}),Object(O.jsx)("option",{selected:!!t,value:"\u0414\u0430",children:"\u0414\u0430"}),Object(O.jsx)("option",{selected:!t,value:"\u041d\u0435\u0442",children:"\u041d\u0435\u0442"})]})},a=function(t,a,n){var i=a.split("/")[1].split("_")[0];return Object(O.jsx)("input",{type:"number",className:"\n\t\t\t\t\t".concat(i," \n\t\t\t\t\t").concat(null!==e.state.currentStateActiveAddInputs[i]?e.state.currentStateActiveAddInputs[i]?"applied":"noapplied":"","\n\t\t\t\t"),ref:n,defaultValue:t,onKeyPress:function(t){return function(t){switch(a){case"CHANGE/delivery_price":"Enter"===t.key?(e.setState({delivery_price:+t.target.value,currentStateActiveAddInputs:Object(B.a)(Object(B.a)({},e.state.currentStateActiveAddInputs),{},{delivery:!0})}),e.props.addInvoiceChange({type:a,payload:+t.target.value})):e.setState({currentStateActiveAddInputs:Object(B.a)(Object(B.a)({},e.state.currentStateActiveAddInputs),{},{delivery:!1})});break;case"CHANGE/entering_price":"Enter"===t.key?(e.setState({currentStateActiveAddInputs:Object(B.a)(Object(B.a)({},e.state.currentStateActiveAddInputs),{},{entering:!0})}),e.props.addInvoiceChange({type:a,payload:+t.target.value})):e.setState({currentStateActiveAddInputs:Object(B.a)(Object(B.a)({},e.state.currentStateActiveAddInputs),{},{entering:!1})});break;case"CHANGE/assembly_price":"Enter"===t.key?(e.setState({currentStateActiveAddInputs:Object(B.a)(Object(B.a)({},e.state.currentStateActiveAddInputs),{},{assembly:!0})}),e.props.addInvoiceChange({type:a,payload:+t.target.value})):e.setState({currentStateActiveAddInputs:Object(B.a)(Object(B.a)({},e.state.currentStateActiveAddInputs),{},{assembly:!1})});break;case"CHANGE/assemblyAndEntering_price":"Enter"===t.key?(e.setState({currentStateActiveAddInputs:Object(B.a)(Object(B.a)({},e.state.currentStateActiveAddInputs),{},{assemblyAndEntering:!0})}),e.props.addInvoiceChange({type:a,payload:+t.target.value})):e.setState({currentStateActiveAddInputs:Object(B.a)(Object(B.a)({},e.state.currentStateActiveAddInputs),{},{assemblyAndEntering:!1})})}}(t)}})};return Object(O.jsxs)("div",{className:"Invoice-wrapper",children:[!!this.props.invoiceData.deliver_back&&Object(O.jsx)("span",{className:"deliver-back-mark",children:"\u0414\u043e\u0432\u043e\u0437"}),Object(O.jsxs)("div",{className:"Invoice",ref:this.invoiceRef,children:[Object(O.jsxs)("div",{className:"header",children:[Object(O.jsx)("div",{className:"logo",children:function(e){switch(e){case"Krovati-spalni.ru":return Object(O.jsx)("img",{src:"".concat(W.a,"/images/logo_krovati_var_22.png"),alt:"logo"});case"\u043c\u0435\u0431\u0435\u043b\u044c\u0438\u0437\u0441\u043e\u0441\u043d\u044b.\u0440\u0444":return Object(O.jsx)("img",{src:"".concat(W.a,"/images/ms.png"),alt:"logo"});case"Liman-murom.ru":return Object(O.jsx)("img",{src:"".concat(W.a,"/images/lim.jpg"),alt:"logo"});default:return Object(O.jsx)("img",{title:"no image"})}}(this.props.invoiceData.site_name)}),Object(O.jsxs)("div",{className:"info_block",children:[Object(O.jsxs)("div",{className:"client_info client_name",children:[Object(O.jsx)("span",{children:"\u0424\u0418\u041e"}),": ",this.props.invoiceData.client_name]}),Object(O.jsxs)("div",{className:"client_info client_phone",children:[Object(O.jsx)("span",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),": ",this.props.invoiceData.client_phone]}),Object(O.jsxs)("div",{className:"client_info client_address",children:[Object(O.jsx)("span",{children:"\u0410\u0434\u0440\u0435\u0441"}),": ",this.props.invoiceData.client_address]})]})]}),Object(O.jsx)("div",{className:"sub-header",children:Object(O.jsxs)("p",{children:[Object(O.jsxs)("span",{children:["\u0417\u0430\u043a\u0430\u0437 \u2116 ",Object(O.jsx)("span",{className:"number_order",children:this.props.invoiceData.id_fc})]}),Object(O.jsxs)("span",{children:["\u0414\u0430\u0442\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438 ",Object(O.jsx)("span",{className:"date_order",children:this.props.invoiceData.date_order})]})]})}),Object(O.jsx)("div",{className:"prods",children:Object(O.jsx)(pe.a,{striped:!0,hover:!0,condensed:!0,bordered:!0,keyField:"id",data:this.state.prods,columns:this.columns(this.state.materials,this.state.colors),cellEdit:me()({mode:"dbclick",afterSaveCell:function(t,a,n,i){return e.changeCell(t,a,n,i)}}),selectRow:{mode:"checkbox",clickToSelect:!0,clickToEdit:!0,onSelect:function(t,a,n,i){e.onSelectForExelTable(t,a,n)},onSelectAll:function(t,a){e.onSelectAllForExelTable(t,a)}}})}),Object(O.jsxs)("div",{className:"table-bottom-panel",children:[Object(O.jsx)("button",{className:"btn btn-success",onClick:this.newRow.bind(this),children:"\u041d\u043e\u0432\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430"}),Object(O.jsx)("button",{className:"btn btn-danger",onClick:this.deleteRow.bind(this),children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443"})]}),Object(O.jsx)("p",{className:"gost",children:"\u0414\u0430\u043d\u043d\u0430\u044f \u043c\u0435\u0431\u0435\u043b\u044c \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0413\u041e\u0421\u0422\u0443 16371-93 \u0438 \u0433\u043e\u0441\u0442\u0443 19917-93, \u0438\u043c\u0435\u0435\u0442 \u0433\u0438\u0433\u0438\u0435\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442, \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044f, \u043f\u0440\u0438\u0437\u043d\u0430\u043d\u0430 \u0433\u043e\u0434\u043d\u043e\u0439 \u043a \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438."}),Object(O.jsxs)("div",{className:"assembly-and-entering",children:[Object(O.jsxs)("span",{className:"name-field",children:["\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430",Object(O.jsxs)("span",{className:"field field_data field-delivery",children:[t(this.state.delivery,"CHANGE/delivery"),a(this.props.invoiceData.delivery_price,"CHANGE/delivery_price",this.delivery)]})]}),Object(O.jsxs)("span",{className:"name-field",children:["\u0421\u0431\u043e\u0440",Object(O.jsxs)("span",{className:"field field_data field-assembly",children:[t(this.props.invoiceData.assembly,"CHANGE/assembly"),a(this.props.invoiceData.assembly_price,"CHANGE/assembly_price",this.assembly)]})]}),Object(O.jsxs)("span",{className:"name-field",children:["\u0417\u0430\u043d\u043e\u0441",Object(O.jsxs)("span",{className:"field field_data field-entering",children:[t(this.props.invoiceData.entering,"CHANGE/entering"),a(this.props.invoiceData.entering_price,"CHANGE/entering_price",this.entering)]})]}),Object(O.jsxs)("span",{className:"name-field",children:["\u0421\u0431\u043e\u0440/\u0417\u0430\u043d\u043e\u0441",Object(O.jsxs)("span",{className:"field field_data field-assembly-entering",children:[t(this.props.invoiceData.assemblyAndEntering,"CHANGE/assemblyAndEntering"),a(this.props.invoiceData.assemblyAndEntering_price,"CHANGE/assemblyAndEntering_price",this.assemblyAndEntering)]})]}),Object(O.jsx)("p",{style:{textAlign:"center",marginTop:"10px"},children:Object(O.jsx)("button",{className:"btn btn-primary apply_all_assembly_and_entering_block",onClick:this.applyAllPrices.bind(this),children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0432\u0441\u0435"})})]}),Object(O.jsxs)("div",{className:"write-for-client",children:[Object(O.jsx)("p",{children:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a:"}),Object(O.jsxs)("p",{className:"write-for-client-data",children:[Object(O.jsxs)("span",{className:"info write-name-client",children:["\u0424\u0418\u041e",Object(O.jsx)("span",{className:"field"})]}),Object(O.jsxs)("span",{className:"info write-phone-client",children:["\u0422\u0435\u043b.",Object(O.jsx)("span",{className:"field"})]})]})]}),Object(O.jsxs)("p",{className:"signature",children:["\u041f\u043e\u0434\u043f\u0438\u0441\u044c ",Object(O.jsx)("span",{className:"field"})]})]}),Object(O.jsxs)("div",{className:"panel-bottom",children:[Object(O.jsx)("button",{className:"btn btn-danger",onClick:this.handleDelete.bind(this),children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(O.jsx)("button",{className:"btn btn-success",onClick:this.saveInvoice.bind(this),children:"\u0421\u043e\u0445\u0430\u043d\u0438\u0442\u044c"}),Object(O.jsx)("button",{className:"btn btn-primary",onClick:this.printInvoice.bind(this),children:"\u041f\u0435\u0447\u0430\u0442\u044c"})]})]})}}]),a}(i.a.Component)),Re=Object(c.b)((function(e){return{changes:e.app.invoiceChanges}}),(function(e){return{addInvoiceChange:function(t){return e({type:P,payload:t})},saveInvoiceChanges:function(t){return e(function(e){return{type:D,payload:e}}(t))}}}))(Fe),Te=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={invoices:[],activeInvoice:!1,activeRow:{},selectedYear:n.props.match.params.year||(new Date).getFullYear(),selectedWeek:-1,deliverVisible:!1,selectInvoices:[],findedNumberOrder:-1,countItemsInPage:30,currentPage:1,maxCountPages:5,currentMove:0},n.deliverNumberOrder=i.a.createRef(),n}return Object(o.a)(a,[{key:"updateListInvoices",value:function(e){var t=this;J(this.state.selectedYear,(function(a){t.setState({invoices:a.data.slice(0).sort((function(e,t){return e.id_fc>t.id_fc?1:e.id_fc<t.id_fc?-1:0})).reverse()}),e(a.data).bind(t)}),(function(e){return console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;this.updateListInvoices((function(t){if(Boolean(e.props.match.params.id)){var a=t.filter((function(t){return t.id===+e.props.match.params.id}));0!==a.length?e.setState({activeInvoice:!0,activeRow:a[0],selectInvoices:[]}):e.props.history.push("/invoices")}}))}},{key:"onEventHandlerForLabel",value:function(e,t){switch(e.detail){case 1:if(this.state.selectInvoices.reduce((function(e,t){return[].concat(Object(le.a)(e),[t.id])}),[]).includes(t.id)){var a=this.state.selectInvoices.filter((function(e){return e.id!=t.id}));console.log(a),this.setState({selectInvoices:Object(le.a)(a)})}else this.setState({selectInvoices:[].concat(Object(le.a)(this.state.selectInvoices),[t])});break;case 2:e.preventDefault(),this.props.history.push("/invoices/".concat(this.state.selectedYear,"/").concat(t.id));break;default:return}}},{key:"selectWeekAndReloadData",value:function(e){this.setState({selectedWeek:+e.target.value})}},{key:"selectYearAndReloadData",value:function(e){var t=this;J(+e.target.value,(function(a){t.setState({invoices:a.data.slice(0).sort((function(e,t){return e.id_fc>t.id_fc?1:e.id_fc<t.id_fc?-1:0})).reverse(),selectedYear:+e.target.value}),t.props.history.push("/invoices/".concat(e.target.value))}),(function(e){return console.log(e)}))}},{key:"createDeliverBack",value:function(e){var t,a,n,i=this;0!==this.state.invoices.filter((function(e){return e.id_fc===+i.deliverNumberOrder.current.value})).length?(t=+this.deliverNumberOrder.current.value,a=function(e){e.error?h.NotificationManager.warning("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0434\u043e\u0432\u043e\u0437","\u041e\u0448\u0438\u0431\u043a\u0430",3e3):i.setState({invoices:[Object(B.a)(Object(B.a)({},i.state.invoices.filter((function(e){return e.id_fc===+i.deliverNumberOrder.current.value}))[0]),{},{deliver_back:1,id:i.state.invoices[i.state.invoices.length-1].id+1})].concat(Object(le.a)(i.state.invoices)),deliverVisible:!1})},n=function(e){return h.NotificationManager.warning("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0434\u043e\u0432\u043e\u0437","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)},V(W.a+W.b.urlPostInvoiceDeliverBack,{id_fc:t},a,n)):h.NotificationManager.warning("\u0422\u0430\u043a\u043e\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)}},{key:"printSelected",value:function(e){X(this.state.selectInvoices.reduce((function(e,t){return[].concat(Object(le.a)(e),[t.id])}),[]),(function(e){Ee()(e,"\u0437\u0430\u043a\u0430\u0437\u044b.docx")}),(function(e){return console.log(e)}))}},{key:"handleOnFindNumberOrder",value:function(e){this.setState({findedNumberOrder:+e.target.value||-1})}},{key:"_filter",value:function(e){var t=this;return e.length>0?e.filter((function(e){return-1===t.state.findedNumberOrder||(""+e.id_fc).includes(+t.state.findedNumberOrder)})):[]}},{key:"handleDeleteInvoice",value:function(e){var t=this;window.confirm("\u0412\u044b \u0443\u0435\u0432\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437?")&&(Z(this.state.selectInvoices.reduce((function(e,t){return[].concat(Object(le.a)(e),[{hash:t.hash,id_fc:t.id_fc}])}),[]),(function(e){h.NotificationManager.success("\u0417\u0430\u043a\u0430\u0437 \u0438 \u0432\u0441\u0435, \u0447\u0442\u043e \u0441 \u043d\u0438\u043c \u0441\u0432\u044f\u0437\u0430\u043d\u043e, \u0443\u0434\u0430\u043b\u0435\u043d\u043e","\u041e\u041a",3e3)}),(function(e){h.NotificationManager.warning("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)})),this.setState({invoices:this.state.invoices.filter((function(e){return!t.state.selectInvoices.reduce((function(e,t){return[].concat(Object(le.a)(e),[t.id])}),[]).includes(e.id)})),selectInvoices:[]}))}},{key:"range",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(le.a)(Array(e).keys()).map((function(e){return e+t}))}},{key:"toForward",value:function(e){this.state.currentPage<Math.ceil(this.state.invoices.length/this.state.countItemsInPage)&&this.setState({currentPage:this.state.currentPage+1})}},{key:"toBackward",value:function(e){this.state.currentPage>1&&this.setState({currentPage:this.state.currentPage-1})}},{key:"pickPage",value:function(e){this.setState({currentPage:e.selected+1})}},{key:"render",value:function(){var e=this,t=this.state.invoices.reduce((function(e,t){return e.includes(t.week)?e:[].concat(Object(le.a)(e),[t.week])}),[]).sort(),a=-1===this.state.selectedWeek?this._filter(this.state.invoices).filter((function(t,a){return a>=(e.state.currentPage-1)*e.state.countItemsInPage&&a<e.state.currentPage*e.state.countItemsInPage})):this._filter(this.state.invoices).filter((function(t){return t.week===e.state.selectedWeek})).filter((function(t,a){return a>=(e.state.currentPage-1)*e.state.countItemsInPage&&a<e.state.currentPage*e.state.countItemsInPage})),n=-1===this.state.selectedWeek?Math.ceil(this._filter(this.state.invoices).length/this.state.countItemsInPage):Math.ceil(this._filter(this.state.invoices).filter((function(t){return t.week===e.state.selectedWeek})).length/this.state.countItemsInPage);return Object(O.jsxs)("div",{className:"invoices_section",children:[Object(O.jsxs)("h1",{className:"header",children:[this.state.activeInvoice&&Object(O.jsx)(b.b,{to:"/invoices/".concat(this.state.selectedYear),className:"invoices_section__back",children:Object(O.jsx)(f.b,{})}),"\u0417\u0430\u043a\u0430\u0437\u044b",this.state.activeInvoice?": ".concat(this.state.activeRow.id_fc):""]}),!this.state.activeInvoice&&Object(O.jsxs)("div",{className:"invoices_list_wrapper",children:[Object(O.jsxs)("div",{className:"panel",children:[Object(O.jsxs)(ne.a.Select,{className:"header-selects header-selects-week","aria-label":"\u041d\u0435\u0434\u0435\u043b\u044f",onChange:function(t){return e.selectWeekAndReloadData(t)},children:[Object(O.jsx)("option",{value:"-1",children:"\u2116 \u043d\u0435\u0434\u0435\u043b\u0438"}),t.map((function(e){return Object(O.jsx)("option",{value:e,children:e},e)}))]}),Object(O.jsx)(ne.a.Select,{defaultValue:this.state.selectedYear,className:"header-selects header-selects-year","aria-label":"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0433\u043e\u0434",onChange:function(t){return e.selectYearAndReloadData(t)},children:Object(le.a)(Array((new Date).getFullYear()-2021+2).keys()).map((function(e){return e+2021})).map((function(e){return Object(O.jsx)("option",{value:e,selected:e==(new Date).getFullYear(),children:e})}))}),Object(O.jsx)(ie.a,{hasValidation:!0,controlId:"floatingInput",label:"\u041d\u0430\u0439\u0442\u0438 \u043d\u043e\u043c\u0435\u0440 \u0437\u0430\u043a\u0430\u0437\u0430",className:"find_order",children:Object(O.jsx)(ne.a.Control,{autoFocus:!0,name:"name",type:"number",placeholder:"4013",onChange:function(t){return e.handleOnFindNumberOrder(t)}})})]}),Object(O.jsxs)("div",{className:"label_thead",children:[Object(O.jsx)("span",{className:"number_order",children:"\u2116 \u041d\u0435\u0434\u0435\u043b\u0438"}),Object(O.jsx)("span",{className:"number_order",children:"\u2116 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(O.jsx)("span",{className:"client_name",children:"\u0424\u0418\u041e"}),Object(O.jsx)("span",{className:"client_phone",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"})]}),Object(O.jsx)("ul",{className:"invoices_list",children:a.length>0&&a.map((function(t,a){return Object(O.jsx)("li",{onClick:function(a){return e.onEventHandlerForLabel(a,t)},children:Object(O.jsx)(ne.a.Check,{type:"checkbox",id:"invoice_".concat(a),className:"choice choice_".concat(a),label:Object(O.jsxs)(i.a.Fragment,{children:[Object(O.jsx)("span",{className:"field number_order",children:t.week}),Object(O.jsx)("span",{className:"field number_order",children:t.id_fc}),Object(O.jsx)("span",{className:"field client_name",children:t.client_name}),Object(O.jsx)("span",{className:"field client_phone",children:t.client_phone}),t.deliver_back?Object(O.jsx)("span",{className:"deliver_back",children:"\u0414\u043e\u0432\u043e\u0437"}):Object(O.jsx)(O.Fragment,{})]})})},"li_".concat(a))}))}),this.state.deliverVisible&&Object(O.jsxs)("div",{className:"deliver",children:[Object(O.jsx)("span",{children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0434\u043e\u0432\u043e\u0437: "}),Object(O.jsx)(ie.a,{controlId:"floatingInput",label:"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u043a\u0430\u0437\u0430",className:"mb-4",children:Object(O.jsx)(ne.a.Control,{type:"text",placeholder:"3400",autoFocus:!0,ref:this.deliverNumberOrder})}),Object(O.jsxs)("div",{className:"button-wrapper",children:[Object(O.jsx)("button",{className:"btn btn-primary add-deliver",onClick:this.createDeliverBack.bind(this),children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"}),Object(O.jsx)("button",{className:"btn btn-danger",onClick:function(t){return e.setState({deliverVisible:!1})},children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]})]}),Object(O.jsxs)("div",{className:"pagination-wrapper",children:[Object(O.jsxs)(ne.a.Select,{onChange:function(t){return e.setState({countItemsInPage:+t.target.value})},className:"header-selects header-selects-year","aria-label":"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0430\u0439\u0442\u043e\u043c\u043e\u0432",children:[Object(O.jsx)("option",{value:"10",children:"\u041a\u043e\u043b-\u0432\u043e: 10"}),Object(O.jsx)("option",{value:"20",children:"\u041a\u043e\u043b-\u0432\u043e: 20"}),Object(O.jsx)("option",{value:"30",selected:!0,children:"\u041a\u043e\u043b-\u0432\u043e: 30"}),Object(O.jsx)("option",{value:"40",children:"\u041a\u043e\u043b-\u0432\u043e: 40"}),Object(O.jsx)("option",{value:"50",children:"\u041a\u043e\u043b-\u0432\u043e: 50"}),Object(O.jsx)("option",{value:this.state.invoices.length,children:"\u0412\u0441\u0435"})]}),Object(O.jsx)(De.a,{previousLabel:Object(O.jsx)(f.b,{}),nextLabel:Object(O.jsx)(f.c,{}),breakLabel:"...",breakClassName:"break-me",pageCount:n,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:this.pickPage.bind(this),containerClassName:"pagination",activeClassName:"active"})]}),Object(O.jsxs)("p",{className:"button_wrapper",children:[Object(O.jsx)("button",{onClick:function(t){return e.props.history.push("/invoices/".concat(e.state.selectedYear,"/").concat(e.state.selectInvoices[0].id))},className:"btn btn-secondary ".concat(1===this.state.selectInvoices.length?"":"disabled"),style:{marginRight:"10px"},children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"}),Object(O.jsx)("button",{onClick:function(t){return e.handleDeleteInvoice(t)},className:"btn btn-danger ".concat(this.state.selectInvoices.length>0?"":"disabled"),style:{marginRight:"10px"},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(O.jsx)("button",{onClick:function(t){return e.setState({deliverVisible:!0})},className:"btn btn-success",style:{marginRight:"10px"},children:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0434\u043e\u0432\u043e\u0437"}),Object(O.jsx)("button",{onClick:this.printSelected.bind(this),className:"btn btn-primary ".concat(0===this.state.selectInvoices.length?"disabled":""),children:"\u041f\u0435\u0447\u0430\u0442\u044c"})]})]}),this.state.activeInvoice&&Object(O.jsx)(Re,{history:this.props.history,invoiceData:this.state.activeRow})]})}}]),a}(i.a.Component),Me=Object(c.b)((function(e){return{auth:e.app.authorization,user:e.user}}),null)(Te),Le=(a(206),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={backups:[],countItemsInPage:5,currentPage:1,maxCountPages:5},n.columnColors=[{text:"ID",dataField:"id",sort:!0},{text:"\u0426\u0432\u0435\u0442",dataField:"color"}],n.columnMaterials=[{text:"ID",dataField:"id",sort:!0},{text:"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b",dataField:"material"}],n}return Object(o.a)(a,[{key:"handleMakeBackup",value:function(e){var t,a,n=this;t=function(e){console.log(e),n.setState({backups:[e.fileName].concat(Object(le.a)(n.state.backups))})},a=function(e){return console.log(e)},V(W.a+W.b.urlMakeBackup,{},t,a)}},{key:"toBackup",value:function(e){var t,a,n;window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u0430\u0442\u0438\u0442\u044c\u0441\u044f?")&&(t=e,a=function(e){return!e.error&&h.NotificationManager.success("\u0411\u0430\u0437\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043a\u0430\u0442\u0438\u043b\u0430\u0441\u044c","OK",3e3)},n=function(e){return h.NotificationManager.error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043a\u0430\u0442\u0430\u0442\u0438\u0442\u044c\u0441\u044f","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)},V(W.a+W.b.urlToBackup,{fileName:t},a,n))}},{key:"pickPage",value:function(e){this.setState({currentPage:e.selected+1})}},{key:"componentDidMount",value:function(){var e,t,a=this;e=function(e){console.log(e),a.setState({backups:e.data.sort()})},t=function(e){return console.log(e)},Y(W.a+W.b.urlGetBackups,{},e,t)}},{key:"render",value:function(){var e=this,t=this.state.backups.filter((function(t,a){return a>=(e.state.currentPage-1)*e.state.countItemsInPage&&a<e.state.currentPage*e.state.countItemsInPage})),a=Math.ceil(this.state.backups.length/this.state.countItemsInPage);return Object(O.jsxs)(i.a.Fragment,{children:[Object(O.jsx)("h1",{style:{textAlign:"center",fontFamily:"RobotoBold",fontSize:"1.5em",marginBottom:"20px"},children:"\u0421\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),Object(O.jsxs)("div",{className:"SystemSettings",children:[Object(O.jsx)("div",{className:"slot slot_colors",children:Object(O.jsx)(_e,{className:"colors",title:"\u0426\u0432\u0435\u0442\u0430",columns:this.columnColors,getDataFromAPI:$,saveDataToAPI:ee,optPagination:!0,enableNewRow:!0})}),Object(O.jsx)("div",{className:"slot slot_materials",children:Object(O.jsx)(_e,{className:"materials",title:"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b",columns:this.columnMaterials,getDataFromAPI:te,saveDataToAPI:ae,optPagination:!0,enableNewRow:!0})}),Object(O.jsxs)("div",{className:"slot slot_backups",children:[Object(O.jsx)("h2",{children:"\u0411\u0430\u0437\u0430 \u0434\u0430\u043d\u043d\u044b\u0445"}),Object(O.jsxs)("p",{children:["\u0411\u044d\u043a\u0430\u043f\u044b ",Object(O.jsx)("button",{className:"btn btn-primary",onClick:function(t){return e.handleMakeBackup(t)},children:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0431\u044d\u043a\u0430\u043f"})]}),Object(O.jsx)("ul",{className:"slot_backups_list",children:t.map((function(t){return Object(O.jsxs)("li",{className:"backups_item",children:[Object(O.jsx)("span",{className:"backups_item_filename",children:t.split(".").filter((function(e,t){return t<5})).join(".")}),Object(O.jsx)("button",{className:"btn btn-danger",onClick:function(a){return e.toBackup(t)},children:"\u041e\u0442\u043a\u0430\u0442\u0438\u0442\u044c"})]})}))}),Object(O.jsxs)("div",{className:"pagination-wrapper",children:[Object(O.jsxs)(ne.a.Select,{onChange:function(t){return e.setState({countItemsInPage:+t.target.value})},className:"header-selects header-selects-year","aria-label":"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0430\u0439\u0442\u043e\u043c\u043e\u0432",children:[Object(O.jsx)("option",{value:"10",selected:!0,children:"\u041a\u043e\u043b-\u0432\u043e: 10"}),Object(O.jsx)("option",{value:"20",children:"\u041a\u043e\u043b-\u0432\u043e: 20"}),Object(O.jsx)("option",{value:"30",children:"\u041a\u043e\u043b-\u0432\u043e: 30"}),Object(O.jsx)("option",{value:"40",children:"\u041a\u043e\u043b-\u0432\u043e: 40"}),Object(O.jsx)("option",{value:"50",children:"\u041a\u043e\u043b-\u0432\u043e: 50"})]}),Object(O.jsx)(De.a,{previousLabel:Object(O.jsx)(f.b,{}),nextLabel:Object(O.jsx)(f.c,{}),breakLabel:"...",breakClassName:"break-me",pageCount:a,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:this.pickPage.bind(this),containerClassName:"pagination",activeClassName:"active"})]})]})]})]})}}]),a}(i.a.Component)),Be=[{path:"/logout",name:"\u0412\u044b\u0439\u0442\u0438",role_user:k,isNavBar:!1,isPrivate:!0,component:se},{path:"/login",name:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f",role_user:_,isNavBar:!1,isPrivate:!1,icon:Object(O.jsx)(f.g,{}),component:se},{path:"/registration",name:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",role_user:_,isNavBar:!1,isPrivate:!1,icon:Object(O.jsx)(f.g,{}),component:ce},{path:"/new_order",name:"\u041d\u043e\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437",role_user:k,isNavBar:!0,isPrivate:!0,icon:Object(O.jsx)(f.f,{}),component:ue},{path:"/invoices",name:"\u0417\u0430\u043a\u0430\u0437\u044b",role_user:k,isNavBar:!0,isPrivate:!0,isExact:!0,icon:Object(O.jsx)(f.e,{}),component:Me},{path:"/invoices/:year/:id",name:"\u0417\u0430\u043a\u0430\u0437\u044b",role_user:k,isExact:!0,isNavBar:!1,isPrivate:!0,icon:Object(O.jsx)(f.e,{}),component:Me},{path:"/invoices/:year",name:"\u0417\u0430\u043a\u0430\u0437\u044b",role_user:k,isExact:!0,isNavBar:!1,isPrivate:!0,icon:Object(O.jsx)(f.e,{}),component:Me},{path:"/tables/prod",name:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0434\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0430",role_user:N,isNavBar:!0,isPrivate:!0,icon:Object(O.jsx)(f.j,{}),component:ke},{path:"/tables/control",name:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0434\u043b\u044f \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u043d\u0438\u044f",role_user:N,isNavBar:!0,isPrivate:!0,icon:Object(O.jsx)(f.j,{}),component:ke},{path:"/users",name:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438",role_user:y,isNavBar:!0,isPrivate:!0,icon:Object(O.jsx)(f.l,{}),component:we},{path:"/settings",name:"\u0421\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",role_user:k,isNavBar:!0,isPrivate:!0,icon:Object(O.jsx)(f.d,{}),component:Le},{path:"/",name:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",role_user:k,isNavBar:!1,component:Ie}],Ge=(a(207),a(208),a(209),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e,t,a,n=this;localStorage.getItem("token")?(e=localStorage.getItem("token"),t=function(e){n.setState({auth:!0,userActive:e.active}),n.props.addUser(e.login,e.name,e.role,e.active),n.props.authUser(!e.error),localStorage.setItem("token",e.jwt)},a=function(e){return n.setState({auth:!1,userActive:0})},V(W.a+W.b.urlAuth,{jwt:e},t,a)):(this.props.authUser(!1),this.setState({auth:!1,userActive:0}))}},{key:"render",value:function(){var e=this;return Object(O.jsx)(b.a,{children:Object(O.jsxs)(i.a.Fragment,{children:[Object(O.jsx)(L,{}),Object(O.jsx)(g,{routes:Be.filter((function(e){return e.isNavBar||void 0!==e.isPrivate&&!e.isPrivate}))}),Object(O.jsx)(h.NotificationContainer,{}),Object(O.jsx)("main",{children:Object(O.jsx)(p.d,{children:Be.map((function(t){var a=t.isPrivate&&(!e.props.auth||!e.props.user.active||t.role_user<e.props.user.role)?G(t.component):t.component;return Object(O.jsx)(p.b,{path:t.path,component:a,exact:!0},t.path)}))})})]})})}}]),a}(i.a.Component)),He=Object(c.b)((function(e){return{user:e.user,auth:e.app.authorization}}),(function(e){return{addUser:function(t,a,n,i){return e(T(t,a,n,i))},authUser:function(t){return e(M(t))}}}))(Ge),Ue=a(37),We=a(103),Ye=a(104),Ve={login:null,name:null,role:y,active:1,changes:[]},Ke={authorization:!0,invoicesChanges:[]},ze={changes:[]},qe=Object(Ue.combineReducers)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(B.a)(Object(B.a)({},e),{},{authorization:t.payload});case E:return localStorage.removeItem("token"),Object(B.a)(Object(B.a)({},e),{},{authorization:t.payload});case P:var a=-1;return e.invoicesChanges.map((function(e,n){if("CHANGE"===e.type&&e.payload.col===t.payload.payload.col&&e.payload.id===t.payload.payload.id)return a=n})),console.log(a,0===~a),0===~a?Object(B.a)(Object(B.a)({},e),{},{invoicesChanges:[].concat(Object(le.a)(e.invoicesChanges),[t.payload])}):Object(B.a)(Object(B.a)({},e),{},{invoicesChanges:e.invoicesChanges.reduce((function(e,n,i){return[].concat(Object(le.a)(e),i!==a?[n]:[t.payload])}),[])});case D:return Q(t.payload,e.invoicesChanges,(function(e){e.error?h.NotificationManager.warning("\u041a\u0430\u0436\u0435\u0442\u0441\u044f, \u043e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435","\u041e\u0448\u0438\u0431\u043a\u0430",3e3):h.NotificationManager.success("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b","\u041e\u041a",3e3)}),(function(e){return h.NotificationManager.warning("\u041a\u0430\u0436\u0435\u0442\u0441\u044f, \u043e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)})),Object(B.a)(Object(B.a)({},e),{},{invoicesChanges:[]});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(B.a)(Object(B.a)({},t.payload),{},{changes:[]});case w:return Ve;case S:return Object(B.a)(Object(B.a)({},e),{},{changes:[].concat(Object(le.a)(e.changes),[t.payload])});case I:return q(e.changes,(function(e){e.error?h.NotificationManager.warning("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a","\u041e\u0448\u0438\u0431\u043a\u0430",3e3):h.NotificationManager.success("\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!","OK",3e3)}),(function(e){return h.NotificationManager.warning("\u041a\u0430\u0436\u0435\u0442\u0441\u044f, \u043e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)})),Object(B.a)(Object(B.a)({},e),{},{changes:[]});default:return e}},tables:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(B.a)(Object(B.a)({},e),{},{changes:[].concat(Object(le.a)(e.changes),[t.payload])});case R:return z(t.payload.url,e.changes,(function(e){e.error?h.NotificationManager.warning("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a","\u041e\u0448\u0438\u0431\u043a\u0430",3e3):h.NotificationManager.success("\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!","OK",3e3)}),(function(e){return h.NotificationManager.warning("\u041a\u0430\u0436\u0435\u0442\u0441\u044f, \u043e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435","\u041e\u0448\u0438\u0431\u043a\u0430",3e3)})),Object(B.a)(Object(B.a)({},e),{},{changes:[]});default:return e}}}),Je=Object(Ye.composeWithDevTools)({trace:!0,traceLimit:25}),Xe=Object(Ue.createStore)(qe,Je(Object(Ue.applyMiddleware)(We.a,(function(e){return function(t){return function(a){var n=!1,i=[];function r(){i.forEach((function(t){return e.dispatch(t)})),i=[]}var s=Object.assign({},a,{asyncDispatch:function(e){i=i.concat([e]),n&&r()}}),c=t(s);return n=!0,r(),c}}}))));a(210);s.a.render(Object(O.jsx)(c.a,{store:Xe,children:Object(O.jsx)(He,{})}),document.getElementById("root"))},7:function(e){e.exports=JSON.parse('{"a":"","b":{"urlNewOrder":"/new_order","urlGetProdOrders":"/orders","urlGetControlOrders":"/orders","urlGetUsers":"/users","urlNumberOrder":"/get_number_order","urlRegistration":"/registration","urlLogin":"/login","urlAuth":"/auth","urlSaveUserTable":"/save_data/users","urlGetInvoices":"/invoices","urlGetInvoiceDOCX":"/get_invoice","urlPostInvoiceDeliverBack":"/new_invoice_deliver_back","urlSendInvoiceChanges":"/save_data/invoice","urlDeleteIncoive":"/delete_invoice","urlGetColors":"/get_colors","urlSaveColors":"/save_data/colors","urlGetMaterials":"/get_materials","urlSaveMaterials":"/save_data/materials","urlMakeBackup":"/make_backup","urlGetBackups":"/get_backups","urlToBackup":"/to_backup"}}')},80:function(e,t,a){},81:function(e,t,a){}},[[211,1,2]]]);
//# sourceMappingURL=main.f3952f5f.chunk.js.map